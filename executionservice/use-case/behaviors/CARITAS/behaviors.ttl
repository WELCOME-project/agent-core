# @base <http://localhost:8090/rdf4j/repositories/behaviors#> .

@prefix agents: <http://localhost:8090/rdf4j/repositories/agents#> .
@prefix : <http://localhost:8090/rdf4j/repositories/behaviors#> .
@prefix domain: <http://localhost:8090/rdf4j/repositories/domain#> .
@prefix localServices: <http://localhost:8090/rdf4j/repositories/localServices#> .
@prefix localAgents: <http://localhost:8090/rdf4j/repositories/localAgents#> .
@prefix services: <http://localhost:8090/rdf4j/repositories/services#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ajan: <http://www.ajan.de/ajan-ns#> .
@prefix bt: <http://www.ajan.de/behavior/bt-ns#> .
@prefix actn: <http://www.ajan.de/actn#> .
@prefix http-headers: <http://www.w3.org/2008/http-headers#> .
@prefix http-methods: <http://www.w3.org/2008/http-methods#> .
@prefix http-core: <http://www.w3.org/2006/http#> .
@prefix ssc: <http://welcome/ajan/servicecomputing#> .
@prefix myWelcome: <http://www.ajan.de/myWelcome-ns#> .

# ----------------------------------------------
# ------------- WelcomeBehaviorTree ------------
# ----------------------------------------------

# ----------- Endpoint ------------

# localhost:8080/welcome/integration/coordination/ajan/agents/<agentName>?capability=receiveSpeechAct | POST | text/turtle
# Body: "<http://test/Subject> <http://test/predicate> "Hallo! I come from the KMS" ."
# localhost:8080/welcome/integration/coordination/ajan/agents/<agentName>?capability=populateRepo | POST | text/turtle
# Body: "<http://test/Subject> <http://test/predicate> "Hallo! I come from the WPM" ."

# -------------------------------------------	
# ---------------- Behaviors ----------------
# -------------------------------------------	

:InitialWelcomeBehavior
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Initialization Behavior" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:UpdateBehaviorRunning
										[
											a bt:Priority ;
											bt:hasChildren (
																:ConditionLSRPopulated
																:EventProducerPopulateLSR
															)																														
										]
										[
											a bt:Priority ;
											bt:hasChildren (
																:ConditionLARPopulated
																:EventProducerPopulateLAR														
															)																														
										]
									)
				] .

:FinalWelcomeBehavior
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Final Behavior" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:DeleteTemporalFlagsinLAKR
										:DeleteTemporalFlagsinLSR
									)
				] .

:HeartbeatMonitoringBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Heartbeat behavior" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:AgentMonitoringHandleEvent
									)
				] .

:ErrorHandlingBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Error Handling Behavior" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:ReceiveErrorHandleEvent
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:ConditionKMSError
																						:UpdateCreateClosingUponFailureFarewellKMSError_Part1
																						:UpdateCreateClosingUponFailureFarewellKMSError_Part2
																						#:UpdateCreateHeaderDMSMessage																												
																						:SendIncompleteOrMultipleDIPDMS
																					)																															
																]
															)																															
										]
										[
											a bt:IsSucceeding ;
											bt:hasChild 	
														:UpdateEmptyExecutionRepository
										]
									)
				] .

:PopulateLSRRepos
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Populate Local LSR Repository" ;
	bt:hasChild [
					a bt:Priority ;
					bt:hasChildren (
										[
											a bt:Sequence ;
											bt:hasChildren (
																:EventHandlerRequestLSRTriples
																:UpdateBehaviorRunning
																:UpdateCreateHeaderDispatcherMessage
																:MessageSendLSRMessageWPM
																:DefaultFailed
															)																														
										]
										[
											a bt:Sequence ;
											bt:hasChildren (
																:EventHandlerReceiveLocalServices
																:UpdateBehaviorRunning
															#	[
															#		a bt:Invert ;
															#		bt:hasChild 
															#					:ConditionNoAgentPopulation																													
															#	]																
																[
																	a bt:Priority ;
																	bt:hasChildren (
																						[
																							a bt:Invert ;
																							bt:hasChild 
																										:ConditionLSRPopulated																														
																						]
																						:RemoveLSRContent
																						:UpdateLSRAgentKnowledge
																					)																															
																]
																:WriteTriplesLSRC1
																:WriteTriplesLSRC2
																:WriteTriplesLSRC3
																:PluginOWL2PDDL
																:UpdateAgentKnowsLSR
																:UpdateLSRExecutionKnowledge
																:UpdateDeleteBehaviorRunning
															)																															
										]
								   )
				] .

:PopulateLARRepos
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Populate Local LAR Repository" ;
	bt:hasChild [
					a bt:Priority ;
					bt:hasChildren (
										[
											a bt:Sequence ;
											bt:hasChildren (
																:EventHandlerRequestLARTriples
																:UpdateBehaviorRunning
																:UpdateCreateHeaderDispatcherMessage
																:MessageSendLARMessageWPM
																:DefaultFailed
															)																															
										]
										[
											a bt:Sequence ;
											bt:hasChildren (
																:EventHandlerReceiveLocalAgents
																:UpdateBehaviorRunning
																[
																	a bt:Priority ;
																	bt:hasChildren (
																						[
																							a bt:Invert ;
																							bt:hasChild 
																										:ConditionLARPopulated																														
																						]
																						:RemoveLARContent
																						:UpdateLARAgentKnowledge
																					)																															
																]
																:WriteTriplesLAR
																:UpdateAgentKnowsLAR
																:UpdateLARExecutionKnowledge
																:UpdateDeleteBehaviorRunning
															)																															
										]
								   )
				] .
				
:HandshakeBehavior
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Handhshake BT" ;
	bt:hasChild [
					a bt:Priority ;
					bt:hasChildren (
										[
											a bt:Invert ;
											bt:hasChild 
														:EventHandlerHandshake
										]
										[
											a bt:Sequence ;
											bt:hasChildren (
																:UpdateBehaviorRunning
																:ConditionLSRPopulated
																[
																	a bt:Priority ;
																	bt:hasChildren ([
																						a bt:Sequence ;
																						bt:hasChildren (
																										:ConditionLARPopulated																										
																										:UpdateCreateHeaderAppMessage
																										:MessageSendAgentReadiness
																										:UpdateDeleteBehaviorRunning
																										)																															
																					]
																					:EventProducerPopulateLAR
																					)																												
																]
															)
										]
										:EventProducerPopulateLSR									
									)																														
	] .
			
:ProcessSpeechActsBehavior
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Process Speech Acts BT" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Invert ;
																	bt:hasChild 
																				:EventSpeaktoavatar
																]
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:UpdateBehaviorRunning
																						[
																							a bt:IsSucceeding ;
																							bt:hasChild 	
																									:UpdateEmptyExecutionRepository			
																						]
																						:WriteAgentNameinExecution
																						:UpdateCreateOpeningDIPPart1
																						:UpdateCreateOpeningDIPPart2
																						:UpdateCreateOpeningDIPPart3
																						:UpdateCreateHeaderKMSMessage
																						:SendDIPtoKMS
																					)
																]
															)																														
										]
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Invert ;
																	bt:hasChild 
																				:EventDIP_OR_ServiceRequest
																]
																[
																	a bt:Priority ;
																	bt:hasChildren (
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:UpdateBehaviorRunning																																		
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						#:DeletePreviousDIPinExecution
																																						:UpdateEmptyExecutionRepository
																																						
																																		]
																																		:WriteActiveDIPinExecution
																																		:ConditionDIPIncomplete
																																		:UpdateIncompleteDIP
																																		:EventProducerSpecificBTDIPIncomplete
																																	)
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionDIPCompleteOrUndefinedOrUnfinished
																																		:UpdateCompleteDIP
																																		[
																																			a bt:Priority ;
																																			bt:hasChildren (
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:ConditionDIPIsNotOpening
																																														:EventProducerSpecificBTDIPComplete
																																													)
																																								]
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:ConditionalNoServiceRequest
																																														:DeleteActiveDIPinAgentKB
																																														[
																																															a bt:IsSucceeding ;
																																															bt:hasChild 	
																																																	:UpdateEmptyExecutionRepository
																																														]
																																														:WriteAgentNameinExecution
																																														:CreateClosingUponFailureNoRequest_Part1
																																														:CreateClosingUponFailureNoRequest_Part2
																																														:UpdateCreateHeaderKMSMessage
																																														:SendDIPtoKMS
																																													)
																																								]
																																							)
																																		]
																																	)
																												]
																											)
																						]
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionServiceRequest
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																					:DeletePreviousServiceRequestinExecution
																																		]																																		
																																		:WriteServiceRequestinExecution
																																		[
																																			a bt:Priority ;
																																			bt:hasChildren (
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:InvokeMatchmaker
																																														:ConditionMatchmakerOutput
																																														:PDDL2SPARQLPlugin
																																														[
																																															a bt:Priority ;
																																															bt:hasChildren (
																																																				[
																																																					a bt:Sequence ;
																																																					bt:hasChildren (
																																																										:ConditionPreconditionHolds	
																																																										#[
																																																										#	a bt:Priority ;
																																																										#	bt:hasChildren (
																																																										#						[
																																																										#							a bt:Sequence ;
																																																										#							bt:hasChildren (
																																																										#												:ConditionAtomicService
																																																										#												:CreateAtomicServiceDIP
																																																										#											)																														
																																																										#						]	
																																																										#						[
																																																										#							a bt:Sequence ;
																																																										#							bt:hasChildren (
																																																										#												:ConditionComposedService
																																																										#												:CreateComposedServiceDIP
																																																										#											)																														
																																																										#						]	
																																																										#					)																														
																																																										#]																						
																																																										:DeleteSSCResultinAgentKB
																																																										:WriteSSCResultinAgentKB
																																																										:EventProducerFirstInteractionMove
																																																									)																														
																																																				]
																																																				:EventProducerAlternativeFirstInteractionMove																																		
																																																			)																														
																																														]
																																													)
																																								]																					
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:InvokePlanner
																																														:ConditionPlannerOutput
																																														#:SendPlanDIPKMS	
																																													)																														
																																								]
																																							)
																																		]
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:DeleteActiveDIPinAgentKB
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution
																																		:CreateClosingUponFailureNoRequest_Part1
																																		:CreateClosingUponFailureNoRequest_Part2
																																		:UpdateCreateHeaderKMSMessage
																																		:SendDIPtoKMS
																																	)																														
																												]																					
																											)																														
																						]
																					)
																]
															)																														
										]										
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Invert ;
																	bt:hasChild 
																				:EventDefaultStatementNoOpinion
																]
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:UpdateBehaviorRunning
																						:DeleteActiveDIPinAgentKB																						
																						[
																							a bt:IsSucceeding ;
																							bt:hasChild 	
																										:UpdateEmptyExecutionRepository
																						]
																						:WriteAgentNameinExecution
																						:CreateClosingUponFailureInternalErrorPart1
																						:CreateClosingUponFailureInternalErrorPart2
																						:UpdateCreateHeaderKMSMessage
																						:SendDIPtoKMS
																					)
																]
															)																														
										]
									)
				] .
				

:GenericInteractionCARITASScenarioBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Generic Interaction Behaviour for CARITAS Scenarios" ;
	bt:hasChild [
					a bt:Priority ;
					bt:hasChildren (
										[
											a bt:Sequence ;
											bt:hasChildren (
																:EventHandlerFirstInteractionMove
																:UpdateBehaviorRunning
																:DeletePrecondition
																:DeleteSSCResultinLSR
																[
																	a bt:IsSucceeding ;
																	bt:hasChild 	
																					:UpdateEmptyExecutionRepository
																]
																[
																	a bt:IsSucceeding ;
																	bt:hasChild 	
																				:DeleteActiveDIPinAgentKB
																]
																[
																	a bt:Priority ;
																	bt:hasChildren (
																						[
																							a bt:Sequence ;
																							bt:hasChildren (
																												:ConditionServiceFirstInteraction																							
																												[
																													a bt:Priority ;
																													bt:hasChildren (
																																		[
																																			a bt:Sequence ;
																																			bt:hasChildren (
																																								:ConditionFirstMoveSimulateAppointment
																																								:WriteScenarioIntroductionDIP2Execution
																																							)
																																			
																																		]
																																		[
																																			a bt:Sequence ;
																																			bt:hasChildren (
																																								:ConditionFirstMoveCVCreation
																																								:WriteCVPurposeDIP2Execution
																																								[
																																									a bt:Priority ;
																																									bt:hasChildren (
																																														[
																																															a bt:Sequence ;
																																															bt:hasChildren (
																																																				:ConditionExistingIncompleteCV																																																																																												
																																																				:UpdateCVPurpose_ExistingIncompleteDIP2Execution
																																																			)
																																														]
																																														[
																																															a bt:Sequence ;
																																															bt:hasChildren (
																																																				:ConditionExistingCompleteCV																																																																																												
																																																				:UpdateCVPurpose_ExistingCompleteDIP2Execution
																																																			)
																																														]
																																														[
																																															a bt:Sequence ;
																																															bt:hasChildren (
																																																				:ConditionNoCV																																																																																												
																																																				:UpdateCVPurpose_NoCVDIP2Execution
																																																			)
																																														]
																																													)
																																								]
																																							)
																																		]																																		
																																		[
																																			a bt:Sequence ;
																																			bt:hasChildren (
																																								:ConditionFirstMoveSchooling
																																								:WriteScenarioIntroductionSchoolingDIP2Execution
																																							)
																																		]
																																		
																																		
																																	)
																												]
																											)																														
																						]
																						[
																							a bt:Sequence ;
																							bt:hasChildren (
																												[
																													a bt:IsSucceeding ;
																													bt:hasChild 	
																																:UpdateEmptyExecutionRepository
																												]
																												:WriteAgentNameinExecution
																												:UpdateCreateInformContactNGOFarewellDIP2Execution_Part1
																												:UpdateCreateInformContactNGOFarewellDIP2Execution_Part2
																												:UpdateCreateInformContactNGOFarewellDIP2Execution_Part3
																											)																														
																						]																																		
																					)																														
																]	
																:DeleteSSCResultinAgentKB
																:DeleteFirstInteractionFlaginLAKR
																:UpdateCreateHeaderKMSMessage
																:SendDIPtoKMS																					
															)
										]
										[
											a bt:Sequence ;
											bt:hasChildren (
																:EventHandlerSpecificBT	
																[
																	a bt:IsSucceeding ;
																	bt:hasChild 	
																					:UpdateEmptyExecutionRepository
																]
																:WriteSpecificBTFlaginExecution																
																[
																	a bt:IsSucceeding ;
																	bt:hasChild 	
																					:DeleteSpecificBTFlaginAgentKB
																]
																:WriteActiveDIPinExecution
																[
																	a bt:Priority ;
																	bt:hasChildren (	
																						[
																							a bt:Sequence ;
																							bt:hasChildren (
																												:ConditionalFlagIncomplete
																												[
																													a bt:IsSucceeding ;
																													bt:hasChild 	
																																:DeleteActiveDIPinAgentKB
																												]																										
																												:SendIncompleteOrMultipleDIPDMS
																											)																														
																						]
																						[
																							a bt:Sequence ;
																							bt:hasChildren (
																												:ConditionalNormalClosing_ContactNGO_ClosingFailureComplete
																												:DeleteActiveDIPinAgentKB
																												:UpdateCreateHeaderAppMessage
																												:MessageSendDialogueFinishNotification
																											)																														
																						]
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionExecuteSimulateAppointmentBT
																																		:SpecificSimulateAppointmentBT
																																	)
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionExecuteSchoolingBT
																																		:EventProducerExecuteSchoolingBT
																																	)
																												]
																												:EventProducerExecuteCVCreationBT
																											)
																						]
																					)
																]
																:UpdateDeleteBehaviorRunning
															)
										]
									)
				] .

:SpecificSimulateAppointmentBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Specific Behavior Tree for Simulate an Appointment by Phone" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:UpdateBehaviorRunning																				
										[
											a bt:IsSucceeding ;
											bt:hasChild 	
														:UpdateEmptyExecutionRepository
										]
										:WriteActiveDIPinExecution
										:DeleteActiveDIPinAgentKB
										[
											a bt:Priority ;
											bt:hasChildren (
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalUndefinedDIP
																					[
																							a bt:IsSucceeding ;
																							bt:hasChild 	
																									:UpdateEmptyExecutionRepository
																					]
																					:WriteAgentNameinExecution
																					:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part1
																					:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part2
																				)																														
															]
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalAnyConfirmInfoNot_UndefinedValue
																					[
																						a bt:IsSucceeding ;
																						bt:hasChild 	
																										:UpdateEmptyExecutionRepository
																					]
																					:WriteAgentNameinExecution
																					:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part1
																					:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part2
																					:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part3
																					:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part4
																				)																														
															]
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalScenarioIntroductionCompleteAndYes
																					:WriteSimulationIntroductionDIP2Execution
																				)																														
															]
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalScenarioIntroductionCompleteAndNot
																					[
																						a bt:IsSucceeding ;
																						bt:hasChild 	
																										:UpdateEmptyExecutionRepository
																					]
																					:UpdateCreateInformContactNGODIPPart1
																					:UpdateCreateInformContactNGODIPPart2
																				)																														
															]
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalSimulationIntroductionComplete
																					:WriteObtainTCNInformationDIP2Execution
																				)																														
															]
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalInformDtlApORApFailedORInformContactDtlCptlORInformContactCptlYes
																					:WriteSimulationClosingDIP2Execution
																				)																														
															]
															[
																a bt:Sequence ;
																bt:hasChildren (
																					:ConditionalReactiveScenario
																					[
																						a bt:Priority ;
																						bt:hasChildren (	
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalObtainTCNInformationComplete
																																	#To be changed in the future: Use just one query
																																	#:UpdateDeleteInformContactProactiveDIP
																																	#:UpdateDeleteInformContactDetailsProactiveDIP
																																	:WriteMakeAppointmentDIP2Execution
																																	:UpdateReactiveFlaginExecution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalMakeAppointmentCompleteYesAnswerLowerAttempts
																																	:WriteInformDetailsAppointmentDIP
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalMakeAppointmentCompleteNotAnswer
																																	:UpdateCreateClosingFailureAppointmentFailedDIP
																																)																														
																											]																																											
																										)																														
																						]
																					)																														
																]							
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:ConditionalProactiveScenario
																						[
																							a bt:Priority ;
																							bt:hasChildren (	
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalObtainTCNInformationComplete
																																		:WriteInformContactDIP2Execution
																																		:UpdateReactiveFlaginExecution
																																	)																														
																												]																									
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalInformContactCompleteNotAnswer
																																		:WriteInformContactDetailDIP2Execution
																																		:UpdateReactiveFlaginExecution
																																	)																														
																												]																
																											)																														
																						]
																					)																														
																]													
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:ConditionalSimulationClosingComplete
																						:WriteNormalClosingDIP2Execution
																					)																														
																]
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						[
																							a bt:IsSucceeding ;
																							bt:hasChild 	
																										:UpdateEmptyExecutionRepository
																						]
																						:WriteAgentNameinExecution
																						:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part1
																						:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part2
																					)																														
																]
														)
										]
										:UpdateCreateHeaderKMSMessage
										:SendDIPtoKMS
										:UpdateDeleteBehaviorRunning
									)
				] .	

:SpecificCVCreationBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "CV Creation Behavior Tree" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:UpdateBehaviorRunning									
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Sequence ;
																	bt:hasChildren(
																					:EventHandlerCVNotification
																					[
																						a bt:IsSucceeding ;
																						bt:hasChild 	
																								:UpdateEmptyExecutionRepository
																					]
																					:WriteNotificationToExecution
																					:DeleteS7NotificationFromLAKR
																					[
																						a bt:Priority ;
																						bt:hasChildren (
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsPersonalInfoFinished
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendPersonalInfoSectionToApp 
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsEducationInformationFinished
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendEducationInformationSectionToApp 
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsOtherEducationInformationFinished
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendOtherEducationInformationSectionToApp 
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsLanguageInformationFinished
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendLanguageInformationSectionToApp 
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsEmploymentInformationFinished
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendEmploymentInformationSectionToApp 
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsSkillInformationFinished
																																	#:UpdateCreateHeaderAppMessageSkillList
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendSkillNotificationtoApp																																																															
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionIsOtherInformationFinished
																																	:UpdateCreateHeaderAppMessageDisplay
																																	:MessageSendOtherInformationSectionToApp 
																																)																														
																											]
																										)																														
																					]
																				  )
																]
																[
																	a bt:Sequence ;
																	bt:hasChildren(
																						:EventHandlerExecuteCVCreationBT
																						[
																							a bt:IsSucceeding ;
																							bt:hasChild 	
																									:UpdateEmptyExecutionRepository
																						]
																						:WriteActiveDIPinExecution
																						:DeleteActiveDIPinAgentKB
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalUndefinedDIP
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																							:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution
																																		:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part1
																																		:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part2
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalAnyConfirmInfoNot_UndefinedValue
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																							:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution
																																		:UpdateCreateInformContactNGOFarewellDIP2Execution_Part1
																																		:UpdateCreateInformContactNGOFarewellDIP2Execution_Part2
																																		:UpdateCreateInformContactNGOFarewellDIP2Execution_Part3
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalCVPurposeInterestYes																																		
																																		:WritePersonalInfoDIP2Execution
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalCVPurposeInterestNot
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																					:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution	
																																		:UpdateCreateInformContactNGOFarewell_GENERIC_DIP2Execution_Part1
																																		:UpdateCreateInformContactNGOFarewell_GENERIC_DIP2Execution_Part2
																																		:UpdateCreateInformContactNGOFarewell_GENERIC_DIP2Execution_Part3
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalPersonalInfoConfirmationYes
																																		:WriteEducationInformationDIP2Execution 
																																	)																														
																												] 
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalEducationInformationConfirmationYes
																																		:WriteOtherEducationInformationDIP2Execution
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalOtherEducationInformationConfirmationYes
																																		:WriteLanguageInformationDIP2Execution 
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalLanguageInformationConfirmationYes
																																		:WriteEmploymentInformationDIP2Execution 
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalEmploymentInformationConfirmationYes
																																		#:UpdateCreateHeaderAppMessageSkillList
																																		#:MessageSendSkillNotificationtoApp
																																		:WriteSkillInformationDIP2Execution																																		
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalSkillInformation
																																		:WriteOtherInformationDIP2Execution 	
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalOtherInformationConfirmationYes
																																		:UpdateCreateHeaderAppMessageDisplay
																																		:MessageSendCVCreatedNotificationtoApp
																																		:WriteCreateCVDocumentDIP2Execution 
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalCreateCVDocumentYes
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																						
																																		]
																																		:WriteAgentNameinExecution
																																		:UpdateCreateNormalClosingS7DIP2Execution_Part1
																																		:UpdateCreateNormalClosingS7DIP2Execution_Part2
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																					:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution
																																		:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part1
																																		:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part2
																																	)																														
																												]
																											)
																						]
																						:UpdateCreateHeaderKMSMessage
																						:SendDIPtoKMS
																				  )
																]																
															)
										]
										:UpdateDeleteBehaviorRunning										
									)
				] .	

:SpecificSchoolingBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Schooling Behavior Tree: Master" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:HandleEventMasterSchoolingBT
										:UpdateBehaviorRunning									
										[
											a bt:IsSucceeding ;
											bt:hasChild 	
														:UpdateEmptyExecutionRepository
										]
										:WriteActiveDIPinExecution	
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalMasterDIP
																																		[
																																			a bt:Priority ;
																																			bt:hasChildren (
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:ConditionalExecuteSchoolDegreeRecognition
																																														:WriteSchoolRecognitionRequirementsDIP2Execution
																																													)																														
																																								]
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:ConditionalExecuteUDiplomaRecognition																																		
																																														:WriteUDegreeRecognitionDIP2Execution
																																													)																														
																																								]
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																														:ConditionalAllSubTopicsInformed																																	
																																														[
																																															a bt:IsSucceeding ;
																																															bt:hasChild 	
																																																	:UpdateEmptyExecutionRepository
																																														]
																																														:WriteAgentNameinExecution
																																														:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part1
																																														:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part2 	
																																													)																														
																																								]
																																								[
																																									a bt:Sequence ;
																																									bt:hasChildren (
																																															[
																																																a bt:IsSucceeding ;
																																																bt:hasChild 	
																																																				:UpdateEmptyExecutionRepository
																																															]
																																															:WriteAgentNameinExecution
																																															:UpdateCreateClosingUponFailureUnknownTopicDIP2Execution_Part1
																																															:UpdateCreateClosingUponFailureUnknownTopicDIP2Execution_Part2
																																													)																														
																																								]
																																							)																														
																																		]
																																	)																														
																												]																
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalUndefinedDIP
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution
																																		:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part1
																																		:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part2
																																	)																														
																												]
																												[
																													a bt:Sequence ;
																													bt:hasChildren (
																																		:ConditionalAnyConfirmInfoNot_UndefinedValue
																																		[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																		]
																																		:WriteAgentNameinExecution
																																		:UpdateCreateInformContactNGOFarewellDIP2Execution_Part1																																		
																																		:UpdateCreateInformContactNGOFarewellDIP2Execution_Part2
																																		:UpdateCreateInformContactNGOFarewellDIP2Execution_Part3
																																	)																														
																												]
																							)
																						]
																						:DeleteActiveDIPinAgentKB
																						:UpdateCreateHeaderKMSMessage
																						:SendDIPtoKMS
																					)																														
																]
																:EventProducerInformFirstTopic
																
															)																														
										]
										:UpdateDeleteTopicSelected
										:UpdateDeleteBehaviorRunning
					)
				] .	
				
:SchoolDegreeSchoolingBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Schooling Behavior Tree: School Degree Recognition" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:EventHandlerSchoolDegreeRecognition
										:UpdateBehaviorRunning									
										[
											a bt:IsSucceeding ;
											bt:hasChild 	
														:UpdateEmptyExecutionRepository
										]
										:WriteActiveDIPinExecution										
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:ConditionalDocumentAssistance_OtherORContactNGOSubTopicORDeadlineKnowORCheckDocApp_Yes 
																						:DeleteActiveDIPinAgentKB																						
																						:UpdateCreateHeaderKMSMessage
																						:MessageSchoolDegreeRecognitionInformed
																					)																														
																]																
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalSchoolRecogReq_YesORSchoolCertifiDocReq_Yes
																																	:WriteFinishedClassesDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalSchoolRecognitionRequirements_Not
																																	:WriteGettingSchoolCertificateDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalFinishedClassesUnder12
																																	:WriteSchoolCertificateRecognitionDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalFinishedClassesOver12
																																	:WriteHighSchoolRecognitionDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalGettingSchoolCertificate_Yes
																																	:WriteSchoolCertificateDocumentRequirementDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalGetCertificateORDocumentRequirementORCertCopiesORTransOpt_Otherwise																																	
																																	[		a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																	]
																																	:WriteAgentNameinExecution
																																	:UpdateCreateInformContactNGOFarewellDIP2Execution_Part1
																																	:UpdateCreateInformContactNGOFarewellDIP2Execution_Part2
																																	:UpdateCreateInformContactNGOFarewellDIP2Execution_Part3
																																)																														
																											]  
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalHighSchoolRecogORSchoolCertiRecog_Otherwise
																																	:WriteCVAssistanceDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalCVAssistance_Yes
																																	:WriteCVCreationProcessDIP2Execution
																																)																														
																											] 
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalCVProcessORHighSchoolORSchoolCert_YesORCVAssistance_Not
																																	:WriteOriginalCopyCertificateDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalOriginalCopyCertificate_YesOROriginalCopyDocumentRequirement_Yes
																																	:WriteDocumentTranslationDIP2Execution
																																)																														
																											]   
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalOriginalCopyCertificate_Otherwise
																																	:WriteGettingOriginalCopyDIP2Execution
																																)																														
																											]  
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalGettingOriginalCopy_Yes
																																	:WriteOriginalCopyDocumentRequirementDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalDocumentTranslation_Yes
																																	:WriteCertifiedCopiesDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalDocumentTranslation_Otherwise
																																	:WriteDocTranslationOptionsDIP2Execution
																																)																														
																											] 																											
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalCertifiedCopiesORDocTranslationOpt_Yes
																																	:WriteCertifiedCopiesAvailabilityDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalCertifiedCopiesAvailability_Yes
																																	:WriteUrgencyDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalCertifiedCopiesAvailability_Otherwise
																																	:WriteDocumentAssistanceDIP2Execution
																																)																														
																											]	
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalUrgency_Yes
																																	:WriteDeadlineKnowledgeDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalUrgency_Otherwise
																																	:WriteCheckDocumentsAppointmentDIP2Execution
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalDocumentAssistance_Yes																																	
																																	[
																																			a bt:IsSucceeding ;
																																			bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																	]
																																	:WriteAgentNameinExecution
																																	:UpdateCreateContactNGOSubTopicDIP2Execution_Part1
																																	:UpdateCreateContactNGOSubTopicDIP2Execution_Part2
																																	:UpdateCreateContactNGOSubTopicDIP2Execution_Part3
																																)																														
																											]
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalContactNGOSubTopicORDeadlineKnowledgeORCheckDocAppoint_Otherwise
																																	[
																																		a bt:IsSucceeding ;
																																		bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																	]
																																	:WriteAgentNameinExecution
																																	:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part1
																																	:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part2 	
																																)																														
																											]
																							)
																						]
																						:DeleteActiveDIPinAgentKB
																						:UpdateCreateHeaderKMSMessage
																						:SendDIPtoKMS
																	)																														
																]
																:EventProducerInformSecondTopic
															)																														
										]
										:UpdateDeleteBehaviorRunning
					)
				] .	

:UniversityDiplomaRecognitionBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Schooling Behavior Tree: University Diploma Recognition" ;
	bt:hasChild [
					a bt:Sequence ;
					bt:hasChildren (
										:EventHandlerUDiplomaRecognition
										:UpdateBehaviorRunning									
										[
											a bt:IsSucceeding ;
											bt:hasChild 	
														:UpdateEmptyExecutionRepository
										]
										:WriteActiveDIPinExecution
										[
											a bt:Priority ;
											bt:hasChildren (
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						:ConditionalUDegreeRecognition_Yes
																						:DeleteActiveDIPinAgentKB	
																						:UpdateCreateHeaderKMSMessage
																						:MessageUniversityDiplomaRecognitionInformed
																					)																														
																]
																[
																	a bt:Sequence ;
																	bt:hasChildren (
																						[
																							a bt:Priority ;
																							bt:hasChildren (
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	:ConditionalUDegreeRecognition_Otherwise
																																	[
																																		a bt:IsSucceeding ;
																																		bt:hasChild 	
																																						:UpdateEmptyExecutionRepository
																																	]
																																	:WriteAgentNameinExecution
																																	:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part1
																																	:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part2 	
																																)																														
																											]																											
																											[
																												a bt:Sequence ;
																												bt:hasChildren (
																																	[
																																		a bt:IsSucceeding ;
																																		bt:hasChild 	
																																					:UpdateEmptyExecutionRepository
																																	]
																																	:WriteAgentNameinExecution
																																	:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part1
																																	:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part2
																												)																														
																											]
																							)
																						]
																						:DeleteActiveDIPinAgentKB
																						:UpdateCreateHeaderKMSMessage
																						:SendDIPtoKMS
																	)																														
																]
															)																														
										]
										:UpdateDeleteBehaviorRunning
					)
				] .	


:ExternalFAQBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "External FAQ Behavior Tree" ;
	bt:hasChild [
		a bt:Sequence ;
		bt:hasChildren (
							:EventHandlerRetrievedExternalFAQs
							:UpdateBehaviorRunning
							[
								a bt:IsSucceeding ;
								bt:hasChild 	
										:UpdateEmptyExecutionRepository
							]
							:WriteExternalFAQNotifiationToExecution
							:UpdateDeleteExternalFAQNotificationAgentKnowledge
							#:ConditionExternalFAQ
							:UpdateCreateHeaderAppMessageFAQSuggestion
							:MessageSendFoundFAQtoApp	
							:UpdateDeleteBehaviorRunning							
						)
				] .
				
:InternalFAQBT
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Internal FAQ Behavior Tree" ;
	bt:hasChild [
		a bt:Sequence ;
		bt:hasChildren (
							:EventHandlerRetrievedInternalFAQs
							:UpdateBehaviorRunning
							[
								a bt:IsSucceeding ;
								bt:hasChild 	
										:UpdateEmptyExecutionRepository
							]
							:WriteInternalFAQNotifiationToExecution
							:UpdateDeleteInternalFAQNotificationAgentKnowledge
							:WriteAgentNameinExecution
							:UpdateCreateFAQDIPinExecution_Part1
							:UpdateCreateFAQDIPinExecution_Part2
							:UpdateCreateFAQDIPinExecution_Part3
							:UpdateCreateFAQDIPinExecution_Part4
							:UpdateCreateFAQDIPinExecution_Part5
							:UpdateCreateFAQDIPinExecution_Part6
							:UpdateCreateFAQDIPinExecution_Part7
							:UpdateCreateFAQDIPinExecution_Part8
							:UpdateCreateHeaderKMSMessage
							:SendDIPtoKMS
							:UpdateDeleteBehaviorRunning							
						)
				] .
				
:AgentShutdown
	a bt:BehaviorTree ;
	a bt:Root ;
	rdfs:label "Agent Shutdown Behavior Tree" ;
	bt:hasChild [
		a bt:Sequence ;
		bt:hasChildren (
							:EventHandlerShutdown
							[
								a bt:Priority ;
								bt:hasChildren (
													[
														a bt:Sequence ;
														bt:hasChildren (
																			:ConditionAgentRunningBT
																			:UpdateAgentRunningYes
																		)																														
													]
													:UpdateAgentRunningNot
												)																														
							]
							:MessageSendShutdownNotification
						)
				] .
			
# -------------------------------------------	
# ----------- Standard Primitives -----------
# -------------------------------------------	

#=============================================================================================
# InitialBT

:UpdateBehaviorRunning
	a bt:Update ;
	rdfs:label "Update: Write agentRunning Flag in the LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>									
					INSERT {
						?agent welcome:hasBTRunning "true"^^xsd:boolean .
					}
					 WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateDeleteBehaviorRunning
	a bt:Update ;
	rdfs:label "Update: Delete agentRunning Flag in the LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>									
					DELETE {
						?agent welcome:hasBTRunning ?val .
					}
					 WHERE {
						?agent rdf:type ajan:Agent .
						OPTIONAL{?agent welcome:hasBTRunning ?val .}
					}"""^^xsd:string ;
		]) .
		
:ConditionLARPopulated
	a bt:Condition ;
	rdfs:label "Condition: LAR initialized?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:LocalAgentsKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					ASK
					WHERE {
						?agent rdf:type ajan:Agent .
						?agent ?p ?o .	
					}"""^^xsd:string ;
		]) .

:EventProducerPopulateLAR
	a bt:EventProducer ;
	rdfs:label "EventProducer: Request Populate LAR" ;
	ajan:event agents:PopulateLAREvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:needsPopulateLAR "localRepo" .
						}
						WHERE {
							?s rdf:type ajan:Agent .
						}"""^^xsd:string ;
				] .	

:ConditionLSRPopulated
	a bt:Condition ;
	rdfs:label "Condition: LSR initialized?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					ASK
					WHERE {
						?service rdf:type service:Service.	
					}"""^^xsd:string ;
		]) .
		
:EventProducerPopulateLSR
	a bt:EventProducer ;
	rdfs:label "EventProducer: Request Populate LSR" ;
	ajan:event agents:PopulateLSREvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:needsPopulateLSR "localRepo" .
							<http://mycontext> <http://www.ajan.de/behavior/bt-ns#rdfContext> <http://localhost:8090/rdf4j/repositories/agents#PopulateLSREvent> .
						}
						WHERE {
							?s rdf:type ajan:Agent .
						}"""^^xsd:string ;
				] .	

#=============================================================================================
# FinalBT

:DeleteTemporalFlagsinLAKR
	a bt:Update ;
	rdfs:label "Update: Delete Flags in LAKR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					DELETE {
						?MatchmakerOffer welcome:hasPrecondition ?precondition .
						?MatchmakerResult ssc:hasServiceName ?servName .	
						?agent welcome:hasBTRunning ?val .
						?query welcome:hasPreconditionResult ?preconVal .
						welcome:myWelcomeAgent welcome:hasFirstMove ?result .
						?bt welcome:hasActiveDIP ?id .	
						?dip welcome:hasNamedGraph ?dipGraph .
					}
					 WHERE {
						?s ?o ?p .
						OPTIONAL {
							{?MatchmakerOffer welcome:hasPrecondition ?precondition .}
							UNION
							{?MatchmakerResult ssc:hasServiceName ?servName .}	
							UNION
							{?agent welcome:hasBTRunning ?val .}
							UNION
							{?query welcome:hasPreconditionResult ?preconVal .}
							UNION
							{welcome:myWelcomeAgent welcome:hasFirstMove ?result .}
							UNION
							{?bt welcome:hasActiveDIP ?id .}
							UNION
							{?dip welcome:hasNamedGraph ?dipGraph .}
						}
					}					
					"""^^xsd:string ;
		]) .
		
:DeleteTemporalFlagsinLSR
	a bt:Update ;
	rdfs:label "Update: Delete Flags in LSR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					DELETE {
						?ssc ssc:hasResultOffer ?MatchmakerOffer .	
					}
					WHERE {
						?s ?o ?p .
						OPTIONAL {
							?ssc ssc:hasResultOffer ?MatchmakerOffer .	
						}
					}					
					"""^^xsd:string ;
		]) .


#=============================================================================================
# HeartbeatMonitoringBT

:AgentMonitoringHandleEvent
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Heartbeat Monitoring" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#AgentMonitoringEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>	
						CONSTRUCT {
							?s ?p ?o .
						}
						WHERE { 
							?s ?p ?o .				
						}"""^^xsd:string ;
				] .

#=============================================================================================
#ErrorHandlingBT	

:ReceiveErrorHandleEvent
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Error Handling" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#ErrorHandlingEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>	
						PREFIX wex: <http://welcome.org/integration/pipeline/exception#>
						CONSTRUCT {
							?error rdf:type wex:WelcomePipelineException .
							?error ?propError ?objError .
						}
						WHERE { 
							?error rdf:type wex:WelcomePipelineException .
							?error ?propError ?objError .
						}"""^^xsd:string ;
				] .

:ConditionKMSError
	a bt:Condition ;
	rdfs:label "Condition: Error in KMS?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX wex: <http://welcome.org/integration/pipeline/exception#>
					ASK
					WHERE {
						?error rdf:type wex:WelcomePipelineException .
						?error wex:hasCode ?errorCode .
						FILTER (CONTAINS(str(?errorCode), "KMS"))						
					}"""^^xsd:string ;
		]) .

:UpdateCreateClosingUponFailureFarewellKMSError_Part1
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - KMS Error - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					PREFIX wex: <http://welcome.org/integration/pipeline/exception#>
					INSERT {
						welcome:ClosingUponFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ClosingUponFailureFarewell welcome:hasDIPStatus welcome:Incomplete .
						welcome:ClosingUponFailureFarewell welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string . 
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReasonTError40_4 .
						welcome:informMessage welcome:dependsOn welcome:Unknown .
						welcome:informMessage welcome:associatedWith welcome:Unknown .
						welcome:informMessage welcome:hasStatus welcome:Pending .
						welcome:informMessage welcome:hasNumberAttempts 0 .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .				
						welcome:reifiedReasonTError40_4 rdf:type rdf:Statement .
						welcome:reifiedReasonTError40_4 rdf:subject welcome:subTemplate .
						welcome:reifiedReasonTError40_4 rdf:predicate welcome:isReason .
						welcome:reifiedReasonTError40_4 rdf:object "TError40_4"^^xsd:string .
					} WHERE { 
						?error rdf:type wex:WelcomePipelineException .
					}"""^^xsd:string ;
		]) .

:UpdateCreateClosingUponFailureFarewellKMSError_Part2
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - KMS Error - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					PREFIX wex: <http://welcome.org/integration/pipeline/exception#>
					INSERT {
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informClosingFailureFarewell .
						welcome:informClosingFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasTemplateId "TInformClosingFailureFarewell"^^xsd:string . 
						welcome:informClosingFailureFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informClosingFailureFarewell welcome:hasStatus welcome:Pending .
						welcome:informClosingFailureFarewell welcome:hasNumberAttempts 0 .
						welcome:informClosingFailureFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informClosingFailureFarewell welcome:isOptional "false"^^xsd:boolean .
						welcome:informClosingFailureFarewell welcome:dependsOn welcome:Unknown .
						welcome:informClosingFailureFarewell welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?error rdf:type wex:WelcomePipelineException .
					}"""^^xsd:string ;
		]) .
																						
:UpdateEmptyExecutionRepository
	a bt:Update ;
	rdfs:label "Update: Empty Execution Repository" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE{
						?s ?p ?o .
					}
					WHERE { 
						?s ?p ?o .
					}
					"""^^xsd:string ;
		]) .
		
#=============================================================================================
# PopulateReposBT
																
:EventHandlerRequestLSRTriples
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Request Populate LSR" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#PopulateLSREvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:needsPopulateLSR "localRepo" .
						}
						WHERE { 
							welcome:myWelcomeAgent welcome:needsPopulateLSR "localRepo" .				
						}"""^^xsd:string ;
				] .

:UpdateCreateHeaderDispatcherMessage
	a bt:Update ;
	rdfs:label "Update: Header Message for Dispatcher" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE{
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?id .
					}
					INSERT {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?id .						
					} 
					WHERE { 
						?msg welcome:hasCorrelationID ?correlationID .
						?du rdf:type welcome:DialogueUser .
						?du welcome:hasUserId ?idObject .
						?idObject welcome:hasValue ?id .
					}
					"""^^xsd:string ;
		]) .
		
:MessageSendLSRMessageWPM
	a <http://www.ajan.de/myWelcome-ns#Message> ;
	rdfs:label "Message: Request KBS populate LSR" ;
	rdfs:comment "Message: Request KBS populate LSR" ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	<http://www.ajan.de/myWelcome-ns#correlatorId> [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "application/trig"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "text/turtle"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:AgentKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>	
						CONSTRUCT {					
							?agent rdf:type ajan:Agent .
						}
						WHERE {
							?agent rdf:type ajan:Agent .					
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
		a bt:SelectQuery ;
		a bt:QueryUri ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
					SELECT ?requestURI 
					WHERE
					{
					  welcome:dispatcher welcome:hasAddress ?partialAddress .
					  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/globalRepository?repository=wsr") AS ?requestURI )
					}"""^^xsd:string
		] . 
	#	bt:queryUri [
	#	a bt:SelectQuery ;
	#	a bt:QueryUri ;
	#	bt:originBase ajan:AgentKnowledge ;  
	#	bt:sparql """
	#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
	#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
	#				SELECT ?requestURI 
	#				WHERE
	#				{
	#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
	#				  BIND(CONCAT(STR(?partialAddress), "/kms/receiveDIP") AS ?requestURI )
	#				}"""^^xsd:string
	#	] .

:DefaultFailed
	a bt:Fail ;
	rdfs:label "Default Fail - Successful Request to KBS"^^xsd:string .
	
:EventHandlerRequestLARTriples
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Request Populate LAR" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#PopulateLAREvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """						
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:needsPopulateLAR "localRepo" .
						}
						WHERE { 
							welcome:myWelcomeAgent welcome:needsPopulateLAR "localRepo" .
						}"""^^xsd:string ;
				] .

:MessageSendLARMessageWPM
	a <http://www.ajan.de/myWelcome-ns#Message> ;
	rdfs:label "Message: Request KBS populate LAR" ;
	rdfs:comment "Message: Request KBS populate LAR" ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	<http://www.ajan.de/myWelcome-ns#correlatorId> [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "text/turtle"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:AgentKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>	
						CONSTRUCT {					
							?agent rdf:type ajan:Agent .
						}
						WHERE {
							?agent rdf:type ajan:Agent .					
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/globalRepository?repository=war") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/kms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:EventHandlerReceiveLocalServices
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Receive Local Services" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#ReceiveLocalServicesEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """"""^^xsd:string ;
				] .

#:ConditionNoAgentPopulation
#	a bt:Condition ;
#	rdfs:label "Condition: Agent Population?" ;
#	bt:query ( [
#		a bt:AskQuery ;
#		bt:originBase ajan:ExecutionKnowledge ;
#		bt:sparql """
#					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
#					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
#					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
#					ASK
#					WHERE {
#						?agentName rdf:type ajan:Agent .
#					}"""^^xsd:string ;
#		]) .
		
:RemoveLSRContent
	a bt:Update ;
	rdfs:label "Update: Remove LSR Content" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					DELETE {
						?s ?o ?p .
					}
					 WHERE {
						?s ?o ?p .
					}					
					"""^^xsd:string ;
		]) .

:UpdateLSRAgentKnowledge
	a bt:Update ;
	rdfs:label "Delete LSR Agent Knowledge" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
				PREFIX ajan: <http://www.ajan.de/ajan-ns#>
				DELETE {
					?agent welcome:knowsLocalServices ajan:LocalServicesKnowledge .	
				}
				INSERT {
					?agent welcome:needsPopulateLSR "localRepo" .
				}
				WHERE {
					?agent rdf:type ajan:Agent .
				}		"""^^xsd:string ;
		]) .
		
#:WriteTriplesLSR
#	a bt:Write ;
#	rdfs:label "Write Triples in LSR" ;
#	bt:query [
#		a bt:ConstructQuery ;
#		bt:originBase ajan:ExecutionKnowledge ;
#		bt:targetBase ajan:LocalServicesKnowledge ;
#		bt:sparql """
#			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
#			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
#			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
#			PREFIX owl: <http://www.w3.org/2002/07/owl#>
#			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
#			CONSTRUCT  {
#			  ?s ?o ?p .
#			}
#			WHERE { 
#			  SELECT DISTINCT ?s ?o ?p 
#			  WHERE {
#				?s ?o ?p .
#				?a rdf:type service:Service .
#			  }
#			} """^^xsd:string ;
#	] .

:PluginOWL2PDDL
	a ssc:PDDLConverter ;
	rdfs:label "Plugin: Create PDDL Domain File" ;
	ssc:LocalServicesTriples [
				a bt:SelectQuery ;
				bt:originBase ajan:LocalServicesKnowledge ;
				bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				SELECT ?s ?o ?p ?g
				WHERE {
					{ GRAPH ?g { ?s ?o ?p } }
				}"""^^xsd:string ;
			] .	

:UpdateAgentKnowsLSR
	a bt:Update ;
	rdfs:label "Update: Agent Knows LSR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					DELETE {
						welcome:myWelcomeAgent welcome:needsPopulateLSR "localRepo" .
					}
					INSERT {
						?agent welcome:knowsLocalServices ajan:LocalServicesKnowledge .	
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}					
					"""^^xsd:string ;
		]) .

:WriteTriplesLSRC1
	a bt:Write ;
	rdfs:label "Write Triples in LSR for C1 - Simulate Appointment" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:targetBase ajan:LocalServicesKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
			PREFIX owl: <http://www.w3.org/2002/07/owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
                    CONSTRUCT {
                        ?s ?p ?o .
						<http://mycontext1> <http://www.ajan.de/behavior/bt-ns#rdfContext> <file://C:/fakepath/SimulatePhoneAppointmentService.owl> .
                    }

                        WHERE { GRAPH <file://C:/fakepath/SimulatePhoneAppointmentService.owl> {?s ?p ?o .} } """^^xsd:string ;
	] .

:WriteTriplesLSRC2
	a bt:Write ;
	rdfs:label "Write Triples in LSR for C2 - CreateCV" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:targetBase ajan:LocalServicesKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
			PREFIX owl: <http://www.w3.org/2002/07/owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
            CONSTRUCT {
                        ?s ?p ?o .
            <http://mycontext2> <http://www.ajan.de/behavior/bt-ns#rdfContext> <file://C:/fakepath/CreateCV.owl> .
            }

             WHERE { GRAPH <file://C:/fakepath/CreateCV.owl> {?s ?p ?o .} } """^^xsd:string ;
	] .

:WriteTriplesLSRC3
	a bt:Write ;
	rdfs:label "Write Triples in LSR for C3 - Schooling" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:targetBase ajan:LocalServicesKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
			PREFIX owl: <http://www.w3.org/2002/07/owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
            CONSTRUCT {
                        ?s ?p ?o .
            <http://mycontext3> <http://www.ajan.de/behavior/bt-ns#rdfContext> <file://C:/fakepath/SchoolingCARITAS.owl> .
            }
			WHERE { GRAPH <file://C:/fakepath/SchoolingCARITAS.owl> {?s ?p ?o .} } """^^xsd:string ;
	] .
	
:UpdateLSRExecutionKnowledge
	a bt:Update ;
	rdfs:label "Update: LSR in Execution Knowledge" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 	
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
			PREFIX owl: <http://www.w3.org/2002/07/owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			DELETE {
				?s ?p ?o .
			}WHERE {
				?s ?p ?o .
			}"""^^xsd:string ;
		]) .
		
:EventHandlerReceiveLocalAgents
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Receive Local Agents" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#ReceiveLocalAgentsEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>	
						CONSTRUCT {
							?s ?p ?o .
						}
						WHERE {
							?s ?p ?o .
						}"""^^xsd:string ;
				] .
				
:RemoveLARContent
	a bt:Update ;
	rdfs:label "Update: Remove LAR Content" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:LocalAgentsKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					DELETE {
						?s ?o ?p .
					}
					WHERE {
						?s ?o ?p .
					}					
					"""^^xsd:string ;
		]) .

:UpdateLARAgentKnowledge
	a bt:Update ;
	rdfs:label "Delete LAR Agent Knowledge" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
				PREFIX ajan: <http://www.ajan.de/ajan-ns#>
				DELETE {
					?agent welcome:knowsLocalAgents ?repoName .	
				}
				INSERT {
					?agent welcome:needsPopulateLAR "localRepo" .
				}				
				WHERE {
					?agent rdf:type ajan:Agent .
				}"""^^xsd:string ;
		]) .

:WriteTriplesLAR
	a bt:Write ;
	rdfs:label "Write Triples in LAR" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:targetBase ajan:LocalAgentsKnowledge ;
		bt:sparql """
			PREFIX ajan: <http://www.ajan.de/ajan-ns#>
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			CONSTRUCT { 
				?s ?p ?o .
				?s rdf:type ajan:Agent .
			} WHERE  {
				?s ?p ?o .
				?s rdf:type ajan:Agent .
			}"""^^xsd:string ;
	] .
	
:UpdateAgentKnowsLAR
	a bt:Update ;
	rdfs:label "Update: Agent Knows LAR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					DELETE {
						welcome:myWelcomeAgent welcome:needsPopulateLAR "localRepo" .
					}
					INSERT {
						?agent welcome:knowsLocalAgents ajan:LocalAgentsKnowledge .	
					}
					 WHERE {
						?agent rdf:type ajan:Agent .
					}					
					"""^^xsd:string ;
		]) .
		
:UpdateLARExecutionKnowledge
	a bt:Update ;
	rdfs:label "Update: LAR in Execution Knowledge" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>	
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 					
					DELETE {
						?s ?p ?o .
						?s rdf:type ajan:Agent.
					} WHERE { 						
						?s ?p ?o .
						?s rdf:type ajan:Agent .
						
					}"""^^xsd:string ;
		]) .
		
#=============================================================================================
# HandshakeBT

:EventHandlerHandshake
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Handshake" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#ReceiveHandshakeEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
						CONSTRUCT {
							?sub rdf:type welcome:Handshaking .
						}
						WHERE { 
							?sub rdf:type welcome:Handshaking .
							?s ?p ?o .
						} """^^xsd:string ;
				] .

:UpdateCreateHeaderAppMessage
	a bt:Update ;
	rdfs:label "Update: Header Message for App" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE{
						?headerSubject welcome:hasHeaderValue ?typeval .
						?headerValSubject welcome:hasHeaderValue ?typeHeaderval .
					}
					INSERT {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?id .					
						welcome:headerMsgType welcome:hasHeaderName "X-Msg-Type" .
						welcome:headerMsgType welcome:hasHeaderValue "DisplayUI " .
					} 
					WHERE { 
						?du rdf:type welcome:DialogueUser .
						?msg welcome:hasCorrelationID ?correlationID .
						?du welcome:hasUserId ?idObject .
						?idObject welcome:hasValue ?id .
						OPTIONAL {?headerSubject welcome:hasHeaderValue ?typeval .}
						OPTIONAL {?headerValSubject welcome:hasHeaderValue ?typeHeaderval .}
					}
					"""^^xsd:string ;
		]) .
		
:MessageSendAgentReadiness
	a myWelcome:Message ;
	rdfs:label "Message: Send Agent Readiness to App - Handshake"^^xsd:string ;
	rdfs:comment "Message: Send Agent Readiness to App - Handshake"^^xsd:string ;
	bt:targetBase ajan:AgentKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
					
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle" 
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:AgentKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							?agent welcome:hasMessage "is ready" .
						}
						WHERE {
							?agent rdf:type ajan:Agent .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/handshake") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:DeleteHeaderDispatcherMessageinLAKR
	a bt:Update ;
	rdfs:label "Update: Delete Header Dispatcher Message in LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?userID .						
					} 
					WHERE { 
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?userID .
					}
					"""^^xsd:string ;
		]) .
	
#=============================================================================================
# ProcessSpeechActsBehavior

:EventSpeaktoavatar
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Speak to Avatar" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#SpeakAvatarEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
						CONSTRUCT {						    
							welcome:TCN_SpeakToAvatar rdf:type welcome:speakToAvatar .
						}
						WHERE { 
							welcome:TCN_SpeakToAvatar rdf:type welcome:speakToAvatar .
						}"""^^xsd:string ;
				] .

:WriteAgentNameinExecution
	a bt:Write ;
	rdfs:label "Write: Agent Name in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 	
			PREFIX ajan: <http://www.ajan.de/ajan-ns#>
			CONSTRUCT  {
				?agentName rdf:type ajan:Agent .
			}
			WHERE { 
				?agentName rdf:type ajan:Agent .
			} """^^xsd:string ;
	] .
	
:UpdateCreateOpeningDIPPart1
	a bt:Update ;
	rdfs:label "Update: Create Opening DIP 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 					
					INSERT {
						welcome:Opening rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .	
						welcome:Opening welcome:hasDIPStatus welcome:Unknown .
						welcome:Opening welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:Opening welcome:hasSlot welcome:confirmCommunication .
						welcome:confirmCommunication rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI .
						welcome:confirmCommunication welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:confirmCommunication welcome:hasTemplateId "TConfirmCommunication"^^xsd:string .
						welcome:confirmCommunication welcome:hasInputRDFContents welcome:Unknown .
						welcome:confirmCommunication welcome:hasTCNAnswer welcome:Unknown .
						welcome:confirmCommunication welcome:hasStatus welcome:Pending .
						welcome:confirmCommunication welcome:hasNumberAttempts 0 .
						welcome:confirmCommunication welcome:confidenceScore "0.0"^^xsd:float .
						welcome:confirmCommunication welcome:isOptional "false"^^xsd:boolean .
					} 
					WHERE { 
						?agentName rdf:type ajan:Agent .
					}
					"""^^xsd:string ;
		]) .

:UpdateCreateOpeningDIPPart2
	a bt:Update ;
	rdfs:label "Update: Create Opening DIP Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					INSERT {
						welcome:Opening welcome:hasSlot welcome:confirmLanguage .
						welcome:confirmLanguage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI .
						welcome:confirmLanguage	welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Language"^^xsd:anyURI .
						welcome:confirmLanguage welcome:hasTemplateId "TConfirmLanguage"^^xsd:string .
						welcome:confirmLanguage	welcome:hasInputRDFContents welcome:Unknown .
						welcome:confirmLanguage welcome:hasTCNAnswer welcome:Unknown .
						welcome:confirmLanguage	welcome:hasStatus welcome:Pending .
						welcome:confirmLanguage	welcome:hasNumberAttempts 0 .
						welcome:confirmLanguage	welcome:confidenceScore "0.0"^^xsd:float .
						welcome:confirmLanguage	welcome:isOptional "false"^^xsd:boolean .			
					} 
					WHERE { 
						?agentName rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateOpeningDIPPart3
	a bt:Update ;
	rdfs:label "Update: Create Opening DIP Part 3" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					INSERT {
						welcome:Opening welcome:hasSlot welcome:obtainRequest .
						welcome:obtainRequest rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI .
						welcome:obtainRequest welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#ServiceRequest"^^xsd:anyURI .
						welcome:obtainRequest welcome:hasTemplateId "TObtainMatterConcern"^^xsd:string .
						welcome:obtainRequest welcome:hasStatus welcome:Completed .
						welcome:obtainRequest welcome:hasNumberAttempts 0 .
						welcome:obtainRequest welcome:confidenceScore "0.0"^^xsd:float .	
						welcome:obtainRequest welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainRequest welcome:hasTCNAnswer welcome:Unknown .
						welcome:obtainRequest welcome:isOptional "false"^^xsd:boolean .					
					} 
					WHERE { 
						?agentName rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateHeaderKMSMessage
	a bt:Update ;
	rdfs:label "Update: Header KMS Message" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue . 						
					} 
					INSERT {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .	
					} 
					WHERE { 						
						?msg welcome:hasCorrelationID ?correlationID .
						OPTIONAL {?headerName welcome:hasHeaderName ?hdrName . }
						OPTIONAL {?headerName welcome:hasHeaderValue ?fieldValue . }					
					}
					"""^^xsd:string ;
		]) .
		
:SendDIPtoKMS
	a myWelcome:Message ;
	rdfs:label "Message: Send DIP to KMS"^^xsd:string ;
	rdfs:comment "Message: Send DIP to KMS"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle;charset=UTF-8" 
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "text/plain"
				]
		) ;	
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .	
							?dip welcome:hasDIPStatus ?status .
							?dip welcome:isCurrentDIP ?isCurrentValue .
							?dip welcome:belongsTo ?someService . 
							?dip welcome:hasSlot ?slotDIP .
							?slotDIP rdf:type ?slotType .
							?slotDIP welcome:hasOntologyType ?slotOntoType .
							?slotDIP welcome:hasInputRDFContents ?slotRDFContents .
							?slotRDFContents ?reifiRDFContentsPred ?reifiRDFContentsObj .
							?slotDIP welcome:hasStatus ?slotStatus .
							?slotDIP welcome:hasNumberAttempts ?NbAttempts .
							?slotDIP welcome:confidenceScore ?confScore .
							?slotDIP welcome:isOptional ?opt .
							?slotDIP welcome:dependsOn ?dependency .
							?slotDIP welcome:associatedWith ?association .
							?slotDIP welcome:hasTemplateId ?templateID .
							?slotDIP welcome:hasTCNAnswer welcome:Unknown .
						}
						WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .	
							?dip welcome:hasDIPStatus ?status .
							?dip welcome:isCurrentDIP ?isCurrentValue .
							OPTIONAL { ?dip welcome:belongsTo ?someService . }
							?dip welcome:hasSlot ?slotDIP .
							?slotDIP rdf:type ?slotType .
							?slotDIP welcome:hasOntologyType ?slotOntoType .
							?slotDIP welcome:hasInputRDFContents ?slotRDFContents .
							OPTIONAL { ?slotRDFContents ?reifiRDFContentsPred ?reifiRDFContentsObj .}
							?slotDIP welcome:hasStatus ?slotStatus .
							?slotDIP welcome:hasNumberAttempts ?NbAttempts .
							?slotDIP welcome:confidenceScore ?confScore .
							?slotDIP welcome:isOptional ?opt .
							OPTIONAL { ?slotDIP welcome:hasTemplateId ?templateID . }
							OPTIONAL {?slotDIP welcome:hasTCNAnswer ?tcnAnswer .}
							OPTIONAL {?slotDIP welcome:dependsOn ?dependency .}
						    OPTIONAL {?slotDIP welcome:associatedWith ?association .}
						}"""^^xsd:string
			]
		] ;    
	] ;
	bt:queryUri [
		a bt:SelectQuery ;
		a bt:QueryUri ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					SELECT ?requestURI
					WHERE {
					  welcome:KMS welcome:hasURI ?requestURI .
					}"""^^xsd:string
	] .
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/kms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:EventDIP_OR_ServiceRequest
	a bt:HandleEvent ;
	rdfs:label "EventHandler: DIP OR Service Request" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#EventDIPORServiceRequest> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
						CONSTRUCT {								
							?dip welcome:hasNamedGraph ?dipGraph .
							welcome:BT welcome:hasActiveDIP ?dipId .					
						}
						WHERE { 
								?dip welcome:hasNamedGraph ?dipGraph .
								?dip welcome:DIPId ?dipId .
						}"""^^xsd:string ;
				] .

:WriteActiveDIPinExecution
	a bt:Write ;
	rdfs:label "Write: Active DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 		
			CONSTRUCT  {
				?bt welcome:hasActiveDIP ?dipId . 
				?dip welcome:hasNamedGraph ?dipGraph .
				?s ?p ?o .
			}
			WHERE { 
				?bt welcome:hasActiveDIP ?dipId . 
				?dip welcome:hasNamedGraph ?dipGraph .
				{	GRAPH ?dipGraph {?s ?p ?o . }}
			} """^^xsd:string ;
	] .

:ConditionDIPIncomplete
	a bt:Condition ;
	rdfs:label "Condition: DIP Incomplete?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>					
					PREFIX fn: <http://www.w3.org/2005/xpath-functions#>
					ASK
					WHERE { 
							{
								?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								?dip welcome:hasSlot ?slot .
								?dip welcome:DIPId ?id .
								?slot welcome:hasStatus ?status .
								?slot welcome:hasNumberAttempts ?NbAtt .
							}
							FILTER (regex(str(?status), "Pending") || regex(str(?status), "FailedAnalysis") || regex(str(?status), "PendingAgreement") || regex(str(?status), "TCNElaborateRequest") || regex(str(?status), "TCNClarifyRequest") || regex(str(?status), "TopicSwitch") || regex(str(?status), "UnclearAnalysis"))
					}"""^^xsd:string ;
		]) .

:UpdateIncompleteDIP
	a bt:Update ;
	rdfs:label "Update: DIP Incomplete" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					DELETE {
						?dip welcome:hasDIPStatus ?statusDIP .	
					} INSERT {
						?dip welcome:hasDIPStatus welcome:Incomplete .
					}
					WHERE {
						?dip welcome:hasNamedGraph ?dipGraph .
						welcome:BT welcome:hasActiveDIP ?dipId .
						GRAPH ?dipGraph {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							OPTIONAL { ?dip welcome:hasDIPStatus ?status . }
							?dip welcome:DIPId ?dipId .
						}					
					}"""^^xsd:string ;
		]) .

:EventProducerSpecificBTDIPIncomplete
	a bt:EventProducer ;
	rdfs:label "EventProducer: Trigger Specific BT - Incomplete DIP" ;
	ajan:event agents:SpecificBTEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:execute "IncompleteDIP" .							
						}
						WHERE {
							?s rdf:type ajan:Agent .
						}"""^^xsd:string ;
				] .	
				
:ConditionDIPCompleteOrUndefinedOrUnfinished
	a bt:Condition ;
	rdfs:label "Condition: DIP Complete or Undefined or Unfinished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>					
					PREFIX fn: <http://www.w3.org/2005/xpath-functions#>
					ASK
					WHERE { 
							{
								{
									?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
									?dip welcome:hasSlot ?slot .
									?dip welcome:DIPId ?id .
									?slot welcome:hasStatus ?status .
									?slot welcome:hasNumberAttempts ?NbAtt .
								}
								FILTER (
									  !regex(str(?status), "Pending") && 
									  !regex(str(?status), "FailedAnalysis") && 
									  !regex(str(?status), "PendingAgreement") && 
									  !regex(str(?status), "TCNElaborateRequest") && 
									  !regex(str(?status), "TCNClarifyRequest") && 
									  !regex(str(?status), "TopicSwitch") && 
									  !regex(str(?status), "UnclearAnalysis")
								)
							}
							UNION
							{
								?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								?dipName welcome:DIPId ?id .
								?dipName welcome:hasSlot ?mandatorySlotName.
								?mandatorySlotName welcome:hasStatus welcome:Undefined .
							}
							UNION
							{
								?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								?dipName welcome:DIPId ?id .
								?dipName welcome:hasSlot ?unfinishedSlotName.
								?unfinishedSlotName welcome:hasStatus welcome:Unfinished .
							}
					}"""^^xsd:string ;
		]) .

:UpdateCompleteDIP
	a bt:Update ;
	rdfs:label "Update: DIP Complete" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					DELETE { 
						?dip welcome:hasDIPStatus ?status . 
					} INSERT {
						?dip welcome:hasDIPStatus welcome:Complete .
					}
					WHERE {		
							?dip welcome:hasNamedGraph ?dipGraph .
							welcome:BT welcome:hasActiveDIP ?dipId .
							GRAPH ?dipGraph {
								?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								OPTIONAL {?dip welcome:hasDIPStatus ?status }.
								?dip welcome:DIPId ?dipId .
							}
					}"""^^xsd:string ;
		]) .

:ConditionDIPIsNotOpening
	a bt:Condition ;
	rdfs:label "Condition: Active DIP is not Opening?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					ASK
					WHERE { 
						?dip welcome:hasNamedGraph ?dipGraph .
						?dip welcome:DIPId ?id .  
						?stg welcome:hasActiveDIP ?id . 
						?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						FILTER (
							!(  STRENDS(str(?dip), "#Opening") ||
							    STRENDS(str(?dip), ":Opening") )
						) 
						
					} """^^xsd:string ;
		]) .
		
:EventProducerSpecificBTDIPComplete
	a bt:EventProducer ;
	rdfs:label "EventProducer: Trigger Specific BT - Complete DIP" ;
	ajan:event agents:SpecificBTEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:execute "CompleteDIP" .
						}
						WHERE {
							?s rdf:type ajan:Agent .
						}"""^^xsd:string ;
				] .	

:ConditionalNoServiceRequest
	a bt:Condition ;
	rdfs:label "Condition: No Service Request?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					ASK 
					WHERE { 
							?dip welcome:hasNamedGraph ?dipGraph .
							GRAPH ?dipGraph 
							{
								FILTER NOT EXISTS {
													?container rdf:type welcome:SpeechActContainer .
													?container welcome:hasSpeechActType welcome:Commit .
												  }
							}							
					}"""^^xsd:string ;
		]) .

:CreateClosingUponFailureNoRequest_Part1
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - No Service Request or No SSC output - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailure rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ClosingUponFailure welcome:hasDIPStatus welcome:Unknown .
						welcome:ClosingUponFailure welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailure welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string .
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReasonSTReasonNoFoundService .
						welcome:informMessage welcome:hasStatus welcome:Pending .
						welcome:informMessage welcome:hasNumberAttempts 0 .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .						
					} WHERE { 
						?s rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:CreateClosingUponFailureNoRequest_Part2
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - No Service Request or No SSC output - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .
						welcome:informMessage welcome:dependsOn welcome:Unknown .
						welcome:informMessage welcome:associatedWith welcome:Unknown .
						welcome:reifiedReasonSTReasonNoFoundService rdf:type rdf:Statement .
						welcome:reifiedReasonSTReasonNoFoundService rdf:subject welcome:subTemplate .
						welcome:reifiedReasonSTReasonNoFoundService rdf:predicate welcome:isReason .
						welcome:reifiedReasonSTReasonNoFoundService rdf:object "STReasonNoFoundService"^^xsd:string .
					} WHERE { 
						?s rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:ConditionServiceRequest
	a bt:Condition ;
	rdfs:label "Condition: Commit exists?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					ASK 
					WHERE { 
							?dip welcome:hasNamedGraph ?dipGraph .
							GRAPH ?dipGraph 
							{
								?container rdf:type welcome:SpeechActContainer .
								?container welcome:hasSpeechActType welcome:Commit .
							}							
					}"""^^xsd:string ;
		]) .

:DeletePreviousServiceRequestinExecution
	a bt:Update ;
	rdfs:label "Update: Delete Previous Service Request from Execution" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE {
							?container rdf:type welcome:SpeechActContainer .
							?container welcome:hasSpeechActType welcome:Commit .
							?container welcome:hasSpeechActObject ?o .
							?o rdf:type service:Service . 
							?o service:presents ?profile .
							?profile ?relprofile ?objprof .
					} WHERE { 
							?container rdf:type welcome:SpeechActContainer .
							?container welcome:hasSpeechActType welcome:Commit .
							?container welcome:hasSpeechActObject ?o .
							?o rdf:type service:Service . 
							?o service:presents ?profile .
							?profile ?relprofile ?objprof .
					}"""^^xsd:string ;
		]) .
		
:WriteServiceRequestinExecution
	a bt:Write ;
	rdfs:label "Write: Service Request in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#> 
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
			CONSTRUCT  {
					?container rdf:type welcome:SpeechActContainer .
					?container welcome:hasSpeechActType welcome:Commit .
					?container welcome:hasSpeechActObject ?o .
					?o rdf:type service:Service . 
					?o service:presents ?profile .
					?profile ?relprofile ?objprof .	
			}
			WHERE { 
				?bt welcome:hasActiveDIP ?dipId . 
				?dip welcome:hasNamedGraph ?dipGraph .
				GRAPH ?dipGraph { 
					?container rdf:type welcome:SpeechActContainer .
					?container welcome:hasSpeechActType welcome:Commit .
					?container welcome:hasSpeechActObject ?o .
					?o rdf:type service:Service . 
					?o service:presents ?profile .
					?profile ?relprofile ?objprof .	
				}
			}"""^^xsd:string ;
	] .

:InvokeMatchmaker
	a ssc:ServiceComputing ;
	rdfs:label "SSC Plugin: Matchmaker" ;
	ssc:serviceRequest [
				a bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:targetBase ajan:LocalServicesKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
						PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 	
						PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>						
						CONSTRUCT {
							?o rdf:type service:Service . 
							?o service:presents ?profile .
							?profile ?relprofile ?objprof .
						}
						WHERE { 
							?s rdf:type welcome:SpeechActContainer .
							?s welcome:hasSpeechActType welcome:Commit .
							?s welcome:hasSpeechActObject ?o .
							?o rdf:type service:Service . 
							?o service:presents ?profile .
							?profile ?relprofile ?objprof .							
						}"""^^xsd:string ;
			] ;
	ssc:serviceOffer [
				a bt:SelectQuery ;
				bt:originBase ajan:LocalServicesKnowledge ;
				bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					SELECT ?s ?o ?p ?g
					WHERE {
						{ GRAPH ?g { ?s ?o ?p } }
					}"""^^xsd:string ;
			] ;
	ssc:filterModel "text-similarity.filter"^^xsd:string .

:ConditionMatchmakerOutput
	a bt:Condition ;
	rdfs:label "Condition: MatchmakerOutput?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					ASK
					WHERE {
						?ssc ssc:hasResultOffer ?MatchmakerOffer .
						FILTER NOT EXISTS {?ssc ssc:hasResultOffer welcome:Unknown .}
					}"""^^xsd:string ;
		]) .
		
:PDDL2SPARQLPlugin
	a ssc:PDDL2SPARQL ;
	rdfs:label "PDDL2SPARQL Plugin: Map Precondition" ;
	ssc:servicePrecondition [
				a bt:ConstructQuery ;
				bt:originBase ajan:LocalServicesKnowledge ;
				bt:targetBase ajan:AgentKnowledge ;
				bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>	
					PREFIX pddlexpr: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/PDDLExpression.owl#>	
					PREFIX expr: <http://www.daml.org/services/owl-s/1.1/generic/Expression.owl#>
					CONSTRUCT {
						?MatchmakerOffer welcome:hasPrecondition ?precondition .
					}
					WHERE { 
						?ssc ssc:hasResultOffer ?MatchmakerOffer .
						GRAPH ?g {
							?MatchmakerOffer service:describedBy ?process .
							?process process:hasPrecondition ?precondClass .
							?precondClass expr:expressionBody ?precondition .
						}
					}"""^^xsd:string ;
			] .

:ConditionPreconditionHolds
	a bt:Condition ;
	rdfs:label "Condition: Precondition holds?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					ASK
					WHERE {
						?query welcome:hasPreconditionResult "true"^^<http://www.w3.org/2001/XMLSchema#boolean> .	
					}"""^^xsd:string ;
		]) .

:ConditionAtomicService	
	a bt:Condition ;
	rdfs:label "Condition: Atomic Service?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					ASK
					WHERE {
						?ssc ssc:hasResultOffer ?MatchmakerOffer .
						?MatchmakerOffer rdf:type service:Service .
						?MatchmakerOffer service:describedBy ?process .
						?process rdf:type process:AtomicProcess .
					}"""^^xsd:string ;
		]) .

:CreateAtomicServiceDIP
	a bt:Write ;
	rdfs:label "Write: Create DIP from Atomic" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:AgentKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						?dipName welcome:belongsTo ?matchmakerOffer .
						?dipName welcome:isCurrentDIP "true"^^xsd:boolean .
						?dipName welcome:hasDIPStatus welcome:Unknown .
						?dipName welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						?ssc ssc:hasResultOffer ?matchmakerOffer .
						?matchmakerOffer rdf:type service:Service .
						?service service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP ?dipName .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionComposedService
	a bt:Condition ;
	rdfs:label "Condition: Composed Service?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					ASK
					WHERE {
						?ssc ssc:hasResultOffer ?MatchmakerOffer .
						?MatchmakerOffer rdf:type service:Service .
						?MatchmakerOffer service:describedBy ?process .
						?process rdf:type process:CompositeProcess .
					}"""^^xsd:string ;
		]) .

:CreateComposedServiceDIP
	a bt:Write ;
	rdfs:label "Write: Create DIP from Composite" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:AgentKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						?atomicProcess rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						?atomicProcess welcome:belongsTo ?matchmakerOffer .
						?atomicProcess welcome:isCurrentDIP "true"^^xsd:boolean .
						?atomicProcess welcome:hasDIPStatus welcome:Unknown .
						?atomicProcess welcome:hasSlot ?inputAtomic .
						?inputAtomic rdf:type ?slotType .
						?inputAtomic welcome:hasOntologyType ?paramTypeInput .
						?inputAtomic welcome:hasTemplateId ?templateInput .
						?inputAtomic welcome:isOptional ?optionalOutput .
						?inputAtomic welcome:hasInputRDFContents welcome:Unknown .
						?inputAtomic welcome:hasTCNAnswer welcome:Unknown .
						?inputAtomic welcome:hasStatus welcome:Pending .
						?inputAtomic welcome:dependsOn ?dependency .
						?inputAtomic welcome:associatedWith ?association .
						?inputAtomic welcome:hasNumberAttempts 0 .
						?inputAtomic welcome:confidenceScore "0.0"^^xsd:float .	
			}
			WHERE { 
					{?ssc ssc:hasResultOffer ?matchmakerOffer .
					?matchmakerOffer service:describedBy ?Compositeprocess . 
					?Compositeprocess process:hasInput ?inputComposite .
					?perform process:process ?atomicProcess .
					?atomicProcess rdf:type process:AtomicProcess .	
					?atomicProcess process:hasInput ?inputAtomic .
					?inputAtomic rdf:type process:Input .					
					?perform process:hasDataFrom ?inputBinding .
					?inputBinding rdf:type process:InputBinding .
					?inputAtomic process:parameterType ?paramTypeInput .
					?inputAtomic welcome:hasSlotType ?slotType .										
					OPTIONAL { 
						?inputAtomic welcome:hasTemplateId ?templateInput .
					}
					?inputAtomic welcome:isOptional ?optionalOutput .					
					?inputBinding process:toParam ?inputAtomic .
					?inputBinding process:valueSource ?valOf .
					?valOf rdf:type process:ValueOf .
					?valOf process:theVar ?inputComposite .
					OPTIONAL {?inputAtomic welcome:dependsOn ?val}
					OPTIONAL {?inputAtomic welcome:associatedWith ?asso}
					BIND(IF(EXISTS{?inputAtomic welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
					BIND(IF(EXISTS{?inputAtomic welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association). 
					}					
			}"""^^xsd:string ;
	] .

:DeleteSSCResultinAgentKB
	a bt:Update ;
	rdfs:label "Update: Delete SSC Result in Agent KB" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>		
					DELETE {
						?sscSubj ssc:hasResultOffer ?MatchmakerOffer .
						?MatchmakerOffer ssc:hasServiceName ?servName .	
					}
					WHERE {		
						OPTIONAL {
							?sscSubj ssc:hasResultOffer ?MatchmakerOffer .
							?MatchmakerOffer ssc:hasServiceName ?servName .
						}
					}"""^^xsd:string ;
		]) .
		
:WriteSSCResultinAgentKB
	a bt:Write ;
	rdfs:label "Write: SSC Result in Agent KB" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:AgentKnowledge ;
		bt:sparql """
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>	
			PREFIX profile: <http://www.daml.org/services/owl-s/1.1/Profile.owl#>
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			CONSTRUCT { 
				?sscSubj ssc:hasResultOffer ?MatchmakerOffer .
				?MatchmakerOffer ssc:hasServiceName ?servName .				
			} WHERE  {
				?sscSubj ssc:hasResultOffer ?MatchmakerOffer .
				?MatchmakerOffer rdf:type service:Service .
				?MatchmakerOffer service:presents ?profile .
				?profile profile:serviceName ?servName .
			}"""^^xsd:string ;
	] .

:EventProducerFirstInteractionMove
	a bt:EventProducer ;
	rdfs:label "EventProducer: Trigger First Interaction Move" ;
	ajan:event agents:FirstInteractionBTEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:hasFirstMove "ServiceInteraction" .
						}
						WHERE {
							?s rdf:type ajan:Agent . 
						}"""^^xsd:string ;
				] .	

:EventProducerAlternativeFirstInteractionMove
	a bt:EventProducer ;
	rdfs:label "EventProducer: Trigger Alternative First Interaction Move" ;
	ajan:event agents:FirstInteractionBTEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:hasFirstMove "FirstAlternativeMove" .
						}
						WHERE {
							?s rdf:type ajan:Agent .
						}"""^^xsd:string ;
				] .	

:InvokePlanner
	a ssc:ServiceComputing ;
	rdfs:label "SSC Plugin: Planner" ;
	ssc:domainDefinition [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
				CONSTRUCT {
						?s welcome:hasPDDLDomain ?p .
				}
				WHERE { 
						?s welcome:hasPDDLDomain ?p .
				} """^^xsd:string ;
	] ;
	ssc:problemInit [
		a bt:ConstructQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
					CONSTRUCT {
						?o welcome:hasInitState ?goal .
					}
					WHERE { 
						?s rdf:type welcome:SpeechActContainer .
						?s welcome:hasSpeechActType welcome:Commit .
						?s welcome:hasSpeechActObject ?o .
						?o welcome:hasInitState ?initialState .
					} """^^xsd:string ;
		] ;	
	ssc:problemGoal [
		a bt:ConstructQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
				CONSTRUCT {
					?o welcome:hasGoalState ?goal .
				}
				WHERE { 
					?s rdf:type welcome:SpeechActContainer .
					?s welcome:hasSpeechActType welcome:Commit .
					?s welcome:hasSpeechActObject ?o .
					?o welcome:hasGoalState?initialState .
				} """^^xsd:string ;
	] .	

:ConditionPlannerOutput
	a bt:Condition ;
	rdfs:label "Condition: PlannerOutput?" ;
	bt:query ( [
		a bt:AskQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					ASK
					WHERE {
						?ssc ssc:hasComposedService ?compositeService .	
					}"""^^xsd:string ;
		]) .
		
#:SendPlanDIPKMS
#	a bt:Action ;
#   rdfs:label "Action: Send Service Plan to KMS" ;
#   bt:inputs ( [
#		a bt:Input ;
#		a bt:ConstructQuery ;
#       bt:originBase ajan:AgentKnowledge ;
#        bt:sparql """
#				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				"""^^xsd:string ;
#		]) ;
#		bt:definition services:SendPreconditionServices .
		
:EventDefaultStatementNoOpinion
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Default Statement Non Opinion" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#EventStatementNonOpinion> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 						
						CONSTRUCT {						    
							?s rdf:type welcome:SpeechActContainer .
							?s welcome:hasSpeechActType welcome:Statement-non-opinion .
						}
						WHERE { 
							?s rdf:type welcome:SpeechActContainer .
							?s welcome:hasSpeechActType welcome:Statement-non-opinion .
						}"""^^xsd:string ;
				] .

:DeleteActiveDIPinAgentKB
	a bt:Update ;
	rdfs:label "Update: Remove Active DIPs in LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE {
						?bt welcome:hasActiveDIP ?id .	
						?dip welcome:hasNamedGraph ?dipGraph .
					}
					 WHERE {
						OPTIONAL { ?bt welcome:hasActiveDIP ?id .}	
						OPTIONAL { ?dip welcome:hasNamedGraph ?dipGraph .}					
					}"""^^xsd:string ;
		]) .
		
:CreateClosingUponFailureInternalErrorPart1
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - Internal Error Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailure rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ClosingUponFailure welcome:hasDIPStatus welcome:Unknown .
						welcome:ClosingUponFailure welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailure welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string . 						
						welcome:informMessage welcome:hasStatus welcome:Pending .	
						welcome:informMessage welcome:dependsOn welcome:Unknown .
						welcome:informMessage welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?a rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:CreateClosingUponFailureInternalErrorPart2
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - Internal Error Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:informMessage welcome:hasNumberAttempts 0 .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .	
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReasonSTReasonInternalFailure .
						welcome:reifiedReasonSTReasonInternalFailure rdf:type rdf:Statement .
						welcome:reifiedReasonSTReasonInternalFailure rdf:subject welcome:subTemplate .
						welcome:reifiedReasonSTReasonInternalFailure rdf:predicate welcome:isReason .
						welcome:reifiedReasonSTReasonInternalFailure rdf:object "STReasonInternalFailure"^^xsd:string .
					} WHERE { 
						?a rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

#=============================================================================================
#GenericInteractionCARITAScenarioBT

:EventHandlerFirstInteractionMove
	a bt:HandleEvent ;
	rdfs:label "EventHandler: First Scenario Specific Interaction Move" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#FirstInteractionBTEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 					
						PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>	
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:hasFirstMove ?val .
						}
						WHERE { 
							welcome:myWelcomeAgent welcome:hasFirstMove ?val .					
						}"""^^xsd:string ;
				] .

:DeletePrecondition
	a bt:Update ;
	rdfs:label "Update: Delete Service Precondition Result in LAKR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					DELETE {
						?MatchmakerOffer welcome:hasPrecondition ?precondition .
						?query welcome:hasPreconditionResult ?preconVal .	
					}
					 WHERE {
						?s ?p ?o .
						OPTIONAL { ?MatchmakerOffer welcome:hasPrecondition ?precondition .}
						OPTIONAL { ?query welcome:hasPreconditionResult ?preconVal .}
					}					
					"""^^xsd:string ;
		]) .

:DeleteSSCResultinLSR
	a bt:Update ;
	rdfs:label "Update: Delete SSC Result in LSR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>	
					DELETE {
						?sscSubj ssc:hasResultOffer ?MatchmakerOffer .
					}
					WHERE {		
						?sscSubj ssc:hasResultOffer ?MatchmakerOffer .
					}"""^^xsd:string ;
		]) .

:ConditionServiceFirstInteraction
	a bt:Condition ;
	rdfs:label "Condition: First Move of a Found Service?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					ASK
					WHERE { 
							welcome:myWelcomeAgent welcome:hasFirstMove "ServiceInteraction".							
					}"""^^xsd:string ;
		]) .

:ConditionFirstMoveSimulateAppointment
	a bt:Condition ;
	rdfs:label "Condition: First Move for Simulate Appointment BT?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					ASK
					WHERE { 
							?sscSubj ssc:hasResultOffer simulateAppointment:SimulatePhoneAppointmentService .
					}"""^^xsd:string ;
		]) .
		
:WriteScenarioIntroductionDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Scenario Introduction DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:ScenarioIntroduction welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:ScenarioIntroduction welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:ScenarioIntroduction welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:ScenarioIntroduction welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:ScenarioIntroduction .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
			}"""^^xsd:string ;
	] .

:ConditionFirstMoveCVCreation
	a bt:Condition ;
	rdfs:label "Condition: First Move for CV Creation BT?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE { 
							?sscSubj ssc:hasResultOffer employment:createCV .
					}"""^^xsd:string ;
		]) .

:WriteCVPurposeDIP2Execution
	a bt:Write ;
	rdfs:label "Write: CV Purpose DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:CVPurpose rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:CVPurpose welcome:belongsTo employment:createCV .
						employment:CVPurpose welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:CVPurpose welcome:hasDIPStatus welcome:Unknown .
						employment:CVPurpose welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:CVPurpose .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .	

:ConditionExistingIncompleteCV
	a bt:Condition ;
	rdfs:label "Condition: TCN Already has an Incomplete CV ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
					PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					ASK
					WHERE { 
							welcome:tcn_user welcome:hasCVStatus ?cvStatus .
							?cvStatus rdf:type welcome:CVStatus .
							?cvStatus welcome:hasValue "Incomplete" .
					}"""^^xsd:string ;
		]) .
		
:UpdateCVPurpose_ExistingIncompleteDIP2Execution
	a bt:Update ;
	rdfs:label "Update: Incomplete CV Template" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE {
						employment:informServicePurpose welcome:hasTemplateId ?templateServicePurpose .						
						employment:informDisclaimerCVModification welcome:hasTemplateId ?templateDisclaimerCV .
						employment:obtainCVCreationInterest welcome:hasTemplateId ?templateCVCreationInterest .
					}
					INSERT { 
						employment:informServicePurpose welcome:hasTemplateId "TInformServicePurpose_CV"^^xsd:string . 
						employment:informDisclaimerCVModification welcome:hasTemplateId "TInformDisclaimerCVModification_CV"^^xsd:string .
						employment:obtainCVCreationInterest welcome:hasTemplateId "TObtainCVContinueInterest"^^xsd:string .
					}
					WHERE {		
						employment:CVPurpose rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:CVPurpose welcome:hasSlot employment:informServicePurpose .
						employment:CVPurpose welcome:hasSlot employment:informDisclaimerCVModification .
						employment:CVPurpose welcome:hasSlot employment:obtainCVCreationInterest .
						employment:informServicePurpose welcome:hasTemplateId ?templateServicePurpose .						
						employment:informDisclaimerCVModification welcome:hasTemplateId ?templateDisclaimerCV .
						employment:obtainCVCreationInterest welcome:hasTemplateId ?templateCVCreationInterest .
					}"""^^xsd:string ;
		]) .
		
:ConditionExistingCompleteCV
	a bt:Condition ;
	rdfs:label "Condition: TCN Already has a Complete CV ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
					PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					ASK
					WHERE { 
							welcome:tcn_user welcome:hasCVStatus ?cvStatus .
							?cvStatus rdf:type welcome:CVStatus .
							?cvStatus welcome:hasValue "Complete" .
					}"""^^xsd:string ;
		]) .
		
:UpdateCVPurpose_ExistingCompleteDIP2Execution
	a bt:Update ;
	rdfs:label "Update: Complete CV Template" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE {
						employment:informServicePurpose welcome:hasTemplateId ?templateServicePurpose .						
						employment:informDisclaimerCVModification welcome:hasTemplateId ?templateDisclaimerCV .
						employment:obtainCVCreationInterest welcome:hasTemplateId ?templateCVCreationInterest .
					}
					INSERT { 
						employment:informServicePurpose welcome:hasTemplateId "TInformServicePurpose_CV"^^xsd:string . 
						employment:informDisclaimerCVModification welcome:hasTemplateId "TInformDisclaimerCVModification_CV"^^xsd:string .
						employment:obtainCVCreationInterest welcome:hasTemplateId "TObtainCVReviewInterest"^^xsd:string .
					}
					WHERE {		
						employment:CVPurpose rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:CVPurpose welcome:hasSlot employment:informServicePurpose .
						employment:CVPurpose welcome:hasSlot employment:informDisclaimerCVModification .
						employment:CVPurpose welcome:hasSlot employment:obtainCVCreationInterest .
						employment:informServicePurpose welcome:hasTemplateId ?templateServicePurpose .						
						employment:informDisclaimerCVModification welcome:hasTemplateId ?templateDisclaimerCV .
						employment:obtainCVCreationInterest welcome:hasTemplateId ?templateCVCreationInterest .
					}"""^^xsd:string ;
		]) .
		
:ConditionNoCV
	a bt:Condition ;
	rdfs:label "Condition: no CV exists ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
					PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					ASK
					WHERE { 
							welcome:tcn_user welcome:hasCVStatus ?cvStatus .
							?cvStatus rdf:type welcome:CVStatus .
							?cvStatus welcome:hasValue "None" .
					}"""^^xsd:string ;
		]) .
		
:UpdateCVPurpose_NoCVDIP2Execution
	a bt:Update ;
	rdfs:label "Update: No CV Template" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE {
						employment:informServicePurpose welcome:hasTemplateId ?templateServicePurpose .						
						employment:informDisclaimerCVModification welcome:hasTemplateId ?templateDisclaimerCV .
						employment:obtainCVCreationInterest welcome:hasTemplateId ?templateCVCreationInterest .
					}
					INSERT { 
						employment:informServicePurpose welcome:hasTemplateId "TInformServicePurpose_noCV"^^xsd:string . 
						employment:informDisclaimerCVModification welcome:hasTemplateId "TInformDisclaimerCVModification_noCV"^^xsd:string .
						employment:obtainCVCreationInterest welcome:hasTemplateId "TObtainCVCreationInterest"^^xsd:string .
					}
					WHERE {		
						employment:CVPurpose rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:CVPurpose welcome:hasSlot employment:informServicePurpose .
						employment:CVPurpose welcome:hasSlot employment:informDisclaimerCVModification .
						employment:CVPurpose welcome:hasSlot employment:obtainCVCreationInterest .
						employment:informServicePurpose welcome:hasTemplateId ?templateServicePurpose .						
						employment:informDisclaimerCVModification welcome:hasTemplateId ?templateDisclaimerCV .
						employment:obtainCVCreationInterest welcome:hasTemplateId ?templateCVCreationInterest .
					}"""^^xsd:string ;
		]) .

:ConditionFirstMoveSchooling
	a bt:Condition ;
	rdfs:label "Condition: First Move for Schooling BT?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
					PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE { 
							?sscSubj ssc:hasResultOffer schooling:diplomaRecognition .
					}"""^^xsd:string ;
		]) .
		
:WriteScenarioIntroductionSchoolingDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Scenario Introduction Schooling DIP in Execution" ;
	bt:query [
    a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
			PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						schooling:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:ScenarioIntroduction welcome:belongsTo schooling:diplomaRecognition .
						schooling:ScenarioIntroduction welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:ScenarioIntroduction welcome:hasDIPStatus welcome:Unknown .
						schooling:ScenarioIntroduction welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:ScenarioIntroduction .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
			} """^^xsd:string ;
  ] . 

:UpdateCreateInformContactNGOFarewellDIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO Farewell DIP - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ContactNGOFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:ContactNGOFarewell welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:ContactNGOFarewell welcome:hasSlot welcome:informInabilityAssist .						
						welcome:informInabilityAssist rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informInabilityAssist welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informInabilityAssist welcome:hasTemplateId "TInformInabilityAssist"^^xsd:string .
						welcome:informInabilityAssist welcome:hasInputRDFContents welcome:Unknown .
						welcome:informInabilityAssist welcome:hasTCNAnswer welcome:Unknown .
						welcome:informInabilityAssist welcome:hasStatus welcome:Pending .
						welcome:informInabilityAssist welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informInabilityAssist welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informInabilityAssist welcome:isOptional "false"^^xsd:boolean .
						welcome:informInabilityAssist welcome:dependsOn welcome:Unknown .
						welcome:informInabilityAssist welcome:associatedWith welcome:Unknown .	
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateInformContactNGOFarewellDIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO Farewell DIP - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOFarewell welcome:hasSlot welcome:informGenericPRAKSISContact .						
						welcome:informGenericPRAKSISContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informGenericPRAKSISContact welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informGenericPRAKSISContact welcome:hasTemplateId "TInformEnd_CARITAS_s3"^^xsd:string .
						welcome:informGenericPRAKSISContact welcome:hasInputRDFContents welcome:Unknown .
						welcome:informGenericPRAKSISContact welcome:hasTCNAnswer welcome:Unknown .
						welcome:informGenericPRAKSISContact welcome:hasStatus welcome:Pending .
						welcome:informGenericPRAKSISContact welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informGenericPRAKSISContact welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informGenericPRAKSISContact welcome:isOptional "false"^^xsd:boolean .
						welcome:informGenericPRAKSISContact welcome:dependsOn welcome:Unknown .
						welcome:informGenericPRAKSISContact welcome:associatedWith welcome:Unknown .	
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateInformContactNGOFarewellDIP2Execution_Part3
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO Farewell DIP - Part 3" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {								
						welcome:ContactNGOFarewell welcome:hasSlot welcome:informContactNGOFarewell .
						welcome:informContactNGOFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informContactNGOFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informContactNGOFarewell welcome:hasTemplateId "TInformNormalClosingFarewell"^^xsd:string .
						welcome:informContactNGOFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informContactNGOFarewell welcome:hasTCNAnswer welcome:Unknown .
						welcome:informContactNGOFarewell welcome:hasStatus welcome:Pending .
						welcome:informContactNGOFarewell welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informContactNGOFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informContactNGOFarewell welcome:isOptional "false"^^xsd:boolean .	
						welcome:informContactNGOFarewell welcome:dependsOn welcome:Unknown .
						welcome:informContactNGOFarewell welcome:associatedWith welcome:Unknown .
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:DeleteFirstInteractionFlaginLAKR
	a bt:Update ;
	rdfs:label "Update: Delete First Interaction Flag in LAKR" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE {
						welcome:myWelcomeAgent welcome:hasFirstMove ?val .		
					}
					WHERE { 
						welcome:myWelcomeAgent welcome:hasFirstMove ?val .	
					}					
					"""^^xsd:string ;
		]) .

:EventHandlerSpecificBT
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Specific BT" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#SpecificBTEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 				
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:execute ?val .			
						}
						WHERE { 
							welcome:myWelcomeAgent welcome:execute ?val .						
						}"""^^xsd:string ;
				] .

:DeletePreviousFlaginExecution
	a bt:Update ;
	rdfs:label "Update: Delete Previous Specific BT Flag in Execution" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE {
						welcome:myWelcomeAgent welcome:execute ?val .		
					} WHERE { 
						OPTIONAL{
							welcome:myWelcomeAgent welcome:execute ?val . 
						}
					}"""^^xsd:string ;
		]) .

:WriteSpecificBTFlaginExecution
	a bt:Write ;
	rdfs:label "Write: Specific BT Flag in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>	
			CONSTRUCT  {
				welcome:myWelcomeAgent welcome:execute ?val .	
			}
			WHERE {
				welcome:myWelcomeAgent welcome:execute ?val .	
			}"""^^xsd:string ;
	] .

:DeleteSpecificBTFlaginAgentKB
	a bt:Update ;
	rdfs:label "Update: Delete Specific BT Flag in LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE {
						welcome:myWelcomeAgent welcome:execute ?val .		
					} WHERE { 
						welcome:myWelcomeAgent welcome:execute ?val . 
					}"""^^xsd:string ;
		]) .
		
:ConditionalFlagIncomplete
	a bt:Condition ;
	rdfs:label "Condition: Specific BT Flag Incomplete?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					ASK
					WHERE { 
							welcome:myWelcomeAgent welcome:execute "IncompleteDIP" .	
					}"""^^xsd:string ;
		]) .
		
:SendIncompleteOrMultipleDIPDMS
	a myWelcome:Message ;
	rdfs:label "Message: Send Multiple or Incomplete DIP to DMS"^^xsd:string ;
	rdfs:comment "Message: Send Multiple or Incomplete DIP to DMS"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
		  a bt:SelectQuery;
		  a bt:QueryUri ;
		  bt:originBase ajan:AgentKnowledge ;
		  bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					SELECT DISTINCT ?hdrName ?fieldValue
					WHERE { 
							{
								VALUES ?hdrName {"X-Turn-ID"}
								?turn welcome:hasTurnID ?fieldValue .
							}
							
							UNION
							{
							   VALUES ?hdrName {"X-Correlation-ID"}
							   ?msg welcome:hasCorrelationID ?fieldValue .
							}
							UNION
							{
							   VALUES ?hdrName {"X-Language"}
								welcome:tcn_user welcome:hasLanguageCode ?lang .
								?lang rdf:type welcome:LanguageCode .
								?lang welcome:hasValue ?fieldValue .
							}
							UNION
							{
								VALUES ?hdrName {"X-Avatar-Gender"}
								welcome:Avatar welcome:hasGender welcome:Gender .
								welcome:Gender welcome:hasValue ?fieldValue .	
							}
							UNION
							{
								VALUES ?hdrName {"X-User-ID"}
								?du rdf:type welcome:DialogueUser .
								?du welcome:hasUserId ?idObject .
								?idObject welcome:hasValue ?fieldValue .
							}
							UNION
							{
								VALUES (?hdrName ?fieldValue) {
								("X-Msg-Type" "dialogueResponse")
								}
							}
					}"""^^xsd:string
		] ;
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle;charset-UTF8"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;	
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
						PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
						PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
						PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
						PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						CONSTRUCT {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .					
							?dip welcome:DIPId ?id .
							?dip welcome:isCurrentDIP ?current .
							?dip welcome:hasSlot ?slots .
							?slots rdf:type ?slotType .
							?slots welcome:hasTemplateId ?templateID .	
							?slots welcome:hasInputRDFContents ?RDFContents .
							?slots welcome:hasTCNAnswer ?tcnAnswer .
							?slots welcome:hasOntologyType ?ontoType .
							?tcnAnswer ?reifiPredAnswer ?reifiedObjAnswer .
							?RDFContents ?ReifiPredi ?ReifiObj .					
							?slots welcome:hasStatus ?slotsStatus .		
							?slots welcome:hasNumberAttempts ?NbAttempts .
							?slots welcome:confidenceScore ?confScore .
							?slots welcome:isOptional ?optional .
							?slots welcome:dependsOn ?val .
							?slots welcome:associatedWith ?asso .
						}
						WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .					
							?dip welcome:DIPId ?id .
							?dip welcome:isCurrentDIP ?current .
							?dip welcome:hasSlot ?slots .
							?slots rdf:type ?slotType .
							?slots welcome:hasOntologyType ?ontoType .							
							?slots welcome:hasStatus ?slotsStatus .		
							?slots welcome:hasNumberAttempts ?NbAttempts .
							?slots welcome:confidenceScore ?confScore .
							?slots welcome:isOptional ?optional .	
							OPTIONAL { ?slots welcome:hasTemplateId ?templateID . }
							OPTIONAL {?slots welcome:dependsOn ?val .}
							OPTIONAL {?slots welcome:associatedWith ?asso .}
							OPTIONAL { 
								{?slots welcome:hasTCNAnswer ?tcnAnswer .}
								UNION
								{?slots welcome:hasTCNAnswer ?tcnAnswer .
								 ?tcnAnswer ?reifiPredAnswer ?reifiedObjAnswer .}
							}
							OPTIONAL { 
								{?slots welcome:hasInputRDFContents ?RDFContents . }
								UNION
								{?slots welcome:hasInputRDFContents ?RDFContents .
								?RDFContents ?ReifiPredi ?ReifiObj .}
							}
						}"""^^xsd:string
			]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/toTcn?log=true") AS ?requestURI )
   			}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionalNormalClosing_ContactNGO_ClosingFailureComplete
	a bt:Condition ;
	rdfs:label "Condition: Normal Closing or ContactNGO or Closing Failure Complete" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							{
								?bt welcome:hasActiveDIP ?id . 
								simulateAppointment:NormalClosing rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								simulateAppointment:NormalClosing welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								welcome:NormalClosing rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:NormalClosing welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id .
								welcome:ContactNGOFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:ContactNGOFarewell welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id .
								welcome:NormalClosingFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:NormalClosingFarewell welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id .
								welcome:ClosingUponFailure rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:ClosingUponFailure welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id .
								welcome:ClosingUponFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:ClosingUponFailureFarewell welcome:DIPId ?id .
							}
					}"""^^xsd:string ;
		]) .

:MessageSendDialogueFinishNotification
	a myWelcome:Message ;
	rdfs:label "Message: Send Dialogue Finished Notification to App"^^xsd:string ;
	rdfs:comment "Message: Send Dialogue Finished Notification to App"^^xsd:string ;
	bt:targetBase ajan:AgentKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:notificationTitle welcome:EndDialogue  "true" .  
						}
						WHERE {
							?bt welcome:hasActiveDIP ?id .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionExecuteSimulateAppointmentBT
	a bt:Condition ;
	rdfs:label "Condition: Execute Simulate Appointment BT?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE { 
						{
							?bt welcome:hasActiveDIP ?dipId . 
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							?dip welcome:DIPId ?id .
							?dip welcome:belongsTo <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#SimulatePhoneAppointmentService> .
						}
					}"""^^xsd:string ;
		]) .

:ConditionExecuteSchoolingBT
	a bt:Condition ;
	rdfs:label "Condition: Execute Schooling BT?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX preregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/PreregistrationProcedureService.owl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
					PREFIX fullpreregistration: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/FullPreregistration.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE { 
							?bt welcome:hasActiveDIP ?dipId . 
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							?dip welcome:DIPId ?id .
							?dip welcome:belongsTo <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#diplomaRecognition>
					}"""^^xsd:string ;
		]) .

:EventProducerExecuteSchoolingBT
	a bt:EventProducer ;
	rdfs:label "EventProducer: Execute Schooling BT" ;
	ajan:event agents:SchoolingMasterEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:ExecutionKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:topic welcome:informed "Master" .
						}
						WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						}"""^^xsd:string ;
	] .	

:EventProducerExecuteCVCreationBT
	a bt:EventProducer ;
	rdfs:label "EventProducer: Execute the CV Creation BT" ;
	ajan:event agents:CVCreationEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:AgentKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:myWelcomeAgent welcome:executeScenario "CVCreation" .
						}
						WHERE {
							?s rdf:type ajan:Agent .
						}"""^^xsd:string ;
				] .	
				
#=============================================================================================
# SpecificSimulateAppointmentBT

:ConditionalUndefinedDIP
	a bt:Condition ;
	rdfs:label "Condition: A mandatory info is missing ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>					
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							?dipName welcome:DIPId ?id .
							?dipName welcome:hasSlot ?mandatorySlotName.
							?mandatorySlotName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI .
							?mandatorySlotName welcome:hasStatus welcome:Undefined .	
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - Missing Mandatory Info - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ClosingUponFailureFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:ClosingUponFailureFarewell welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string . 
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReasonSTReasonValueMissed .
						welcome:informMessage welcome:dependsOn welcome:Unknown .
						welcome:informMessage welcome:associatedWith welcome:Unknown .
						welcome:informMessage welcome:hasStatus welcome:Pending .
						welcome:informMessage welcome:hasNumberAttempts 0 .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .				
						welcome:reifiedReasonSTReasonValueMissed rdf:type rdf:Statement .
						welcome:reifiedReasonSTReasonValueMissed rdf:subject welcome:subTemplate .
						welcome:reifiedReasonSTReasonValueMissed rdf:predicate welcome:isReason .
						welcome:reifiedReasonSTReasonValueMissed rdf:object "STReasonValueMissed"^^xsd:string .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateClosingUponFailureUndefinedSlotDIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP - Missing Mandatory Info - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informClosingFailureFarewell .
						welcome:informClosingFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasTemplateId "TInformClosingFailureFarewell"^^xsd:string . 
						welcome:informClosingFailureFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informClosingFailureFarewell welcome:hasStatus welcome:Pending .
						welcome:informClosingFailureFarewell welcome:hasNumberAttempts 0 .
						welcome:informClosingFailureFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informClosingFailureFarewell welcome:isOptional "false"^^xsd:boolean .
						welcome:informClosingFailureFarewell welcome:dependsOn welcome:Unknown .
						welcome:informClosingFailureFarewell welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:ConditionalAnyConfirmInfoNot_UndefinedValue
	a bt:Condition ;
	rdfs:label "Condition: Any Confirmation Not - Undefined Value" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							?dipName welcome:DIPId ?id .						
							?dipName welcome:hasSlot ?slotName .	
							?slotName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#ConfirmationRequest"^^xsd:anyURI .
							?slotName welcome:hasStatus welcome:Undefined .			
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO Farewell Simulation - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOFarewellSimulation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ContactNGOFarewellSimulation welcome:hasDIPStatus welcome:Unknown .
						welcome:ContactNGOFarewellSimulation welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ContactNGOFarewellSimulation welcome:belongsTo <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulateAppointmentService.owl#simulatePraksisAppointmentService> .
						welcome:ContactNGOFarewellSimulation welcome:hasSlot welcome:informGenericPRAKSISContact, welcome:obtainContactNGOSimulationConfirmation, welcome:flagMoreSimulations .						
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO Farewell Simulation - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {											
						welcome:informGenericPRAKSISContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informGenericPRAKSISContact welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informGenericPRAKSISContact welcome:hasTemplateId "TInformInabilityAssistAndContacts"^^xsd:string . 
						welcome:informGenericPRAKSISContact welcome:hasInputRDFContents welcome:Unknown .
						welcome:informGenericPRAKSISContact welcome:hasStatus welcome:Pending .
						welcome:informGenericPRAKSISContact welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informGenericPRAKSISContact welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informGenericPRAKSISContact welcome:isOptional "false"^^xsd:boolean .
						welcome:informGenericPRAKSISContact welcome:dependsOn welcome:Unknown .
						welcome:informGenericPRAKSISContact welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part3
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO Farewell Simulation - Part 3" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {										
						welcome:obtainContactNGOSimulationConfirmation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI .
						welcome:obtainContactNGOSimulationConfirmation welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:obtainContactNGOSimulationConfirmation welcome:hasTemplateId "TObtainContactNGOSimulationConfirmation"^^xsd:string . 
						welcome:obtainContactNGOSimulationConfirmation welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainContactNGOSimulationConfirmation welcome:hasStatus welcome:Pending .
						welcome:obtainContactNGOSimulationConfirmation welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:obtainContactNGOSimulationConfirmation welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainContactNGOSimulationConfirmation welcome:isOptional "false"^^xsd:boolean .
						welcome:obtainContactNGOSimulationConfirmation welcome:dependsOn welcome:Unknown .
						welcome:obtainContactNGOSimulationConfirmation welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateContactNGOFarewellSimulationDIP2Execution_Part4
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO Farewell Simulation - Part 4" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {												
						welcome:flagMoreSimulations rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI .
						welcome:flagMoreSimulations welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#OfficerRoleFlag"^^xsd:anyURI .
						welcome:flagMoreSimulations welcome:hasInputRDFContents welcome:Unknown .
						welcome:flagMoreSimulations welcome:hasStatus welcome:Pending .
						welcome:flagMoreSimulations welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:flagMoreSimulations welcome:confidenceScore "0.0"^^xsd:float .
						welcome:flagMoreSimulations welcome:isOptional "false"^^xsd:boolean .
						welcome:flagMoreSimulations welcome:dependsOn welcome:Unknown .
						welcome:flagMoreSimulations welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:ConditionalScenarioIntroductionCompleteAndYes
	a bt:Condition ;
	rdfs:label "Condition: Scenario Introduction Complete? and Answer Yes" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:ScenarioIntroduction welcome:DIPId ?id .
							simulateAppointment:ScenarioIntroduction welcome:hasSlot simulateAppointment:obtainReadiness .	
							simulateAppointment:obtainReadiness welcome:hasTCNAnswer ?reifiedReadiness .
							?reifiedReadiness rdf:type rdf:Statement .
							?reifiedReadiness rdf:subject ?reifiedSubject .
							?reifiedReadiness rdf:predicate ?reifiedPredicate .
							?reifiedReadiness rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "true"))
					}"""^^xsd:string ;
		]) .

:WriteSimulationIntroductionDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Simulation Introduction DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:SimulationIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:SimulationIntroduction welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:SimulationIntroduction welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:SimulationIntroduction welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:SimulationIntroduction welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:SimulationIntroduction .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

:ConditionalScenarioIntroductionCompleteAndNot
	a bt:Condition ;
	rdfs:label "Condition: Scenario Introduction Complete? and Answer Not" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:ScenarioIntroduction welcome:DIPId ?id .
							simulateAppointment:ScenarioIntroduction welcome:hasSlot simulateAppointment:obtainReadiness .	
							simulateAppointment:obtainReadiness welcome:hasTCNAnswer ?reifiedReadiness .
							?reifiedReadiness rdf:type rdf:Statement .
							?reifiedReadiness rdf:subject ?reifiedSubject .
							?reifiedReadiness rdf:predicate ?reifiedPredicate .
							?reifiedReadiness rdf:object ?answer.
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
					}"""^^xsd:string ;
		]) .

:UpdateCreateInformContactNGODIPPart1
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO DIP - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:InformContactNGO rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:InformContactNGO welcome:hasDIPStatus welcome:Unknown .
						welcome:InformContactNGO welcome:hasSlot welcome:informGenericCARITASContact .
						welcome:InformContactNGO welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:informGenericCARITASContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informGenericCARITASContact welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informGenericCARITASContact welcome:hasTemplateId "TInformGenericContact"^^xsd:string .
						welcome:informGenericCARITASContact welcome:hasInputRDFContents welcome:Unknown .
						welcome:informGenericCARITASContact welcome:hasTCNAnswer welcome:Unknown .
						welcome:informGenericCARITASContact welcome:hasStatus welcome:Pending .
						welcome:informGenericCARITASContact welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informGenericCARITASContact welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informGenericCARITASContact welcome:isOptional "false"^^xsd:boolean .									
					} 
					WHERE { 
						?agentName rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateInformContactNGODIPPart2
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO DIP - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 					
					INSERT {
						welcome:InformContactNGO rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:InformContactNGO welcome:hasDIPStatus welcome:Unknown .
						welcome:InformContactNGO welcome:hasSlot welcome:obtainConfirmation .
						welcome:InformContactNGO welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:obtainConfirmation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#ConfirmationRequest"^^xsd:anyURI .	
						welcome:obtainConfirmation	welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:obtainConfirmation welcome:hasTemplateId "TObtainConfirmation"^^xsd:string .
						welcome:obtainConfirmation welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainConfirmation welcome:hasTCNAnswer welcome:Unknown .
						welcome:obtainConfirmation welcome:hasStatus welcome:Pending .
						welcome:obtainConfirmation welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:obtainConfirmation welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainConfirmation welcome:isOptional "false"^^xsd:boolean .					
					} 
					WHERE { 
						?agentName rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:ConditionalSimulationIntroductionComplete
	a bt:Condition ;
	rdfs:label "Condition: Simulation Introduction Complete?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:SimulationIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:SimulationIntroduction welcome:DIPId ?id .				
					}"""^^xsd:string ;
		]) .

:WriteObtainTCNInformationDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Obtain TCN Information DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:ObtainTCNInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:ObtainTCNInformation welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:ObtainTCNInformation welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:ObtainTCNInformation welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:ObtainTCNInformation welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:ObtainTCNInformation .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			}"""^^xsd:string ;
	] .

:ConditionalInformDtlApORApFailedORInformContactDtlCptlORInformContactCptlYes
	a bt:Condition ;
	rdfs:label "Condition: Details Aptment or Aptment Failed or Contact Dtls Complete or Inform Contact Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							{
								?bt welcome:hasActiveDIP ?id . 
								simulateAppointment:InformDetailsAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								simulateAppointment:InformDetailsAppointment welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								welcome:ClosingUponFailure rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:ClosingUponFailure welcome:DIPId ?id .
								welcome:ClosingUponFailure welcome:hasSlot welcome:informMessage .
								welcome:informMessage welcome:hasTemplateId ?templateID.  
								welcome:informMessage welcome:hasInputRDFContents ?rdfContent .
								?rdfContent rdf:type rdf:Statement .
								?rdfContent rdf:subject ?sub .
								?rdfContent rdf:predicate ?reifiedPred.
								?rdfContent rdf:object "STReasonAppointmentFailed"^^xsd:string .								
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								simulateAppointment:InformContactDetails rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								simulateAppointment:InformContactDetails welcome:DIPId ?id .
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								simulateAppointment:InformContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								simulateAppointment:InformContact welcome:DIPId ?id .
								simulateAppointment:InformContact welcome:hasSlot simulateAppointment:obtainDetailsKnown .
								simulateAppointment:obtainDetailsKnown welcome:hasInputRDFContents ?RDFContents .
								simulateAppointment:obtainDetailsKnown welcome:hasTCNAnswer ?ReifiedAnswer .
								?ReifiedAnswer rdf:type rdf:Statement .
								?ReifiedAnswer rdf:subject ?ReifiedSubject .
								?ReifiedAnswer rdf:predicate ?ReifiPredi .
								?ReifiedAnswer rdf:object ?answer .
								FILTER (STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "true"))
							}
					}"""^^xsd:string ;
		]) .

:WriteSimulationClosingDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Simulation Closing DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:SimulationClosing rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:SimulationClosing welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:SimulationClosing welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:SimulationClosing welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:SimulationClosing welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:SimulationClosing .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalReactiveScenario
	a bt:Condition ;
	rdfs:label "Condition: Reactive Scenario?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							?dip welcome:belongsTo ?MatchmakerOffer .
							?dip welcome:isCurrentDIP "true"^^xsd:boolean .
							?dip welcome:hasSlot simulateAppointment:reactiveFlag .
							simulateAppointment:reactiveFlag rdf:type ?slotType .
							simulateAppointment:reactiveFlag welcome:hasInputRDFContents ?reifiedFlag .
							?reifiedFlag rdf:type rdf:Statement .
							?reifiedFlag rdf:subject ?reifiedSubject .
							?reifiedFlag rdf:predicate ?reifiedPredicate .
							?reifiedFlag rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "true"))
					}"""^^xsd:string ;
		]) .
		
:ConditionalObtainTCNInformationComplete
	a bt:Condition ;
	rdfs:label "Condition: Obtain TCN Information Complete?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:ObtainTCNInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:ObtainTCNInformation welcome:DIPId ?id .					
					}"""^^xsd:string ;
		]) .

:WriteMakeAppointmentDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Make Appointment DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:MakeAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:MakeAppointment welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:MakeAppointment welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:MakeAppointment welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:MakeAppointment welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:MakeAppointment .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			}"""^^xsd:string ;
	] .

:UpdateReactiveFlaginExecution
	a bt:Update ;
	rdfs:label "Update: Delete Previous Reactive Flag Value" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 					
					DELETE{
						simulateAppointment:reactiveFlag  welcome:hasInputRDFContents ?content .
						?content ?valPred ?valObj .
						simulateAppointment:reactiveFlag  welcome:hasStatus ?status .
					}
					INSERT {
						simulateAppointment:reactiveFlag  welcome:hasInputRDFContents welcome:Unknown .
						simulateAppointment:reactiveFlag  welcome:hasStatus welcome:Pending .
					} 
					WHERE { 
						?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						?dip welcome:hasSlot simulateAppointment:reactiveFlag .
						simulateAppointment:reactiveFlag  welcome:hasInputRDFContents ?content .
						simulateAppointment:reactiveFlag  welcome:hasStatus ?status .
						OPTIONAL {?content ?valPred ?valObj .}
					}"""^^xsd:string ;
		]) .
		
:ConditionalMakeAppointmentCompleteYesAnswerLowerAttempts
	a bt:Condition ;
	rdfs:label "Condition: Make Appointment Complete Accepted ? Less 3 Attempts ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:MakeAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .			
							simulateAppointment:MakeAppointment welcome:DIPId ?id .
							simulateAppointment:MakeAppointment welcome:belongsTo ?MatchmakerOffer .
							simulateAppointment:MakeAppointment welcome:isCurrentDIP "true"^^xsd:boolean .
							simulateAppointment:MakeAppointment welcome:hasSlot simulateAppointment:confirmTimeSlot .
							simulateAppointment:confirmTimeSlot rdf:type ?slotType .
							simulateAppointment:confirmTimeSlot welcome:hasOntologyType ?ontoType .
							simulateAppointment:confirmTimeSlot welcome:hasInputRDFContents ?RDFContents .
							simulateAppointment:confirmTimeSlot welcome:hasStatus ?slotsStatus .		
							simulateAppointment:confirmTimeSlot welcome:hasNumberAttempts ?NbAttempts .
							simulateAppointment:confirmTimeSlot welcome:confidenceScore ?confScore .
							simulateAppointment:confirmTimeSlot welcome:isOptional ?optional .
							simulateAppointment:confirmTimeSlot welcome:hasTCNAnswer ?ReifiedAnswer .
							?ReifiedAnswer rdf:type rdf:Statement .
							?ReifiedAnswer rdf:subject ?reifiedSubject .
							?ReifiedAnswer rdf:predicate ?reifiedPredicate .
							?ReifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "true"))
							FILTER (?NbAttempts <= 3)						
					}"""^^xsd:string ;
		]) .
		
:WriteInformDetailsAppointmentDIP
	a bt:Write ;
	rdfs:label "Write: Inform Details Appointment DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:InformDetailsAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:InformDetailsAppointment welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:InformDetailsAppointment welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:InformDetailsAppointment welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:InformDetailsAppointment welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:InformDetailsAppointment .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			}"""^^xsd:string ;
	] .

:ConditionalMakeAppointmentCompleteNotAnswer
	a bt:Condition ;
	rdfs:label "Condition: Make Appointment Complete Reject ? Less 3 Attempts ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:MakeAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:MakeAppointment welcome:DIPId ?id .
							simulateAppointment:MakeAppointment welcome:belongsTo ?MatchmakerOffer .
							simulateAppointment:MakeAppointment welcome:isCurrentDIP "true"^^xsd:boolean .
							simulateAppointment:MakeAppointment welcome:hasSlot simulateAppointment:confirmTimeSlot .
							simulateAppointment:confirmTimeSlot rdf:type ?slotType .
							simulateAppointment:confirmTimeSlot welcome:hasOntologyType ?ontoType .
							simulateAppointment:confirmTimeSlot welcome:hasInputRDFContents ?RDFContents .
							simulateAppointment:confirmTimeSlot welcome:hasStatus ?slotsStatus .		
							simulateAppointment:confirmTimeSlot welcome:hasNumberAttempts ?NbAttempts .
							simulateAppointment:confirmTimeSlot welcome:confidenceScore ?confScore .
							simulateAppointment:confirmTimeSlot welcome:isOptional ?optional .
							simulateAppointment:confirmTimeSlot welcome:hasTCNAnswer ?ReifiedAnswer .
							?ReifiedAnswer rdf:type rdf:Statement .
							?ReifiedAnswer rdf:subject ?reifiedSubject .
							?ReifiedAnswer rdf:predicate ?reifiedPredicate .
							?ReifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "no")|| STRENDS(str(?answer), "No"))
					}"""^^xsd:string ;
		]) .

:UpdateCreateClosingFailureAppointmentFailedDIP
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure DIP. Failure Appointment" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					INSERT {
						welcome:ClosingUponFailure rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .	
						welcome:ClosingUponFailure welcome:hasDIPStatus welcome:Unknown .
						welcome:ClosingUponFailure welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailure welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	 
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string .  
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReason2 .
						welcome:informMessage welcome:hasStatus welcome:Pending .
						welcome:informMessage welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .
						welcome:reifiedReason2 rdf:type rdf:Statement .
						welcome:reifiedReason2 rdf:subject welcome:subTemplate .
						welcome:reifiedReason2 rdf:predicate welcome:isReason .
						welcome:reifiedReason2 rdf:object "STReasonAppointmentFailed"^^xsd:string .						
					} WHERE { 
						?s ?o ?p .
					}"""^^xsd:string ;
		]) .

:ConditionalSimulationClosingComplete
	a bt:Condition ;
	rdfs:label "Condition: Simulation Closing Complete?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:SimulationClosing rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:SimulationClosing welcome:DIPId ?id .
							simulateAppointment:SimulationClosing welcome:belongsTo ?MatchmakerOffer .
					}"""^^xsd:string ;
		]) .
	
:WriteNormalClosingDIP2Execution
	a bt:Write ;
	rdfs:label "Write:Normal Closing DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:NormalClosing rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:NormalClosing welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:NormalClosing welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:NormalClosing welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:NormalClosing welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:NormalClosing .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part1
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure Farewell DIP - Unknown DIP Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ClosingUponFailureFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:ClosingUponFailureFarewell welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string . 						
						welcome:informMessage welcome:hasStatus welcome:Pending .
						welcome:informMessage welcome:hasNumberAttempts 0 .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .	
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReasonSTReasonInternalFailure .
						welcome:reifiedReasonSTReasonInternalFailure rdf:type rdf:Statement .
						welcome:reifiedReasonSTReasonInternalFailure rdf:subject welcome:subTemplate .
						welcome:reifiedReasonSTReasonInternalFailure rdf:predicate welcome:isReason .
						welcome:reifiedReasonSTReasonInternalFailure rdf:object "STReasonInternalFailure"^^xsd:string .							
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateClosingUponFailureFarewellUnknownDIP_Part2
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure Farewell DIP - Unknown DIP Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informClosingFailureFarewell .
						welcome:informClosingFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasTemplateId "TInformClosingFailureFarewell"^^xsd:string . 						
						welcome:informClosingFailureFarewell welcome:hasStatus welcome:Pending .
						welcome:informClosingFailureFarewell welcome:hasNumberAttempts 0 .
						welcome:informClosingFailureFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informClosingFailureFarewell welcome:isOptional "false"^^xsd:boolean .	
						welcome:informClosingFailureFarewell welcome:hasInputRDFContents welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:ConditionalProactiveScenario
	a bt:Condition ;
	rdfs:label "Condition: Proactive Scenario?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							?dip welcome:belongsTo ?MatchmakerOffer .
							?dip welcome:isCurrentDIP "true"^^xsd:boolean .
							?dip welcome:hasSlot simulateAppointment:reactiveFlag .
							simulateAppointment:reactiveFlag rdf:type ?slotType .
							simulateAppointment:reactiveFlag welcome:hasInputRDFContents ?reifiedFlag .
							?reifiedFlag rdf:type rdf:Statement .
							?reifiedFlag rdf:subject ?reifiedSubject .
							?reifiedFlag rdf:predicate ?reifiedPredicate .
							?reifiedFlag rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "no")|| STRENDS(str(?answer), "No"))
					}"""^^xsd:string ;
		]) .
		
:WriteInformContactDIP2Execution
	a bt:Write ;
	rdfs:label "Write:Inform Contact DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:InformContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:InformContact welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:InformContact welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:InformContact welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:InformContact welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:InformContact .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalInformContactCompleteNotAnswer
	a bt:Condition ;
	rdfs:label "Condition: Inform Contact Answer Not? " ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							simulateAppointment:InformContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							simulateAppointment:InformContact welcome:DIPId ?id .
							simulateAppointment:InformContact welcome:belongsTo ?MatchmakerOffer .
							simulateAppointment:InformContact welcome:hasSlot simulateAppointment:obtainDetailsKnown .
							simulateAppointment:obtainDetailsKnown welcome:hasInputRDFContents ?RDFContents .
							simulateAppointment:obtainDetailsKnown welcome:hasTCNAnswer ?ReifiedAnswer .
							?ReifiedAnswer rdf:type rdf:Statement .
							?ReifiedAnswer rdf:subject ?ReifiedSubject .
							?ReifiedAnswer rdf:predicate ?ReifiPredi .
							?ReifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "no")|| STRENDS(str(?answer), "No"))
					}"""^^xsd:string ;
		]) .

:WriteInformContactDetailDIP2Execution
	a bt:Write ;
	rdfs:label "Write:Inform Contact Details DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						simulateAppointment:InformContactDetails rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						simulateAppointment:InformContactDetails welcome:belongsTo simulateAppointment:SimulatePhoneAppointmentService .
						simulateAppointment:InformContactDetails welcome:isCurrentDIP "true"^^xsd:boolean .
						simulateAppointment:InformContactDetails welcome:hasDIPStatus welcome:Unknown .
						simulateAppointment:InformContactDetails welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						simulateAppointment:SimulatePhoneAppointmentService rdf:type service:Service .
						simulateAppointment:SimulatePhoneAppointmentService service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP simulateAppointment:InformContactDetails .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

#=============================================================================================
# CVCreation

:EventHandlerCVNotification
	a bt:HandleEvent ;
	rdfs:label "EventHandler: CV Created in the App" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#ReceiveKMSNotificationS7Event> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
								PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
								PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
								PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
								PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
								CONSTRUCT {
									welcome:KMSNotifies ?pre ?boolVal .
								}
								WHERE { 
									welcome:KMSNotifies ?pre ?boolVal .
								}"""^^xsd:string ;
				] .

:WriteNotificationToExecution
	a bt:Write ;
	rdfs:label "Write: KMS S7 Notification from LAKR to Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					CONSTRUCT  {
						welcome:KMSNotifies ?pred ?val .
					}
					WHERE {
						 welcome:KMSNotifies ?pred ?val .		
					}"""^^xsd:string ;
	] .
	
:DeleteS7NotificationFromLAKR
	a bt:Update ;
	rdfs:label "Update: Delete S7 Notification from LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					DELETE {
						welcome:KMSNotifies ?pred ?val .
					} 
					WHERE { 
						welcome:KMSNotifies ?pred ?val .
					}"""^^xsd:string ;
		]) .


:ConditionIsPersonalInfoFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Personal Info Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:PersonalInfo "true" .									
					}"""^^xsd:string ;
		]) .

:UpdateCreateHeaderAppMessageDisplay
	a bt:Update ;
	rdfs:label "Update: Header Message for App - Display " ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE{
						?headerSubject welcome:hasHeaderValue ?typeval .
						?headerValSubject welcome:hasHeaderValue ?typeHeaderval .
					}
					INSERT {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?id .					
						welcome:headerMsgType welcome:hasHeaderName "X-Msg-Type" .
						welcome:headerMsgType welcome:hasHeaderValue "DisplayUI" .
					} 
					WHERE { 
						?du rdf:type welcome:DialogueUser .
						?msg welcome:hasCorrelationID ?correlationID .
						?du welcome:hasUserId ?idObject .
						?idObject welcome:hasValue ?id .
						OPTIONAL {?headerSubject welcome:hasHeaderValue ?typeval .}
						OPTIONAL {?headerValSubject welcome:hasHeaderValue ?typeHeaderval .}
					}
					"""^^xsd:string ;
		]) .
		
:MessageSendPersonalInfoSectionToApp 
	a myWelcome:Message ;
	rdfs:label "Message: Send Personal Info Section to App"^^xsd:string ;
	rdfs:comment "Message: Send Personal Info Section to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayPersonalInfoSection "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?pred ?val .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionIsEducationInformationFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Education Information Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:EducationInformation "true" .									
					}"""^^xsd:string ;
		]) .
		
:MessageSendEducationInformationSectionToApp
	a myWelcome:Message ;
	rdfs:label "Message: Education Information Section to App"^^xsd:string ;
	rdfs:comment "Message: Education Information Section to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayEducationInformationSection "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?pred ?val .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionIsOtherEducationInformationFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Other Education Information Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:OtherEducationInformation "true" .									
					}"""^^xsd:string ;
		]) .
		
:MessageSendOtherEducationInformationSectionToApp 
	a myWelcome:Message ;
	rdfs:label "Message: Send Other Education Information Section to App"^^xsd:string ;
	rdfs:comment "Message: Send Other Education Information Section to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayOtherEducationInformationSection "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?pred ?val .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionIsLanguageInformationFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Language Information Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:LanguageInformation "true" .									
					}"""^^xsd:string ;
		]) .
		
:MessageSendLanguageInformationSectionToApp
	a myWelcome:Message ;
	rdfs:label "Message: Send Language Information Section to App"^^xsd:string ;
	rdfs:comment "Message: Send Language Information Section to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayLanguageInformationSection "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?pred ?val .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionIsEmploymentInformationFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Employment Information Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:EmploymentInformation "true" .									
					}"""^^xsd:string ;
		]) .
		
:MessageSendEmploymentInformationSectionToApp 
	a myWelcome:Message ;
	rdfs:label "Message: Send Employment Information Section to App"^^xsd:string ;
	rdfs:comment "Message: Send Employment Information Section to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayEmploymentInformationSection "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?pred ?val .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionIsSkillInformationFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Skill Information Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:SkillInformation "true" .									
					}"""^^xsd:string ;
		]) .
		
:ConditionIsOtherInformationFinished
	a bt:Condition ;
	rdfs:label "Condition: Was the Other Information Finished?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							welcome:KMSNotifies welcome:OtherInformation "true" .									
					}"""^^xsd:string ;
		]) .
		
:MessageSendOtherInformationSectionToApp
	a myWelcome:Message ;
	rdfs:label "Message: Send Other Information Section to App"^^xsd:string ;
	rdfs:comment "Message: Send Other Information Section to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayOtherInformationSection "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?pred ?val .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:EventHandlerExecuteCVCreationBT
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Executing CV Creation Move" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#CVCreationEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
								PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
								PREFIX ajan: <http://www.ajan.de/ajan-ns#>
								PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
								CONSTRUCT {
									welcome:myWelcomeAgent welcome:executeScenario "CVCreation" .
								}
								WHERE { 
									welcome:myWelcomeAgent welcome:executeScenario "CVCreation" .
								}"""^^xsd:string ;
	] .
				
:ConditionalCVPurposeInterestYes
	a bt:Condition ;
	rdfs:label "Condition: CV Purpose Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:CVPurpose rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:CVPurpose welcome:DIPId ?id .						
							employment:CVPurpose welcome:hasSlot employment:obtainCVCreationInterest .	
							employment:obtainCVCreationInterest welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .
		
:WritePersonalInfoDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Personal Info DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:PersonalInfo rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:PersonalInfo welcome:belongsTo employment:createCV .
						employment:PersonalInfo welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:PersonalInfo welcome:hasDIPStatus welcome:Unknown .
						employment:PersonalInfo welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:PersonalInfo .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

:ConditionalCVPurposeInterestNot
	a bt:Condition ;
	rdfs:label "Condition: CV Purpose and Confirmation Not?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:CVPurpose rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:CVPurpose welcome:DIPId ?id .						
							employment:CVPurpose welcome:hasSlot employment:obtainCVCreationInterest .	
							employment:obtainCVCreationInterest welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "False"))					
						}"""^^xsd:string ;
		]) .

:UpdateCreateInformContactNGOFarewell_GENERIC_DIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO Generic Farewell DIP - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ContactNGOFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:ContactNGOFarewell welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:ContactNGOFarewell welcome:hasSlot welcome:informInabilityAssist .						
						welcome:informInabilityAssist rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informInabilityAssist welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informInabilityAssist welcome:hasTemplateId "TInformInabilityAssist"^^xsd:string .
						welcome:informInabilityAssist welcome:hasInputRDFContents welcome:Unknown .
						welcome:informInabilityAssist welcome:hasTCNAnswer welcome:Unknown .
						welcome:informInabilityAssist welcome:hasStatus welcome:Pending .
						welcome:informInabilityAssist welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informInabilityAssist welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informInabilityAssist welcome:isOptional "false"^^xsd:boolean .
						welcome:informInabilityAssist welcome:dependsOn welcome:Unknown .
						welcome:informInabilityAssist welcome:associatedWith welcome:Unknown .	
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateInformContactNGOFarewell_GENERIC_DIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO Generic Farewell DIP - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOFarewell welcome:hasSlot welcome:informGenericContact .						
						welcome:informGenericContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informGenericContact welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informGenericContact welcome:hasTemplateId "TInformGenericContact"^^xsd:string .
						welcome:informGenericContact welcome:hasInputRDFContents welcome:Unknown .
						welcome:informGenericContact welcome:hasTCNAnswer welcome:Unknown .
						welcome:informGenericContact welcome:hasStatus welcome:Pending .
						welcome:informGenericContact welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informGenericContact welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informGenericContact welcome:isOptional "false"^^xsd:boolean .
						welcome:informGenericContact welcome:dependsOn welcome:Unknown .
						welcome:informGenericContact welcome:associatedWith welcome:Unknown .	
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateInformContactNGOFarewell_GENERIC_DIP2Execution_Part3
	a bt:Update ;
	rdfs:label "Update: Create Inform Contact NGO Generic Farewell DIP - Part 3" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 	
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {								
						welcome:ContactNGOFarewell welcome:hasSlot welcome:informContactNGOFarewell .
						welcome:informContactNGOFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .	
						welcome:informContactNGOFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .	
						welcome:informContactNGOFarewell welcome:hasTemplateId "TInformNormalClosingFarewell"^^xsd:string .
						welcome:informContactNGOFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informContactNGOFarewell welcome:hasTCNAnswer welcome:Unknown .
						welcome:informContactNGOFarewell welcome:hasStatus welcome:Pending .
						welcome:informContactNGOFarewell welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informContactNGOFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informContactNGOFarewell welcome:isOptional "false"^^xsd:boolean .	
						welcome:informContactNGOFarewell welcome:dependsOn welcome:Unknown .
						welcome:informContactNGOFarewell welcome:associatedWith welcome:Unknown .
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:ConditionalPersonalInfoConfirmationYes
	a bt:Condition ;
	rdfs:label "Condition: Personal Info and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:PersonalInfo rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:PersonalInfo welcome:DIPId ?id .						
							employment:PersonalInfo welcome:hasSlot employment:obtainPersonalInfoConfirmation .	
							employment:obtainPersonalInfoConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .

:WriteEducationInformationDIP2Execution 
	a bt:Write ;
	rdfs:label "Write: Education Information DIP in Execution" ;
	bt:query [
			a bt:ConstructQuery ;
			bt:originBase ajan:LocalServicesKnowledge ;
			bt:targetBase ajan:ExecutionKnowledge ;
			bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
				PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
				PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
				PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
				PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
				PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
				CONSTRUCT  {
							employment:EducationInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:EducationInformation welcome:belongsTo employment:createCV .
							employment:EducationInformation welcome:isCurrentDIP "true"^^xsd:boolean .
							employment:EducationInformation welcome:hasDIPStatus welcome:Unknown .
							employment:EducationInformation welcome:hasSlot ?input .
							?input rdf:type ?slotType .
							?input welcome:hasOntologyType ?paramTypeInput .
							?input welcome:hasTemplateId ?templateIdInput .						
							?input welcome:isOptional ?optionalInput .
							?input welcome:hasInputRDFContents welcome:Unknown .
							?input welcome:hasTCNAnswer welcome:Unknown .
							?input welcome:hasStatus welcome:Pending .
							?input welcome:dependsOn ?dependency .
							?input welcome:associatedWith ?association .
							?input welcome:hasNumberAttempts 0 .
							?input welcome:confidenceScore "0.0"^^xsd:float .					
				}
				WHERE { 
						{
							employment:createCV rdf:type service:Service .
							employment:createCV service:describedBy ?process . 
							?process process:hasInput ?input .
							?input process:parameterType ?paramTypeInput .
							?input welcome:hasDIP employment:EducationInformation .
							?input welcome:hasSlotType ?slotType .
							?input welcome:isOptional ?optionalInput .							
							OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
							OPTIONAL {?input welcome:dependsOn ?val}
							OPTIONAL {?input welcome:associatedWith ?asso}
							BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
							BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
						}
				} """^^xsd:string ;
	] .
	
:ConditionalEducationInformationConfirmationYes
	a bt:Condition ;
	rdfs:label "Condition: Education Information Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:EducationInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:EducationInformation welcome:DIPId ?id .						
							employment:EducationInformation welcome:hasSlot employment:obtainEducationalInformationConfirmation .	
							employment:obtainEducationalInformationConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .

:WriteOtherEducationInformationDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Other Language Information DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
			bt:originBase ajan:LocalServicesKnowledge ;
			bt:targetBase ajan:ExecutionKnowledge ;
			bt:sparql """
				PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
				PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
				PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
				PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
				PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
				PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
				PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
				CONSTRUCT  {
							employment:OtherEducationInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:OtherEducationInformation welcome:belongsTo employment:createCV .
							employment:OtherEducationInformation welcome:isCurrentDIP "true"^^xsd:boolean .
							employment:OtherEducationInformation welcome:hasDIPStatus welcome:Unknown .
							employment:OtherEducationInformation welcome:hasSlot ?input .
							?input rdf:type ?slotType .
							?input welcome:hasOntologyType ?paramTypeInput .
							?input welcome:hasTemplateId ?templateIdInput .						
							?input welcome:isOptional ?optionalInput .
							?input welcome:hasInputRDFContents welcome:Unknown .
							?input welcome:hasTCNAnswer welcome:Unknown .
							?input welcome:hasStatus welcome:Pending .
							?input welcome:dependsOn ?dependency .
							?input welcome:associatedWith ?association .
							?input welcome:hasNumberAttempts 0 .
							?input welcome:confidenceScore "0.0"^^xsd:float .					
				}
				WHERE { 
						{
							employment:createCV rdf:type service:Service .
							employment:createCV service:describedBy ?process . 
							?process process:hasInput ?input .
							?input process:parameterType ?paramTypeInput .
							?input welcome:hasDIP employment:OtherEducationInformation .
							?input welcome:hasSlotType ?slotType .
							?input welcome:isOptional ?optionalInput .							
							OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
							OPTIONAL {?input welcome:dependsOn ?val}
							OPTIONAL {?input welcome:associatedWith ?asso}
							BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
							BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
						}
				} """^^xsd:string ;
	] .
	
:ConditionalOtherEducationInformationConfirmationYes
	a bt:Condition ;
	rdfs:label "Condition: Other Education Information Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:OtherEducationInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:OtherEducationInformation welcome:DIPId ?id .						
							employment:OtherEducationInformation welcome:hasSlot employment:obtainMoreEducationalInformationConfirmation .	
							employment:obtainMoreEducationalInformationConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .
		
:WriteLanguageInformationDIP2Execution 
	a bt:Write ;
	rdfs:label "Write: Language Information DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:LanguageInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:LanguageInformation welcome:belongsTo employment:createCV .
						employment:LanguageInformation welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:LanguageInformation welcome:hasDIPStatus welcome:Unknown .
						employment:LanguageInformation welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:LanguageInformation .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalLanguageInformationConfirmationYes
	a bt:Condition ;
	rdfs:label "Condition: Language Information Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:LanguageInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:LanguageInformation welcome:DIPId ?id .						
							employment:LanguageInformation welcome:hasSlot employment:obtainLanguageInformationConfirmation .	
							employment:obtainLanguageInformationConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .
		
:WriteEmploymentInformationDIP2Execution 
	a bt:Write ;
	rdfs:label "Write: Employment Information DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:EmploymentInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:EmploymentInformation welcome:belongsTo employment:createCV .
						employment:EmploymentInformation welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:EmploymentInformation welcome:hasDIPStatus welcome:Unknown .
						employment:EmploymentInformation welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:EmploymentInformation .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalEmploymentInformationConfirmationYes
	a bt:Condition ;
	rdfs:label "Condition: Employment Information Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:EmploymentInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:EmploymentInformation welcome:DIPId ?id .						
							employment:EmploymentInformation welcome:hasSlot employment:obtainEmploymentInformationConfirmation .	
							employment:obtainEmploymentInformationConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .

:UpdateCreateHeaderAppMessageSkillList
	a bt:Update ;
	rdfs:label "Update: Header Message for App - Skill list" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE{
						?headerNameSubject welcome:hasHeaderName ?headerValName . 
						?headerValSubject welcome:hasHeaderValue ?headerVal . 
					}
					INSERT {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?id .					
						welcome:headerMsgType welcome:hasHeaderName "X-Msg-Type" .
						welcome:headerMsgType welcome:hasHeaderValue "CVSkills" .						
					} 
					WHERE { 
						?msg welcome:hasCorrelationID ?correlationID .
						?du rdf:type welcome:DialogueUser .
						?du welcome:hasUserId ?idObject .
						?idObject welcome:hasValue ?id .
						OPTIONAL { ?headerNameSubject welcome:hasHeaderName ?headerValName . }
						OPTIONAL { ?headerValSubject welcome:hasHeaderValue ?headerVal . }
					}
					"""^^xsd:string ;
		]) .
		
:MessageSendSkillNotificationtoApp
	a myWelcome:Message ;
	rdfs:label "Message: Send Skill List to App"^^xsd:string ;
	rdfs:comment "Message: Send Skill List to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:notificationTitle welcome:displaySkillList "true" . 
						}
						WHERE {
							welcome:KMSNotifies ?p ?o .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:WriteSkillInformationDIP2Execution 
	a bt:Write ;
	rdfs:label "Write: Skill Information DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:SkillInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:SkillInformation welcome:belongsTo employment:createCV .
						employment:SkillInformation welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:SkillInformation welcome:hasDIPStatus welcome:Unknown .
						employment:SkillInformation welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:SkillInformation .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalSkillInformation
	a bt:Condition ;
	rdfs:label "Condition: Skill Information Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:SkillInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:SkillInformation welcome:DIPId ?id .					
					}"""^^xsd:string ;
		]) .
		
:WriteOtherInformationDIP2Execution 
	a bt:Write ;
	rdfs:label "Write: Other Information DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:OtherInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:OtherInformation welcome:belongsTo employment:createCV .
						employment:OtherInformation welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:OtherInformation welcome:hasDIPStatus welcome:Unknown .
						employment:OtherInformation welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:OtherInformation .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalOtherInformationConfirmationYes
	a bt:Condition ;
	rdfs:label "Condition: Other Information Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:OtherInformation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:OtherInformation welcome:DIPId ?id .						
							employment:OtherInformation welcome:hasSlot employment:obtainOtherInformationConfirmation .	
							employment:obtainOtherInformationConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .

:MessageSendCVCreatedNotificationtoApp
	a myWelcome:Message ;
	rdfs:label "Message: Send CV Created Notification to App"^^xsd:string ;
	rdfs:comment "Message: Send Send CV Created Notification to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>		
						CONSTRUCT {
							welcome:app welcome:displayCVButton "true" . 
						}
						WHERE {
							?bt welcome:hasActiveDIP ?id . 
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .
		
:WriteCreateCVDocumentDIP2Execution 
	a bt:Write ;
	rdfs:label "Write: Create CV Document DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			CONSTRUCT  {
						employment:CreateCVDocument rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						employment:CreateCVDocument welcome:belongsTo employment:createCV .
						employment:CreateCVDocument welcome:isCurrentDIP "true"^^xsd:boolean .
						employment:CreateCVDocument welcome:hasDIPStatus welcome:Unknown .
						employment:CreateCVDocument welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						employment:createCV rdf:type service:Service .
						employment:createCV service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP employment:CreateCVDocument .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

:ConditionalCreateCVDocumentYes
	a bt:Condition ;
	rdfs:label "Condition: Create CV Complete and Confirmation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							employment:CreateCVDocument rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							employment:CreateCVDocument welcome:DIPId ?id .						
							employment:CreateCVDocument welcome:hasSlot employment:obtainCVCompletionConfirmation .	
							employment:obtainCVCompletionConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))															
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateNormalClosingS7DIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Normal Closing DIP for S7 - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					INSERT {
						welcome:NormalClosingFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:NormalClosingFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:NormalClosingFarewell welcome:hasSlot welcome:informEnd .
						welcome:NormalClosingFarewell welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:informEnd rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informEnd welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI . 
						welcome:informEnd welcome:hasTemplateId "TInformEnd_S7"^^xsd:string .
						welcome:informEnd welcome:hasInputRDFContents welcome:Unknown .
						welcome:informEnd welcome:hasTCNAnswer welcome:Unknown .
						welcome:informEnd welcome:hasStatus welcome:Pending .
						welcome:informEnd welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informEnd welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informEnd welcome:isOptional "false"^^xsd:boolean .	
						welcome:informEnd welcome:dependsOn welcome:Unknown .
						welcome:informEnd welcome:associatedWith welcome:Unknown .
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateNormalClosingS7DIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Normal Closing DIP for S7 - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					INSERT {
						welcome:NormalClosingFarewell welcome:hasSlot welcome:informNormalClosingFarewell .
						welcome:informNormalClosingFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#ConfirmationRequest"^^xsd:anyURI . 
						welcome:informNormalClosingFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:informNormalClosingFarewell welcome:hasTemplateId "TInformNormalClosingFarewell"^^xsd:string .
						welcome:informNormalClosingFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informNormalClosingFarewell welcome:hasTCNAnswer welcome:Unknown .
						welcome:informNormalClosingFarewell welcome:hasStatus welcome:Pending .
						welcome:informNormalClosingFarewell welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informNormalClosingFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informNormalClosingFarewell welcome:isOptional "false"^^xsd:boolean .
						welcome:informNormalClosingFarewell welcome:dependsOn welcome:Unknown .
						welcome:informNormalClosingFarewell welcome:associatedWith welcome:Unknown .	
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
				]) .

#=============================================================================================
#	SpecificSchoolingBT

:HandleEventMasterSchoolingBT
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Executing Schooling BT Master" ;
	ajan:event agents:SchoolingMasterEvent ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
								PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
								PREFIX ajan: <http://www.ajan.de/ajan-ns#>
								PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
								CONSTRUCT {
									welcome:topic welcome:informed "Master" .
								}
								WHERE { 
									welcome:topic welcome:informed "Master" .
								}"""^^xsd:string ;
	] .
	
:ConditionalMasterDIP
	a bt:Condition ;
	rdfs:label "Condition: Is the Master DIP for Schooling ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:ScenarioIntroduction welcome:DIPId ?id .
							
					}"""^^xsd:string ;
		]) .
		
:ConditionalExecuteSchoolDegreeRecognition
	a bt:Condition ;
	rdfs:label "Condition: Inform about School Degree Recognition ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:ScenarioIntroduction welcome:DIPId ?id .						
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagSchoolDegreeRequested .	
							schooling:flagSchoolDegreeRequested welcome:hasTCNAnswer ?reifiedAnswerRequested .
							?reifiedAnswerRequested rdf:type rdf:Statement .
							?reifiedAnswerRequested rdf:subject ?reifiedSubject .
							?reifiedAnswerRequested rdf:predicate ?reifiedPredicate .
							?reifiedAnswerRequested rdf:object ?answerRequested .
							FILTER (STRENDS(str(?answerRequested), "true") || STRENDS(str(?answerRequested), "True") || STRENDS(str(?answerRequested), "Yes") || STRENDS(str(?answerRequested), "yes"))	
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagSchoolDegreeInformed .	
							schooling:flagSchoolDegreeInformed welcome:hasTCNAnswer ?reifiedAnswerInformed .
							?reifiedAnswerInformed rdf:type rdf:Statement .
							?reifiedAnswerInformed rdf:subject ?reifiedSubjectInformed .
							?reifiedAnswerInformed rdf:predicate ?reifiedPredicateInformed .
							?reifiedAnswerInformed rdf:object ?answerRequestedInformed .							
							FILTER (STRENDS(str(?answerRequestedInformed), "Not") || STRENDS(str(?answerRequestedInformed), "not") || STRENDS(str(?answerRequestedInformed), "False") || STRENDS(str(?answerRequestedInformed), "false") || STRENDS(str(?answerRequestedInformed), "No") || STRENDS(str(?answerRequestedInformed), "no"))						
					}"""^^xsd:string ;
		]) .

:WriteSchoolRecognitionRequirementsDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create SchoolRecognitionRequirements DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:SchoolRecognitionRequirements rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:SchoolRecognitionRequirements welcome:belongsTo schooling:diplomaRecognition .
						schooling:SchoolRecognitionRequirements welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:SchoolRecognitionRequirements welcome:hasDIPStatus welcome:Unknown .
						schooling:SchoolRecognitionRequirements welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:SchoolRecognitionRequirements .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

:ConditionalExecuteUDiplomaRecognition
	a bt:Condition ;
	rdfs:label "Condition: Inform about School Degree Recognition ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:ScenarioIntroduction welcome:DIPId ?id .						
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagUDiplomaRequested .	
							schooling:flagUDiplomaRequested welcome:hasTCNAnswer ?reifiedAnswerRequested .
							?reifiedAnswerRequested rdf:type rdf:Statement .
							?reifiedAnswerRequested rdf:subject ?reifiedSubject .
							?reifiedAnswerRequested rdf:predicate ?reifiedPredicate .
							?reifiedAnswerRequested rdf:object ?answerRequested .
							FILTER (STRENDS(str(?answerRequested), "true") || STRENDS(str(?answerRequested), "True") || STRENDS(str(?answerRequested), "Yes") || STRENDS(str(?answerRequested), "yes"))	
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagUDiplomaInformed .	
							schooling:flagUDiplomaInformed welcome:hasTCNAnswer ?reifiedAnswerInformed .
							?reifiedAnswerInformed rdf:type rdf:Statement .
							?reifiedAnswerInformed rdf:subject ?reifiedSubjectInformed .
							?reifiedAnswerInformed rdf:predicate ?reifiedPredicateInformed .
							?reifiedAnswerInformed rdf:object ?answerRequestedInformed .							
							FILTER (STRENDS(str(?answerRequestedInformed), "Not") || STRENDS(str(?answerRequestedInformed), "not") || STRENDS(str(?answerRequestedInformed), "False") || STRENDS(str(?answerRequestedInformed), "false") || STRENDS(str(?answerRequestedInformed), "No") || STRENDS(str(?answerRequestedInformed), "no"))						
					}"""^^xsd:string ;
		]) .
		
:WriteUDegreeRecognitionDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create UDegreeRecognition DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:UDegreeRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:UDegreeRecognition welcome:belongsTo schooling:diplomaRecognition .
						schooling:UDegreeRecognition welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:UDegreeRecognition welcome:hasDIPStatus welcome:Unknown .
						schooling:UDegreeRecognition welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:UDegreeRecognition .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .

:ConditionalAllSubTopicsInformed
	a bt:Condition ;
	rdfs:label "Condition: Were all topics informed ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:ScenarioIntroduction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:ScenarioIntroduction welcome:DIPId ?id .						
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagSchoolDegreeRequested .	
							schooling:flagSchoolDegreeRequested welcome:hasTCNAnswer ?reifiedAnswerRequested_SchoolDegree .
							?reifiedAnswerRequested_SchoolDegree rdf:type rdf:Statement .
							?reifiedAnswerRequested_SchoolDegree rdf:subject ?reifiedSubject_SchoolDegree .
							?reifiedAnswerRequested_SchoolDegree rdf:predicate ?reifiedPredicate_SchoolDegree .
							?reifiedAnswerRequested_SchoolDegree rdf:object ?answerRequested_SchoolDegree .
							FILTER (STRENDS(str(?answerRequested_SchoolDegree), "true") || STRENDS(str(?answerRequested_SchoolDegree), "True") || STRENDS(str(?answerRequested_SchoolDegree), "Yes") || STRENDS(str(?answerRequested_SchoolDegree), "yes"))	
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagSchoolDegreeInformed .	
							schooling:flagSchoolDegreeInformed welcome:hasTCNAnswer ?reifiedAnswerInformed_SchoolDegree .
							?reifiedAnswerInformed_SchoolDegree rdf:type rdf:Statement .
							?reifiedAnswerInformed_SchoolDegree rdf:subject ?reifiedSubjectInformed_SchoolDegree .
							?reifiedAnswerInformed_SchoolDegree rdf:predicate ?reifiedPredicateInformed_SchoolDegree .
							?reifiedAnswerInformed_SchoolDegree rdf:object ?answerRequestedInformed_SchoolDegree .							
							FILTER (STRENDS(str(?answerRequestedInformed_SchoolDegree), "true") || STRENDS(str(?answerRequestedInformed_SchoolDegree), "True") || STRENDS(str(?answerRequestedInformed_SchoolDegree), "Yes") || STRENDS(str(?answerRequestedInformed_SchoolDegree), "yes"))	
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagUDiplomaRequested .	
							schooling:flagUDiplomaRequested welcome:hasTCNAnswer ?reifiedAnswerRequested .
							?reifiedAnswerRequested rdf:type rdf:Statement .
							?reifiedAnswerRequested rdf:subject ?reifiedSubject .
							?reifiedAnswerRequested rdf:predicate ?reifiedPredicate .
							?reifiedAnswerRequested rdf:object ?answerRequested .
							FILTER (STRENDS(str(?answerRequested), "true") || STRENDS(str(?answerRequested), "True") || STRENDS(str(?answerRequested), "Yes") || STRENDS(str(?answerRequested), "yes"))	
							schooling:ScenarioIntroduction welcome:hasSlot schooling:flagUDiplomaInformed .	
							schooling:flagUDiplomaInformed welcome:hasTCNAnswer ?reifiedAnswerInformed .
							?reifiedAnswerInformed rdf:type rdf:Statement .
							?reifiedAnswerInformed rdf:subject ?reifiedSubjectInformed .
							?reifiedAnswerInformed rdf:predicate ?reifiedPredicateInformed .
							?reifiedAnswerInformed rdf:object ?answerRequestedInformed .							
							FILTER (STRENDS(str(?answerRequestedInformed), "true") || STRENDS(str(?answerRequestedInformed), "True") || STRENDS(str(?answerRequestedInformed), "Yes") || STRENDS(str(?answerRequestedInformed), "yes"))		
					}"""^^xsd:string ;
		]) .

:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Normal Closing DIP for S8 - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					INSERT {
						welcome:NormalClosingFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:NormalClosingFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:NormalClosingFarewell welcome:hasSlot welcome:informEnd .
						welcome:NormalClosingFarewell welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:informEnd rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informEnd welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI . 
						welcome:informEnd welcome:hasTemplateId "TInformEnd_S8"^^xsd:string .
						welcome:informEnd welcome:hasInputRDFContents welcome:Unknown .
						welcome:informEnd welcome:hasTCNAnswer welcome:Unknown .
						welcome:informEnd welcome:hasStatus welcome:Pending .
						welcome:informEnd welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informEnd welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informEnd welcome:isOptional "false"^^xsd:boolean .	
						welcome:informEnd welcome:dependsOn welcome:Unknown .
						welcome:informEnd welcome:associatedWith welcome:Unknown .
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
					
:UpdateCreateNormalClosingFarewellS8DIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Normal Closing DIP for S8 - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>					
					INSERT {
						welcome:NormalClosingFarewell welcome:hasSlot welcome:informNormalClosingFarewell .
						welcome:informNormalClosingFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#ConfirmationRequest"^^xsd:anyURI . 
						welcome:informNormalClosingFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:informNormalClosingFarewell welcome:hasTemplateId "TInformNormalClosingFarewell"^^xsd:string .
						welcome:informNormalClosingFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informNormalClosingFarewell welcome:hasTCNAnswer welcome:Unknown .
						welcome:informNormalClosingFarewell welcome:hasStatus welcome:Pending .
						welcome:informNormalClosingFarewell welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informNormalClosingFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informNormalClosingFarewell welcome:isOptional "false"^^xsd:boolean .
						welcome:informNormalClosingFarewell welcome:dependsOn welcome:Unknown .
						welcome:informNormalClosingFarewell welcome:associatedWith welcome:Unknown .	
					} 
					WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateClosingUponFailureUnknownTopicDIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure - Unknown Topic - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ClosingUponFailureFarewell welcome:hasDIPStatus welcome:Unknown .
						welcome:ClosingUponFailureFarewell welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informMessage .
						welcome:informMessage rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informMessage welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informMessage welcome:hasTemplateId "TInformMessage"^^xsd:string . 
						welcome:informMessage welcome:hasInputRDFContents welcome:reifiedReasonSTReasonUnknownTopic .
						welcome:informMessage welcome:dependsOn welcome:Unknown .
						welcome:informMessage welcome:associatedWith welcome:Unknown .
						welcome:informMessage welcome:hasStatus welcome:Pending .
						welcome:informMessage welcome:hasNumberAttempts 0 .
						welcome:informMessage welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informMessage welcome:isOptional "false"^^xsd:boolean .				
						welcome:reifiedReasonSTReasonUnknownTopic rdf:type rdf:Statement .
						welcome:reifiedReasonSTReasonUnknownTopic rdf:subject welcome:subTemplate .
						welcome:reifiedReasonSTReasonUnknownTopic rdf:predicate welcome:isReason .
						welcome:reifiedReasonSTReasonUnknownTopic rdf:object "STReasonNoFoundService"^^xsd:string .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateClosingUponFailureUnknownTopicDIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Closing Upon Failure - Unknown Topic - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ClosingUponFailureFarewell welcome:hasSlot welcome:informClosingFailureFarewell .
						welcome:informClosingFailureFarewell rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informClosingFailureFarewell welcome:hasTemplateId "TInformClosingFailureFarewell"^^xsd:string . 
						welcome:informClosingFailureFarewell welcome:hasInputRDFContents welcome:Unknown .
						welcome:informClosingFailureFarewell welcome:hasStatus welcome:Pending .
						welcome:informClosingFailureFarewell welcome:hasNumberAttempts 0 .
						welcome:informClosingFailureFarewell welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informClosingFailureFarewell welcome:isOptional "false"^^xsd:boolean .
						welcome:informClosingFailureFarewell welcome:dependsOn welcome:Unknown .
						welcome:informClosingFailureFarewell welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:EventProducerInformFirstTopic
	a bt:EventProducer ;
	rdfs:label "EventProducer: Inform first subtopic" ;
	ajan:event agents:InformSubTopicEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:ExecutionKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:subTopic welcome:informed welcome:flagSchoolDegreeRequested .
						}
						WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						}"""^^xsd:string ;
	] .	
	
:UpdateDeleteTopicSelected
	a bt:Update ;
	rdfs:label "Update: Delete Flag of Selected Topic" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE  {
						welcome:topic welcome:informed ?topic .
					}
					WHERE { 		
							welcome:topic welcome:informed ?topic .
					}"""^^xsd:string ;
		]) .
																																			
#=============================================================================================
#	SchoolDegreeSchoolingBT

:EventHandlerSchoolDegreeRecognition
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Executing School Degree Recognition Subtopic" ;
	ajan:event agents:InformSubTopicEvent ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
								PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
								PREFIX ajan: <http://www.ajan.de/ajan-ns#>
								PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
								CONSTRUCT {
									welcome:subTopic welcome:informed welcome:flagSchoolDegreeRequested .
								}
								WHERE { 
									welcome:subTopic welcome:informed welcome:flagSchoolDegreeRequested .
								}"""^^xsd:string ;
	] .

:ConditionalDocumentAssistance_OtherORContactNGOSubTopicORDeadlineKnowORCheckDocApp_Yes  
	a bt:Condition ;
	rdfs:label "Condition: Not Assistance or Contact NGO  or DeadlineKnowledge or Doc Appointment Yes?" ; 
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:DocumentAssistance rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:DocumentAssistance welcome:DIPId ?id .						
								schooling:DocumentAssistance welcome:hasSlot schooling:obtainNGOAssistance .	
								schooling:obtainNGOAssistance welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								welcome:ContactNGOSubTopic rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:ContactNGOSubTopic welcome:DIPId ?id .						
								welcome:ContactNGOSubTopic welcome:hasSlot welcome:obtainContinue .	
								welcome:obtainContinue welcome:hasTCNAnswer ?reifiedAnswerNGO .
								?reifiedAnswerNGO rdf:type rdf:Statement .
								?reifiedAnswerNGO rdf:subject ?reifiedSubjectNGO .
								?reifiedAnswerNGO rdf:predicate ?reifiedPredicateNGO .
								?reifiedAnswerNGO rdf:object ?answerNGO .
								FILTER (STRENDS(str(?answerNGO), "true") || STRENDS(str(?answerNGO), "True") || STRENDS(str(?answerNGO), "Yes") || STRENDS(str(?answerNGO), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:DeadlineKnowledge rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:DeadlineKnowledge welcome:DIPId ?id .						
								schooling:DeadlineKnowledge welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswerDeadline .
								?reifiedAnswerDeadline rdf:type rdf:Statement .
								?reifiedAnswerDeadline rdf:subject ?reifiedSubjectDeadline .
								?reifiedAnswerDeadline rdf:predicate ?reifiedPredicateDeadline .
								?reifiedAnswerDeadline rdf:object ?answerDeadline .
								FILTER (STRENDS(str(?answerDeadline), "true") || STRENDS(str(?answerDeadline), "True") || STRENDS(str(?answerDeadline), "Yes") || STRENDS(str(?answerDeadline), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:CheckDocumentsAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:CheckDocumentsAppointment welcome:DIPId ?id .						
								schooling:CheckDocumentsAppointment welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswerAppointment .
								?reifiedAnswerAppointment rdf:type rdf:Statement .
								?reifiedAnswerAppointment rdf:subject ?reifiedSubjectAppointment .
								?reifiedAnswerAppointment rdf:predicate ?reifiedPredicateAppointment .
								?reifiedAnswerAppointment rdf:object ?answerAppointment .
								FILTER (STRENDS(str(?answerAppointment), "true") || STRENDS(str(?answerAppointment), "True") || STRENDS(str(?answerAppointment), "Yes") || STRENDS(str(?answerAppointment), "yes"))	
							}
					}"""^^xsd:string ;
		]) .

:MessageSchoolDegreeRecognitionInformed
	a myWelcome:Message ;
	rdfs:label "Message: Send to KMS - School Degree Recognition SubTopic Informed"^^xsd:string ;
	rdfs:comment "Message: Send to KMS - School Degree Recognition SubTopic Informed"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle;charset=UTF-8" 
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "text/plain"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
						CONSTRUCT  {
							welcome:agent welcome:informed welcome:flagSchoolDegreeRequested .
						}
						WHERE {							
							?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
					welcome:KMS welcome:hasCoreNotification ?requestURI .
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .

:ConditionalSchoolRecogReq_YesORSchoolCertifiDocReq_Yes
	a bt:Condition ;
	rdfs:label "Condition: School Recog Requirements or School Certificate Doc Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:SchoolRecognitionRequirements rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:SchoolRecognitionRequirements welcome:DIPId ?id .						
								schooling:SchoolRecognitionRequirements welcome:hasSlot schooling:obtainLeavingCertificate .	
								schooling:obtainLeavingCertificate welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:SchoolCertificateDocumentRequirement rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:SchoolCertificateDocumentRequirement welcome:DIPId ?id .						
								schooling:SchoolCertificateDocumentRequirement welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
					}"""^^xsd:string ;
		]) .
		
:WriteFinishedClassesDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create FinishedClasses DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:FinishedClasses rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:FinishedClasses welcome:belongsTo schooling:diplomaRecognition .
						schooling:FinishedClasses welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:FinishedClasses welcome:hasDIPStatus welcome:Unknown .
						schooling:FinishedClasses welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:FinishedClasses .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalSchoolRecognitionRequirements_Not
	a bt:Condition ;
	rdfs:label "Condition: School Recognition Requirements Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:SchoolRecognitionRequirements rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:SchoolRecognitionRequirements welcome:DIPId ?id .						
							schooling:SchoolRecognitionRequirements welcome:hasSlot schooling:obtainLeavingCertificate .	
							schooling:obtainLeavingCertificate welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))							
					}"""^^xsd:string ;
		]) .
		
:WriteGettingSchoolCertificateDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create GettingSchoolCertificate DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:GettingSchoolCertificate rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:GettingSchoolCertificate welcome:belongsTo schooling:diplomaRecognition .
						schooling:GettingSchoolCertificate welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:GettingSchoolCertificate welcome:hasDIPStatus welcome:Unknown .
						schooling:GettingSchoolCertificate welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:GettingSchoolCertificate .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalFinishedClassesUnder12
	a bt:Condition ;
	rdfs:label "Condition: FinishedClasses Under 12?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:FinishedClasses rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:FinishedClasses welcome:DIPId ?id .						
							schooling:FinishedClasses welcome:hasSlot schooling:obtainNumberFinishedClasses .	
							schooling:obtainNumberFinishedClasses welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER(xsd:integer(?answer) < 12)						
					}"""^^xsd:string ;
		]) .
		
:WriteSchoolCertificateRecognitionDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create SchoolCertificateRecognition DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:SchoolCertificateRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:SchoolCertificateRecognition welcome:belongsTo schooling:diplomaRecognition .
						schooling:SchoolCertificateRecognition welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:SchoolCertificateRecognition welcome:hasDIPStatus welcome:Unknown .
						schooling:SchoolCertificateRecognition welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:SchoolCertificateRecognition .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalFinishedClassesOver12
	a bt:Condition ;
	rdfs:label "Condition: Finished Classes Over 12?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:FinishedClasses rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:FinishedClasses welcome:DIPId ?id .						
							schooling:FinishedClasses welcome:hasSlot schooling:obtainNumberFinishedClasses .	
							schooling:obtainNumberFinishedClasses welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER(xsd:integer(?answer) >= 12)	
					}"""^^xsd:string ;
		]) .
		
:WriteHighSchoolRecognitionDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create HighSchoolRecognition DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:HighSchoolRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:HighSchoolRecognition welcome:belongsTo schooling:diplomaRecognition .
						schooling:HighSchoolRecognition welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:HighSchoolRecognition welcome:hasDIPStatus welcome:Unknown .
						schooling:HighSchoolRecognition welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:HighSchoolRecognition .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalGettingSchoolCertificate_Yes
	a bt:Condition ;
	rdfs:label "Condition: Getting School Certificate Yes ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:GettingSchoolCertificate rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:GettingSchoolCertificate welcome:DIPId ?id .						
							schooling:GettingSchoolCertificate welcome:hasSlot schooling:obtainGettingCertificate .	
							schooling:obtainGettingCertificate welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))		
					}"""^^xsd:string ;
		]) .
		
:WriteSchoolCertificateDocumentRequirementDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create SchoolCertificateDocumentRequirement DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:SchoolCertificateDocumentRequirement rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:SchoolCertificateDocumentRequirement welcome:belongsTo schooling:diplomaRecognition .
						schooling:SchoolCertificateDocumentRequirement welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:SchoolCertificateDocumentRequirement welcome:hasDIPStatus welcome:Unknown .
						schooling:SchoolCertificateDocumentRequirement welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:SchoolCertificateDocumentRequirement .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalGetCertificateORDocumentRequirementORCertCopiesORTransOpt_Otherwise	
	a bt:Condition ;
	rdfs:label "Condition: Get School Certificate or Doc Requi. or Get Original Copy or Certified Copy or Translation Option Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:GettingSchoolCertificate rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:GettingSchoolCertificate welcome:DIPId ?id .						
								schooling:GettingSchoolCertificate welcome:hasSlot schooling:obtainGettingCertificate .	
								schooling:obtainGettingCertificate welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:SchoolCertificateDocumentRequirement rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:SchoolCertificateDocumentRequirement welcome:DIPId ?id .						
								schooling:SchoolCertificateDocumentRequirement welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:GettingOriginalCopy rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:GettingOriginalCopy welcome:DIPId ?id .						
								schooling:GettingOriginalCopy welcome:hasSlot schooling:obtainGettingOriginalCopy .	
								schooling:obtainGettingOriginalCopy welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:CertifiedCopies rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:CertifiedCopies welcome:DIPId ?id .						
								schooling:CertifiedCopies welcome:hasSlot schooling:obtainCertifiedCopiesConfirmation .	
								schooling:obtainCertifiedCopiesConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:DocTranslationOptions rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:DocTranslationOptions welcome:DIPId ?id .						
								schooling:DocTranslationOptions welcome:hasSlot schooling:obtainUsefulness .	
								schooling:obtainUsefulness welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
					}"""^^xsd:string ;
	]) .
	
:ConditionalHighSchoolRecogORSchoolCertiRecog_Otherwise
	a bt:Condition ;
	rdfs:label "Condition: High School or School Certificate Recognition Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:HighSchoolRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:HighSchoolRecognition welcome:DIPId ?id .						
								schooling:HighSchoolRecognition welcome:hasSlot schooling:obtainExistingCV .	
								schooling:obtainExistingCV welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:SchoolCertificateRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:SchoolCertificateRecognition welcome:DIPId ?id .						
								schooling:SchoolCertificateRecognition welcome:hasSlot schooling:obtainExistingCV .	
								schooling:obtainExistingCV welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
					}"""^^xsd:string ;
	]) .
		
:WriteCVAssistanceDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create CVAssistance DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:CVAssistance rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:CVAssistance welcome:belongsTo schooling:diplomaRecognition .
						schooling:CVAssistance welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:CVAssistance welcome:hasDIPStatus welcome:Unknown .
						schooling:CVAssistance welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:CVAssistance .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalCVAssistance_Yes
	a bt:Condition ;
	rdfs:label "Condition: CV Assistance Yes ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:CVAssistance rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:CVAssistance welcome:DIPId ?id .						
							schooling:CVAssistance welcome:hasSlot schooling:obtainCVAssistance .	
							schooling:obtainCVAssistance welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))		
					}"""^^xsd:string ;
		]) .
		
:WriteCVCreationProcessDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create CVCreationProcess DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:CVCreationProcess rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:CVCreationProcess welcome:belongsTo schooling:diplomaRecognition .
						schooling:CVCreationProcess welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:CVCreationProcess welcome:hasDIPStatus welcome:Unknown .
						schooling:CVCreationProcess welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:CVCreationProcess .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalCVProcessORHighSchoolORSchoolCert_YesORCVAssistance_Not
	a bt:Condition ;
	rdfs:label "Condition: CV Process or High School Recog or School Cert Recog Yes? or CV Assistance Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:CVCreationProcess rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:CVCreationProcess welcome:DIPId ?id .						
								schooling:CVCreationProcess welcome:hasSlot schooling:obtainCVAssistanceConfirmation .	
								schooling:obtainCVAssistanceConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:CVAssistance rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:CVAssistance welcome:DIPId ?id .						
								schooling:CVAssistance welcome:hasSlot schooling:obtainCVAssistance .	
								schooling:obtainCVAssistance welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:HighSchoolRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:HighSchoolRecognition welcome:DIPId ?id .						
								schooling:HighSchoolRecognition welcome:hasSlot schooling:obtainExistingCV .	
								schooling:obtainExistingCV welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:SchoolCertificateRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:SchoolCertificateRecognition welcome:DIPId ?id .						
								schooling:SchoolCertificateRecognition welcome:hasSlot schooling:obtainExistingCV .	
								schooling:obtainExistingCV welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
					}"""^^xsd:string ;
		]) .
		
:WriteOriginalCopyCertificateDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create OriginalCopyCertificate DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:OriginalCopyCertificate rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:OriginalCopyCertificate welcome:belongsTo schooling:diplomaRecognition .
						schooling:OriginalCopyCertificate welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:OriginalCopyCertificate welcome:hasDIPStatus welcome:Unknown .
						schooling:OriginalCopyCertificate welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:OriginalCopyCertificate .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalOriginalCopyCertificate_YesOROriginalCopyDocumentRequirement_Yes
	a bt:Condition ;
	rdfs:label "Condition: Org Copy Certificate or Org Copy Doc Req. Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:OriginalCopyCertificate rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:OriginalCopyCertificate welcome:DIPId ?id .						
								schooling:OriginalCopyCertificate welcome:hasSlot schooling:obtainOriginalCopy .	
								schooling:obtainOriginalCopy welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:OriginalCopyDocumentRequirement rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:OriginalCopyDocumentRequirement welcome:DIPId ?id .						
								schooling:OriginalCopyDocumentRequirement welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
					}"""^^xsd:string ;
		]) .
		
:WriteDocumentTranslationDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create DocumentTranslation DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:DocumentTranslation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:DocumentTranslation welcome:belongsTo schooling:diplomaRecognition .
						schooling:DocumentTranslation welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:DocumentTranslation welcome:hasDIPStatus welcome:Unknown .
						schooling:DocumentTranslation welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:DocumentTranslation .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalOriginalCopyCertificate_Otherwise
	a bt:Condition ;
	rdfs:label "Condition: Original Copy Certificate Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:OriginalCopyCertificate rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:OriginalCopyCertificate welcome:DIPId ?id .						
							schooling:OriginalCopyCertificate welcome:hasSlot schooling:obtainOriginalCopy .	
							schooling:obtainOriginalCopy welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
					}"""^^xsd:string ;
		]) .
		
:WriteGettingOriginalCopyDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create GettingOriginalCopy DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:GettingOriginalCopy rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:GettingOriginalCopy welcome:belongsTo schooling:diplomaRecognition .
						schooling:GettingOriginalCopy welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:GettingOriginalCopy welcome:hasDIPStatus welcome:Unknown .
						schooling:GettingOriginalCopy welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:GettingOriginalCopy .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalGettingOriginalCopy_Yes
	a bt:Condition ;
	rdfs:label "Condition: Getting Original Copy Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {						
							?bt welcome:hasActiveDIP ?id . 
							schooling:GettingOriginalCopy rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:GettingOriginalCopy welcome:DIPId ?id .						
							schooling:GettingOriginalCopy welcome:hasSlot schooling:obtainGettingOriginalCopy .	
							schooling:obtainGettingOriginalCopy welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))							
					}"""^^xsd:string ;
		]) .
		
:WriteOriginalCopyDocumentRequirementDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create OriginalCopyDocumentRequirement DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:OriginalCopyDocumentRequirement rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:OriginalCopyDocumentRequirement welcome:belongsTo schooling:diplomaRecognition .
						schooling:OriginalCopyDocumentRequirement welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:OriginalCopyDocumentRequirement welcome:hasDIPStatus welcome:Unknown .
						schooling:OriginalCopyDocumentRequirement welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:OriginalCopyDocumentRequirement .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalDocumentTranslation_Yes
	a bt:Condition ;
	rdfs:label "Condition: Document Translation Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {	
							?bt welcome:hasActiveDIP ?id . 
							schooling:DocumentTranslation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:DocumentTranslation welcome:DIPId ?id .						
							schooling:DocumentTranslation welcome:hasSlot schooling:obtainCertificateTranslation .	
							schooling:obtainCertificateTranslation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
					}"""^^xsd:string ;
		]) .
		
:WriteCertifiedCopiesDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create CertifiedCopies DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:CertifiedCopies rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:CertifiedCopies welcome:belongsTo schooling:diplomaRecognition .
						schooling:CertifiedCopies welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:CertifiedCopies welcome:hasDIPStatus welcome:Unknown .
						schooling:CertifiedCopies welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:CertifiedCopies .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalDocumentTranslation_Otherwise
	a bt:Condition ;
	rdfs:label "Condition: Document Translation Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:DocumentTranslation rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:DocumentTranslation welcome:DIPId ?id .						
							schooling:DocumentTranslation welcome:hasSlot schooling:obtainCertificateTranslation .	
							schooling:obtainCertificateTranslation welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
					}"""^^xsd:string ;
		]) .
		
:WriteDocTranslationOptionsDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create DocTranslationOptions DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:DocTranslationOptions rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:DocTranslationOptions welcome:belongsTo schooling:diplomaRecognition .
						schooling:DocTranslationOptions welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:DocTranslationOptions welcome:hasDIPStatus welcome:Unknown .
						schooling:DocTranslationOptions welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:DocTranslationOptions .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalCertifiedCopiesORDocTranslationOpt_Yes
	a bt:Condition ;
	rdfs:label "Condition: Doc Translation Opt Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:CertifiedCopies rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:CertifiedCopies welcome:DIPId ?id .						
								schooling:CertifiedCopies welcome:hasSlot schooling:obtainCertifiedCopyNeedConfirmation .	
								schooling:obtainCertifiedCopyNeedConfirmation welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:DocTranslationOptions rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:DocTranslationOptions welcome:DIPId ?id .						
								schooling:DocTranslationOptions welcome:hasSlot schooling:obtainUsefulness .	
								schooling:obtainUsefulness welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
							}
					}"""^^xsd:string ;
		]) .
		
:WriteCertifiedCopiesAvailabilityDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create CertifiedCopiesAvailability DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:CertifiedCopiesAvailability rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:CertifiedCopiesAvailability welcome:belongsTo schooling:diplomaRecognition .
						schooling:CertifiedCopiesAvailability welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:CertifiedCopiesAvailability welcome:hasDIPStatus welcome:Unknown .
						schooling:CertifiedCopiesAvailability welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:CertifiedCopiesAvailability .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalCertifiedCopiesAvailability_Yes
	a bt:Condition ;
	rdfs:label "Condition: Available Certified Copy Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:CertifiedCopiesAvailability rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:CertifiedCopiesAvailability welcome:DIPId ?id .						
							schooling:CertifiedCopiesAvailability welcome:hasSlot schooling:obtainAvailableCertifiedCopy .	
							schooling:obtainAvailableCertifiedCopy welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
					}"""^^xsd:string ;
		]) .

:WriteUrgencyDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create Urgency DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:Urgency rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:Urgency welcome:belongsTo schooling:diplomaRecognition .
						schooling:Urgency welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:Urgency welcome:hasDIPStatus welcome:Unknown .
						schooling:Urgency welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:Urgency .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalCertifiedCopiesAvailability_Otherwise
	a bt:Condition ;
	rdfs:label "Condition: Avalable Certified Copies Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:CertifiedCopiesAvailability rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:CertifiedCopiesAvailability welcome:DIPId ?id .						
							schooling:CertifiedCopiesAvailability welcome:hasSlot schooling:obtainAvailableCertifiedCopy .	
							schooling:obtainAvailableCertifiedCopy welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
					}"""^^xsd:string ;
		]) .
		
:WriteDocumentAssistanceDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create DocumentAssistance DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:DocumentAssistance rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:DocumentAssistance welcome:belongsTo schooling:diplomaRecognition .
						schooling:DocumentAssistance welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:DocumentAssistance welcome:hasDIPStatus welcome:Unknown .
						schooling:DocumentAssistance welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:DocumentAssistance .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalUrgency_Yes
	a bt:Condition ;
	rdfs:label "Condition: Is Urgent Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:Urgency rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:Urgency welcome:DIPId ?id .						
							schooling:Urgency welcome:hasSlot schooling:obtainUrgency .	
							schooling:obtainUrgency welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
					}"""^^xsd:string ;
		]) .
		
:WriteDeadlineKnowledgeDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create DeadlineKnowledge DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:DeadlineKnowledge rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:DeadlineKnowledge welcome:belongsTo schooling:diplomaRecognition .
						schooling:DeadlineKnowledge welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:DeadlineKnowledge welcome:hasDIPStatus welcome:Unknown .
						schooling:DeadlineKnowledge welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:DeadlineKnowledge .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalUrgency_Otherwise
	a bt:Condition ;
	rdfs:label "Condition: Is Urgent Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:Urgency rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:Urgency welcome:DIPId ?id .						
							schooling:Urgency welcome:hasSlot schooling:obtainUrgency .	
							schooling:obtainUrgency welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
					}"""^^xsd:string ;
		]) .
		
:WriteCheckDocumentsAppointmentDIP2Execution
	a bt:Write ;
	rdfs:label "Write: Create CheckDocumentsAppointment DIP in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:LocalServicesKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
			PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
			PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
			PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
			PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
			PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
			PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
			PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
			PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
			PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
						
			CONSTRUCT  {
						schooling:CheckDocumentsAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						schooling:CheckDocumentsAppointment welcome:belongsTo schooling:diplomaRecognition .
						schooling:CheckDocumentsAppointment welcome:isCurrentDIP "true"^^xsd:boolean .
						schooling:CheckDocumentsAppointment welcome:hasDIPStatus welcome:Unknown .
						schooling:CheckDocumentsAppointment welcome:hasSlot ?input .
						?input rdf:type ?slotType .
						?input welcome:hasOntologyType ?paramTypeInput .
						?input welcome:hasTemplateId ?templateIdInput .						
						?input welcome:isOptional ?optionalInput .
						?input welcome:hasInputRDFContents welcome:Unknown .
						?input welcome:hasTCNAnswer welcome:Unknown .
						?input welcome:hasStatus welcome:Pending .
						?input welcome:dependsOn ?dependency .
						?input welcome:associatedWith ?association .
						?input welcome:hasNumberAttempts 0 .
						?input welcome:confidenceScore "0.0"^^xsd:float .					
			}
			WHERE { 
					{
						schooling:diplomaRecognition rdf:type service:Service .
						schooling:diplomaRecognition service:describedBy ?process . 
						?process process:hasInput ?input .
						?input process:parameterType ?paramTypeInput .
						?input welcome:hasDIP schooling:CheckDocumentsAppointment .
						?input welcome:hasSlotType ?slotType .
						?input welcome:isOptional ?optionalInput .							
						OPTIONAL {?input welcome:hasTemplateId ?templateIdInput }
						OPTIONAL {?input welcome:dependsOn ?val}
						OPTIONAL {?input welcome:associatedWith ?asso}
						BIND(IF(EXISTS{?input welcome:dependsOn ?val}, ?val, welcome:Unknown) as ?dependency)
						BIND(IF(EXISTS{?input welcome:associatedWith ?asso}, ?asso, welcome:Unknown) as ?association).	
					}
			} """^^xsd:string ;
	] .
	
:ConditionalDocumentAssistance_Yes
	a bt:Condition ;
	rdfs:label "Condition: Document Assistance Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:DocumentAssistance rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:DocumentAssistance welcome:DIPId ?id .						
							schooling:DocumentAssistance welcome:hasSlot schooling:obtainNGOAssistance .	
							schooling:obtainNGOAssistance welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateContactNGOSubTopicDIP2Execution_Part1
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO SubTopic - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					PREFIX wex: <http://welcome.org/integration/pipeline/exception#>
					INSERT {
						welcome:ContactNGOSubTopic rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:ContactNGOSubTopic welcome:hasDIPStatus welcome:Unknown .
						welcome:ContactNGOSubTopic welcome:isCurrentDIP "true"^^xsd:boolean .
						welcome:ContactNGOSubTopic welcome:hasSlot welcome:informInabilityAssist .
						welcome:informInabilityAssist rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informInabilityAssist welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informInabilityAssist welcome:hasTemplateId "TInformInabilityAssist"^^xsd:string . 
						welcome:informInabilityAssist welcome:hasInputRDFContents welcome:Unknown .
						welcome:informInabilityAssist welcome:dependsOn welcome:Unknown .
						welcome:informInabilityAssist welcome:associatedWith welcome:Unknown .
						welcome:informInabilityAssist welcome:hasStatus welcome:Pending .
						welcome:informInabilityAssist welcome:hasNumberAttempts 0 .
						welcome:informInabilityAssist welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informInabilityAssist welcome:isOptional "false"^^xsd:boolean .		
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:UpdateCreateContactNGOSubTopicDIP2Execution_Part2
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO SubTopic - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOSubTopic welcome:hasSlot welcome:informGenericContact .
						welcome:informGenericContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informGenericContact welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:informGenericContact welcome:hasTemplateId "TInformGenericContact"^^xsd:string . 
						welcome:informGenericContact welcome:hasInputRDFContents welcome:Unknown .
						welcome:informGenericContact welcome:hasStatus welcome:Pending .
						welcome:informGenericContact welcome:hasNumberAttempts 0 .
						welcome:informGenericContact welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informGenericContact welcome:isOptional "false"^^xsd:boolean .
						welcome:informGenericContact welcome:dependsOn welcome:Unknown .
						welcome:informGenericContact welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .
		
:UpdateCreateContactNGOSubTopicDIP2Execution_Part3
	a bt:Update ;
	rdfs:label "Update: Create Contact NGO SubTopic - Part 3" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 										
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#> 
					INSERT {
						welcome:ContactNGOSubTopic welcome:hasSlot welcome:obtainContinue .
						welcome:obtainContinue rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:obtainContinue welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI .
						welcome:obtainContinue welcome:hasTemplateId "TObtainContinue"^^xsd:string . 
						welcome:obtainContinue welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainContinue welcome:hasStatus welcome:Pending .
						welcome:obtainContinue welcome:hasNumberAttempts 0 .
						welcome:obtainContinue welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainContinue welcome:isOptional "false"^^xsd:boolean .
						welcome:obtainContinue welcome:dependsOn welcome:Unknown .
						welcome:obtainContinue welcome:associatedWith welcome:Unknown .
					} WHERE { 
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
		]) .

:ConditionalContactNGOSubTopicORDeadlineKnowledgeORCheckDocAppoint_Otherwise
	a bt:Condition ;
	rdfs:label "Condition: Contact NGO Subtopic or Deadline Knowledge or Appointment Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							{
								?bt welcome:hasActiveDIP ?id . 
								welcome:ContactNGOSubTopic rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								welcome:ContactNGOSubTopic welcome:DIPId ?id .						
								welcome:ContactNGOSubTopic welcome:hasSlot welcome:obtainContinue .	
								welcome:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:DeadlineKnowledge rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:DeadlineKnowledge welcome:DIPId ?id .						
								schooling:DeadlineKnowledge welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
							UNION
							{
								?bt welcome:hasActiveDIP ?id . 
								schooling:CheckDocumentsAppointment rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
								schooling:CheckDocumentsAppointment welcome:DIPId ?id .						
								schooling:CheckDocumentsAppointment welcome:hasSlot schooling:obtainContinue .	
								schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
								?reifiedAnswer rdf:type rdf:Statement .
								?reifiedAnswer rdf:subject ?reifiedSubject .
								?reifiedAnswer rdf:predicate ?reifiedPredicate .
								?reifiedAnswer rdf:object ?answer .		
								FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
							}
					}"""^^xsd:string ;
		]) .
		
:EventProducerInformSecondTopic
	a bt:EventProducer ;
	rdfs:label "EventProducer: Inform second subtopic" ;
	ajan:event agents:InformSubTopicEvent ;
	bt:content [
					a bt:ConstructQuery ;
					bt:originBase ajan:ExecutionKnowledge;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX ajan: <http://www.ajan.de/ajan-ns#>
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							welcome:subTopic welcome:informed welcome:flagUDiplomaRequested .
						}
						WHERE {
							?dip rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						}"""^^xsd:string ;
	] .	
	
#=============================================================================================
#	UniversityDiplomaRecognitionBT

:EventHandlerUDiplomaRecognition
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Executing U Diploma Recognition Subtopic" ;
	ajan:event agents:InformSubTopicEvent ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:ExecutionKnowledge ;
					bt:sparql """
								PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
								PREFIX ajan: <http://www.ajan.de/ajan-ns#>
								PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
								CONSTRUCT {
									welcome:subTopic welcome:informed welcome:flagUDiplomaRequested .
								}
								WHERE { 
									welcome:subTopic welcome:informed welcome:flagUDiplomaRequested .
								}"""^^xsd:string ;
	] .
	
:ConditionalUDegreeRecognition_Yes
	a bt:Condition ;
	rdfs:label "Condition: University Degree Recognition Yes?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {
							?bt welcome:hasActiveDIP ?id . 
							schooling:UDegreeRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:UDegreeRecognition welcome:DIPId ?id .						
							schooling:UDegreeRecognition welcome:hasSlot schooling:obtainContinue .	
							schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "true") || STRENDS(str(?answer), "True") || STRENDS(str(?answer), "Yes") || STRENDS(str(?answer), "yes"))	
					}"""^^xsd:string ;
		]) .
		
:MessageUniversityDiplomaRecognitionInformed
	a myWelcome:Message ;
	rdfs:label "Message: Send to KMS - University Diploma SubTopic Informed"^^xsd:string ;
	rdfs:comment "Message: Send to KMS - University Diploma SubTopic Informed"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle;charset=UTF-8" 
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "text/plain"
				]
		) ;				
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
						CONSTRUCT  {
							welcome:agent welcome:informed welcome:flagUDiplomaRequested .
						}
						WHERE {							
							?dipName rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:KMS welcome:hasCoreNotification ?requestURI .
				}"""^^xsd:string
	] . 

:ConditionalUDegreeRecognition_Otherwise	
	a bt:Condition ;
	rdfs:label "Condition: University Degree Recognition Not ?" ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX service: <http://www.daml.org/services/owl-s/1.1/Service.owl#>
					PREFIX process: <http://www.daml.org/services/owl-s/1.1/Process.owl#>
					PREFIX ssc: <http://www.ajan.de/behavior/scs-ns#>
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX simulateAppointment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SimulatePhoneAppointmentService.owl#>
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					PREFIX schooling: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/SchoolingCARITAS.owl#>
					ASK
					WHERE {							
							?bt welcome:hasActiveDIP ?id . 
							schooling:UDegreeRecognition rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
							schooling:UDegreeRecognition welcome:DIPId ?id .						
							schooling:UDegreeRecognition welcome:hasSlot schooling:obtainContinue .	
							schooling:obtainContinue welcome:hasTCNAnswer ?reifiedAnswer .
							?reifiedAnswer rdf:type rdf:Statement .
							?reifiedAnswer rdf:subject ?reifiedSubject .
							?reifiedAnswer rdf:predicate ?reifiedPredicate .
							?reifiedAnswer rdf:object ?answer .		
							FILTER (STRENDS(str(?answer), "Not") || STRENDS(str(?answer), "not") || STRENDS(str(?answer), "False") || STRENDS(str(?answer), "false") || STRENDS(str(?answer), "No") || STRENDS(str(?answer), "no"))
					}"""^^xsd:string ;
		]) .
		
#=============================================================================================
# FAQBTBehavior

:EventHandlerRetrievedExternalFAQs
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Receive External FAQ Notification" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#ExternalFAQEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
						CONSTRUCT {
							welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
							?bnode rdf:first ?faq1 .
							?bnode rdf:rest ?restSecondEl .
							?restSecondEl rdf:first ?faq2 . 
							?restSecondEl rdf:rest ?restThirdEl . 
							?restThirdEl rdf:first ?faq3 . 
						}
						WHERE { 		
							welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
							{							
								{
      								OPTIONAL {
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
											?bnode rdf:rest ?restSecondEl .
											?restSecondEl rdf:first ?faq2 .  
											?restSecondEl rdf:rest ?restThirdEl . 
											?restThirdEl rdf:first ?faq3 . 
     							 	}
    							}
								UNION
								{
      								OPTIONAL {
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
											?bnode rdf:rest ?restSecondEl .
											?restSecondEl rdf:first ?faq2 .  
 									} 
    							}
								UNION
								{
      								OPTIONAL { 	
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
									}
								}
						}
					}
					"""^^xsd:string ;
				] .

:EventHandlerRetrievedInternalFAQs
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Receive Internal FAQ Notification" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#InternalFAQEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
						CONSTRUCT {
							welcome:KMSNotifies welcome:FAQRequest "true" .
						}
						WHERE { 
							welcome:KMSNotifies welcome:FAQRequest "true" .
						} 
					"""^^xsd:string ;
				] .
				
:WriteExternalFAQNotifiationToExecution
	a bt:Write ;
	rdfs:label "Write: FAQ Notification in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					CONSTRUCT  {
						welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
						?bnode rdf:first ?faq1 .
						?restSecondEl rdf:first ?faq2 .
						?restThirdEl rdf:first ?faq3 .
					}
					WHERE { 		
							welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
							{							
								{
      								OPTIONAL {
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
											?bnode rdf:rest ?restSecondEl .
											?restSecondEl rdf:first ?faq2 .  
											?restSecondEl rdf:rest ?restThirdEl . 
											?restThirdEl rdf:first ?faq3 . 
     							 	}
    							}
								UNION
								{
      								OPTIONAL {
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
											?bnode rdf:rest ?restSecondEl .
											?restSecondEl rdf:first ?faq2 .  
 									} 
    							}
								UNION
								{
      								OPTIONAL { 	
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
									}
								}
						}
					}"""^^xsd:string ;
	] .

:WriteInternalFAQNotifiationToExecution
	a bt:Write ;
	rdfs:label "Write: Internal FAQ Notification in Execution" ;
	bt:query [
		a bt:ConstructQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:targetBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					CONSTRUCT  {
							welcome:KMSNotifies welcome:FAQRequest "true" .
					}
					WHERE {
							welcome:KMSNotifies welcome:FAQRequest "true" .
					}"""^^xsd:string ;
	] .
	
:UpdateDeleteExternalFAQNotificationAgentKnowledge
	a bt:Update ;
	rdfs:label "Update: Delete External FAQ Notification from LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE  {
						welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
						?bnode rdf:first ?faq1 .
						?bnode rdf:rest ?restSecondEl .
						?restSecondEl rdf:first ?faq2 .
						?restSecondEl rdf:rest ?restThirdEl .
						?restThirdEl rdf:first ?faq3 .
					}
					WHERE { 		
							welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
							{							
								{
      								OPTIONAL {
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
											?bnode rdf:rest ?restSecondEl .
											?restSecondEl rdf:first ?faq2 .  
											?restSecondEl rdf:rest ?restThirdEl . 
											?restThirdEl rdf:first ?faq3 . 
     							 	}
    							}
								UNION
								{
      								OPTIONAL {
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
											?bnode rdf:rest ?restSecondEl .
											?restSecondEl rdf:first ?faq2 .  
 									} 
    							}
								UNION
								{
      								OPTIONAL { 	
											welcome:KMSNotifies welcome:ExternalFaqID ?bnode .
											?bnode rdf:first ?faq1 .
									}
								}
						}
					}"""^^xsd:string ;
		]) .

:UpdateDeleteInternalFAQNotificationAgentKnowledge
	a bt:Update ;
	rdfs:label "Update: Delete Internal FAQ Notification from LAKR" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					DELETE{
						welcome:KMSNotifies welcome:FAQRequest ?val .
					}
					WHERE { 
						welcome:KMSNotifies welcome:FAQRequest ?val .
					}
					"""^^xsd:string ;
		]) .
		
#:ConditionInternalFAQ
#	a bt:Condition ;
#	rdfs:label "Condition: Internal FAQ?" ;
#	bt:query ([
#		a bt:AskQuery ;
#		bt:originBase ajan:ExecutionKnowledge ;
#		bt:sparql """
#					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
#					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
#					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
#					ASK
#					WHERE {
#							welcome:KMSNotifies welcome:FAQRequest ?val .													
#					}"""^^xsd:string ;
#		]) .
		
:UpdateCreateFAQDIPinExecution_Part1
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 1" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					INSERT  {
						welcome:FAQ rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#DIP"^^xsd:anyURI .
						welcome:FAQ welcome:hasDIPStatus welcome:Unknown .
						welcome:FAQ welcome:hasSlot welcome:informAnswer .
						welcome:FAQ welcome:isCurrentDIP "true"^^xsd:boolean . 
						welcome:informAnswer rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI .
						welcome:informAnswer welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI . 
						welcome:informAnswer welcome:hasTemplateId "TInformAnswer"^^xsd:string .
						welcome:informAnswer welcome:hasInputRDFContents welcome:Unknown .
						welcome:informAnswer welcome:hasTCNAnswer welcome:Unknown .
						welcome:informAnswer welcome:hasStatus welcome:Pending .
						welcome:informAnswer welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informAnswer welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informAnswer welcome:isOptional "false"^^xsd:boolean .	
						welcome:informAnswer welcome:dependsOn welcome:Unknown .
						welcome:informAnswer welcome:associatedWith welcome:Unknown .
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}
					"""^^xsd:string ;
		]) .	
		
:UpdateCreateFAQDIPinExecution_Part2
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 2" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {											
						welcome:FAQ welcome:hasSlot welcome:obtainSatisfaction .
						welcome:obtainSatisfaction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI . 
						welcome:obtainSatisfaction welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:obtainSatisfaction welcome:hasTemplateId "TObtainSatisfaction"^^xsd:string .
						welcome:obtainSatisfaction welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainSatisfaction welcome:hasTCNAnswer welcome:Unknown .
						welcome:obtainSatisfaction welcome:hasStatus welcome:Pending .
						welcome:obtainSatisfaction welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:obtainSatisfaction welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainSatisfaction welcome:isOptional "false"^^xsd:boolean .
						welcome:obtainSatisfaction welcome:dependsOn welcome:Unknown .
						welcome:obtainSatisfaction welcome:associatedWith welcome:Unknown .	
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}
					"""^^xsd:string ;
		]) .	
		
:UpdateCreateFAQDIPinExecution_Part3
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 3" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {
						welcome:FAQ welcome:hasSlot welcome:informFollowUpAnswer .
						welcome:informFollowUpAnswer rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI . 
						welcome:informFollowUpAnswer welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI . 
						welcome:informFollowUpAnswer welcome:hasTemplateId "TInformAnswer"^^xsd:string .
						welcome:informFollowUpAnswer welcome:hasInputRDFContents welcome:Unknown .
						welcome:informFollowUpAnswer welcome:hasTCNAnswer welcome:Unknown .
						welcome:informFollowUpAnswer welcome:hasStatus welcome:Pending .
						welcome:informFollowUpAnswer welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informFollowUpAnswer welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informFollowUpAnswer welcome:isOptional "false"^^xsd:boolean .
						welcome:informFollowUpAnswer welcome:dependsOn welcome:obtainSatisfaction .
						welcome:informFollowUpAnswer welcome:associatedWith welcome:Unknown .						
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
	]) .

:UpdateCreateFAQDIPinExecution_Part4
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 4" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {						
						welcome:FAQ welcome:hasSlot welcome:obtainFollowUpSatisfaction .
						welcome:obtainFollowUpSatisfaction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI . 
						welcome:obtainFollowUpSatisfaction welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:obtainFollowUpSatisfaction welcome:hasTemplateId "TObtainFollowUpSatisfaction"^^xsd:string .
						welcome:obtainFollowUpSatisfaction welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainFollowUpSatisfaction welcome:hasTCNAnswer welcome:Unknown .
						welcome:obtainFollowUpSatisfaction welcome:hasStatus welcome:Pending .
						welcome:obtainFollowUpSatisfaction welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:obtainFollowUpSatisfaction welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainFollowUpSatisfaction welcome:isOptional "false"^^xsd:boolean .
						welcome:obtainFollowUpSatisfaction welcome:dependsOn welcome:Unknown .
						welcome:obtainFollowUpSatisfaction welcome:associatedWith welcome:Unknown .
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
	]) .
				
:UpdateCreateFAQDIPinExecution_Part5
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 5" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {
						welcome:FAQ welcome:hasSlot welcome:obtainFAQSatisfaction .
						welcome:obtainFAQSatisfaction rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemDemand"^^xsd:anyURI . 
						welcome:obtainFAQSatisfaction welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:obtainFAQSatisfaction welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainFAQSatisfaction welcome:hasTCNAnswer welcome:Unknown .
						welcome:obtainFAQSatisfaction welcome:hasStatus welcome:Pending .
						welcome:obtainFAQSatisfaction welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:obtainFAQSatisfaction welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainFAQSatisfaction welcome:isOptional "false"^^xsd:boolean .
						welcome:obtainFAQSatisfaction welcome:dependsOn welcome:Unknown .
						welcome:obtainFAQSatisfaction welcome:associatedWith welcome:Unknown .						
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
	]) .

:UpdateCreateFAQDIPinExecution_Part6
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 6" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {						
						welcome:FAQ welcome:hasSlot welcome:informInabilityAssist .
						welcome:informInabilityAssist rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI . 
						welcome:informInabilityAssist welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI . 
						welcome:informInabilityAssist welcome:hasTemplateId "TInformInabilityAssist"^^xsd:string .
						welcome:informInabilityAssist welcome:hasInputRDFContents welcome:Unknown .
						welcome:informInabilityAssist welcome:hasTCNAnswer welcome:Unknown .
						welcome:informInabilityAssist welcome:hasStatus welcome:Pending .
						welcome:informInabilityAssist welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informInabilityAssist welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informInabilityAssist welcome:isOptional "false"^^xsd:boolean .
						welcome:informInabilityAssist welcome:dependsOn welcome:obtainSatisfaction,  welcome:obtainFollowUpSatisfaction .
						welcome:informInabilityAssist welcome:associatedWith welcome:Unknown .
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
	]) .
				
:UpdateCreateFAQDIPinExecution_Part7
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 7" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {
						welcome:FAQ welcome:hasSlot welcome:informGenericContact .
						welcome:informGenericContact rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#SystemInfo"^^xsd:anyURI . 
						welcome:informGenericContact welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Template"^^xsd:anyURI . 
						welcome:informGenericContact welcome:hasTemplateId "TInformGenericContact"^^xsd:string .
						welcome:informGenericContact welcome:hasInputRDFContents welcome:Unknown .
						welcome:informGenericContact welcome:hasTCNAnswer welcome:Unknown .
						welcome:informGenericContact welcome:hasStatus welcome:Pending .
						welcome:informGenericContact welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:informGenericContact welcome:confidenceScore "0.0"^^xsd:float .
						welcome:informGenericContact welcome:isOptional "false"^^xsd:boolean .
						welcome:informGenericContact welcome:dependsOn welcome:Unknown .
						welcome:informGenericContact welcome:associatedWith welcome:Unknown .						
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
	]) .

:UpdateCreateFAQDIPinExecution_Part8
	a bt:Update ;
	rdfs:label "Update: FAQ DIP in Execution - Part 8" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:ExecutionKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>			
					INSERT  {						
						welcome:FAQ welcome:hasSlot welcome:obtainContinueInterest .
						welcome:obtainContinueInterest rdf:type "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#ConfirmationRequest"^^xsd:anyURI . 
						welcome:obtainContinueInterest welcome:hasOntologyType "https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#Boolean"^^xsd:anyURI .
						welcome:obtainContinueInterest welcome:hasTemplateId "TObtainContinueInterest"^^xsd:string .
						welcome:obtainContinueInterest welcome:hasInputRDFContents welcome:Unknown .
						welcome:obtainContinueInterest welcome:hasTCNAnswer welcome:Unknown .
						welcome:obtainContinueInterest welcome:hasStatus welcome:Pending .
						welcome:obtainContinueInterest welcome:hasNumberAttempts "0"^^xsd:int .
						welcome:obtainContinueInterest welcome:confidenceScore "0.0"^^xsd:float .
						welcome:obtainContinueInterest welcome:isOptional "false"^^xsd:boolean .
						welcome:obtainContinueInterest welcome:dependsOn welcome:Unknown .
						welcome:obtainContinueInterest welcome:associatedWith welcome:Unknown .
					}
					WHERE {
						?agent rdf:type ajan:Agent .
					}"""^^xsd:string ;
	]) .

#:ConditionExternalFAQ
#	a bt:Condition ;
#	rdfs:label "Condition: External FAQ?" ;
#	bt:query ([
#		a bt:AskQuery ;
#		bt:originBase ajan:ExecutionKnowledge ;
#		bt:sparql """
#					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
#					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
#					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
#					ASK
#					WHERE {	
#							welcome:KMSNotifies welcome:ExternalFaqID ?faqID .							
#					}"""^^xsd:string ;
#		]) .
		
:UpdateCreateHeaderAppMessageFAQSuggestion
	a bt:Update ;
	rdfs:label "Update: Header Message for App - FAQ Suggestion" ;
	bt:query ([
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
					PREFIX employment: <http://localhost:8060/welcome/integration/coordination/ajan/agents/welcome/services/CreateCV.owl#>
					DELETE{
						?headerNameSubject welcome:hasHeaderName ?headerValName . 
						?headerValSubject welcome:hasHeaderValue ?headerVal . 
					}
					INSERT {
						welcome:headerCorrelation welcome:hasHeaderName "X-Correlation-ID" .
						welcome:headerCorrelation welcome:hasHeaderValue ?correlationID .
						welcome:headerUserID welcome:hasHeaderName "X-User-ID" .
						welcome:headerUserID welcome:hasHeaderValue ?id .					
						welcome:headerMsgType welcome:hasHeaderName "X-Msg-Type" .
						welcome:headerMsgType welcome:hasHeaderValue "FAQSuggestion" .
					} 
					WHERE { 
						?msg welcome:hasCorrelationID ?correlationID .
						?du rdf:type welcome:DialogueUser .
						?du welcome:hasUserId ?idObject .
						?idObject welcome:hasValue ?id .
						OPTIONAL { ?headerNameSubject welcome:hasHeaderName ?headerValName . }
						OPTIONAL { ?headerValSubject welcome:hasHeaderValue ?headerVal . }
					}
					"""^^xsd:string ;
		]) .
				
:MessageSendFoundFAQtoApp
	a myWelcome:Message ;
	rdfs:label "Message: Send FAQ ID to App"^^xsd:string ;
	rdfs:comment "Message: Send FAQ ID to App"^^xsd:string ;
	bt:targetBase ajan:ExecutionKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?fieldValue
				WHERE {
						?headerName welcome:hasHeaderName ?hdrName .
						?headerName welcome:hasHeaderValue ?fieldValue .					
				}"""^^xsd:string
		] ;	
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;			
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:ExecutionKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
						CONSTRUCT  {
							welcome:notificationTitle welcome:ExternalFAQ ?bnode .
							?bnode welcome:FAQId ?faq1 .
						}
						WHERE {							
							?bnode rdf:first ?faq1 .
						}"""^^xsd:string
		  ]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentNotification") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .
	
#=============================================================================================
# ShutdownBTBehavior

:EventHandlerShutdown
	a bt:HandleEvent ;
	rdfs:label "EventHandler: Shutdown Request" ;
	bt:event <http://localhost:8090/rdf4j/repositories/agents#AgentShutdownEvent> ;
	bt:validate [
					a bt:ConstructQuery ;
					bt:targetBase ajan:AgentKnowledge ;
					bt:sparql """
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							?s ?p ?o .
						}
						WHERE { 
							?s ?p ?o . 			
						} 
					"""^^xsd:string ;
				] .

:ConditionAgentRunningBT
	a bt:Condition ;
	rdfs:label "Condition: Agent Runs a BT? " ;
	bt:query ([
		a bt:AskQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					ASK
					WHERE {
						?agent welcome:hasBTRunning "true"^^xsd:boolean .
						?agent rdf:type ajan:Agent .							
					}"""^^xsd:string ;
		]) .
		
:UpdateAgentRunningYes
	a bt:Update ;
	rdfs:label "Update: Not Kill the Agent" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE {
						?agent welcome:canBeKilled ?previousVal .
					}
					INSERT {
						?agent welcome:canBeKilled "false"^^xsd:boolean .
					}
					WHERE {
						?agent rdf:type ajan:Agent .
						OPTIONAL {
							?agent welcome:canBeKilled ?previousVal .
						}
					}					
					"""^^xsd:string ;
		]) .

:UpdateAgentRunningNot
	a bt:Update ;
	rdfs:label "Update: Kill the Agent" ;
	bt:query ( [
		a bt:UpdateQuery ;
		bt:originBase ajan:AgentKnowledge ;
		bt:sparql """
					PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
					PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#>
					PREFIX ajan: <http://www.ajan.de/ajan-ns#>
					PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
					DELETE {
						?agent welcome:canBeKilled ?previousVal .
					}
					INSERT {
						?agent welcome:canBeKilled "true"^^xsd:boolean .
					}
					WHERE {
						?agent rdf:type ajan:Agent .
						OPTIONAL {
							?agent welcome:canBeKilled ?previousVal .
						}
					}					
					"""^^xsd:string ;
		]) .

:MessageSendShutdownNotification
	a myWelcome:Message ;
	rdfs:label "Message: Send Shutdown Notification to WPM"^^xsd:string ;
	rdfs:comment "Message: Send Shutdown Notification to WPM"^^xsd:string ;
	bt:targetBase ajan:AgentKnowledge ;  
	myWelcome:correlatorId [
		a bt:SelectQuery;
		bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?correlatorId
				WHERE {
						?msg welcome:hasCorrelationID ?correlatorId .
				}"""^^xsd:string
	] ;
	bt:binding [
		a http-core:Request ;
		http-core:httpVersion "1.1"^^xsd:string ;
		http-core:mthd http-methods:POST ;
		bt:headers [
			a bt:SelectQuery;
			a bt:QueryUri ;
			bt:originBase ajan:AgentKnowledge ;
			bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				SELECT ?hdrName ?userID
				WHERE {
					   VALUES ?hdrName {"X-User-ID"}
					   ?du rdf:type welcome:DialogueUser .
					   ?du welcome:hasUserId ?idObject .
						?idObject welcome:hasValue ?id .
				}"""^^xsd:string
		] ;
		http-core:headers ([
					a http-core:Header ;						
					http-core:hdrName http-headers:accept ;
					http-core:fieldValue "text/turtle;charset=UTF-8"
				][
					a http-core:Header ;
					http-core:hdrName http-headers:content-type ;
					http-core:fieldValue "application/ld+json"
				]
		) ;	
		http-core:body [
			a actn:Payload ;
			bt:query [
				rdf:type bt:ConstructQuery ;
				bt:originBase ajan:AgentKnowledge ;
				bt:sparql """
						PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
						PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
						CONSTRUCT {
							?agent welcome:canBeKilled ?val .
						}
						WHERE {
							?agent welcome:canBeKilled ?val .
						}"""^^xsd:string
			]
		] ;    
	] ;
	bt:queryUri [
	a bt:SelectQuery ;
	a bt:QueryUri ;
	bt:originBase ajan:AgentKnowledge ;
	bt:sparql """
				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
				SELECT ?requestURI 
				WHERE
				{
				  welcome:dispatcher welcome:hasAddress ?partialAddress .
				  BIND(CONCAT(STR(?partialAddress), "/welcome/integration/workflow/dispatcher/agentShutdownAcknowledgement") AS ?requestURI )
				}"""^^xsd:string
	] . 
#	bt:queryUri [
#	a bt:SelectQuery ;
#	a bt:QueryUri ;
#	bt:originBase ajan:AgentKnowledge ;  
#	bt:sparql """
#				PREFIX welcome: <https://raw.githubusercontent.com/gtzionis/WelcomeOntology/main/welcome.ttl#> 
#				PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
#				SELECT ?requestURI 
#				WHERE
#				{
#				  welcome:dispatcher welcome:hasAddress ?partialAddress .
#				  BIND(CONCAT(STR(?partialAddress), "/dms/receiveDIP") AS ?requestURI )
#				}"""^^xsd:string
#	] .